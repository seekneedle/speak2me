var _l=Object.defineProperty;var rr=s=>{throw TypeError(s)};var Tl=(s,e,t)=>e in s?_l(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var N=(s,e,t)=>Tl(s,typeof e!="symbol"?e+"":e,t),Fl=(s,e,t)=>e.has(s)||rr("Cannot "+t);var or=(s,e,t)=>e.has(s)?rr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);var $n=(s,e,t)=>(Fl(s,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ai(s){const e=Object.create(null);for(const t of s.split(","))e[t]=1;return t=>t in e}const ee={},Gt=[],ot=()=>{},Rl=()=>!1,fs=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Ci=s=>s.startsWith("onUpdate:"),xe=Object.assign,Si=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},Ol=Object.prototype.hasOwnProperty,Q=(s,e)=>Ol.call(s,e),z=Array.isArray,Qt=s=>hs(s)==="[object Map]",go=s=>hs(s)==="[object Set]",q=s=>typeof s=="function",ue=s=>typeof s=="string",xt=s=>typeof s=="symbol",oe=s=>s!==null&&typeof s=="object",po=s=>(oe(s)||q(s))&&q(s.then)&&q(s.catch),mo=Object.prototype.toString,hs=s=>mo.call(s),Pl=s=>hs(s).slice(8,-1),yo=s=>hs(s)==="[object Object]",Ei=s=>ue(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,gn=Ai(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ds=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},Bl=/-(\w)/g,wt=ds(s=>s.replace(Bl,(e,t)=>t?t.toUpperCase():"")),$l=/\B([A-Z])/g,kt=ds(s=>s.replace($l,"-$1").toLowerCase()),bo=ds(s=>s.charAt(0).toUpperCase()+s.slice(1)),_s=ds(s=>s?`on${bo(s)}`:""),bt=(s,e)=>!Object.is(s,e),Hn=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},wo=(s,e,t,n=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:n,value:t})},Ks=s=>{const e=parseFloat(s);return isNaN(e)?s:e};let ar;const gs=()=>ar||(ar=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vi(s){if(z(s)){const e={};for(let t=0;t<s.length;t++){const n=s[t],i=ue(n)?Il(n):vi(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(ue(s)||oe(s))return s}const Nl=/;(?![^(]*\))/g,Ll=/:([^]+)/,Ml=/\/\*[^]*?\*\//g;function Il(s){const e={};return s.replace(Ml,"").split(Nl).forEach(t=>{if(t){const n=t.split(Ll);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function tn(s){let e="";if(ue(s))e=s;else if(z(s))for(let t=0;t<s.length;t++){const n=tn(s[t]);n&&(e+=n+" ")}else if(oe(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const jl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zl=Ai(jl);function xo(s){return!!s||s===""}const ko=s=>!!(s&&s.__v_isRef===!0),Wn=s=>ue(s)?s:s==null?"":z(s)||oe(s)&&(s.toString===mo||!q(s.toString))?ko(s)?Wn(s.value):JSON.stringify(s,Ao,2):String(s),Ao=(s,e)=>ko(e)?Ao(s,e.value):Qt(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],r)=>(t[Ts(n,r)+" =>"]=i,t),{})}:go(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ts(t))}:xt(e)?Ts(e):oe(e)&&!z(e)&&!yo(e)?String(e):e,Ts=(s,e="")=>{var t;return xt(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $e;class Ul{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=$e,!e&&$e&&(this.index=($e.scopes||($e.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=$e;try{return $e=this,e()}finally{$e=t}}}on(){$e=this}off(){$e=this.parent}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ql(){return $e}let ne;const Fs=new WeakSet;class Co{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,$e&&$e.active&&$e.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fs.has(this)&&(Fs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Eo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,lr(this),vo(this);const e=ne,t=Je;ne=this,Je=!0;try{return this.fn()}finally{Do(this),ne=e,Je=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ti(e);this.deps=this.depsTail=void 0,lr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gs(this)&&this.run()}get dirty(){return Gs(this)}}let So=0,pn,mn;function Eo(s,e=!1){if(s.flags|=8,e){s.next=mn,mn=s;return}s.next=pn,pn=s}function Di(){So++}function _i(){if(--So>0)return;if(mn){let e=mn;for(mn=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let s;for(;pn;){let e=pn;for(pn=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){s||(s=n)}e=t}}if(s)throw s}function vo(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Do(s){let e,t=s.depsTail,n=t;for(;n;){const i=n.prevDep;n.version===-1?(n===t&&(t=i),Ti(n),Hl(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}s.deps=e,s.depsTail=t}function Gs(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(_o(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function _o(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===Cn))return;s.globalVersion=Cn;const e=s.dep;if(s.flags|=2,e.version>0&&!s.isSSR&&s.deps&&!Gs(s)){s.flags&=-3;return}const t=ne,n=Je;ne=s,Je=!0;try{vo(s);const i=s.fn(s._value);(e.version===0||bt(i,s._value))&&(s._value=i,e.version++)}catch(i){throw e.version++,i}finally{ne=t,Je=n,Do(s),s.flags&=-3}}function Ti(s,e=!1){const{dep:t,prevSub:n,nextSub:i}=s;if(n&&(n.nextSub=i,s.prevSub=void 0),i&&(i.prevSub=n,s.nextSub=void 0),t.subs===s&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Ti(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Hl(s){const{prevDep:e,nextDep:t}=s;e&&(e.nextDep=t,s.prevDep=void 0),t&&(t.prevDep=e,s.nextDep=void 0)}let Je=!0;const To=[];function At(){To.push(Je),Je=!1}function Ct(){const s=To.pop();Je=s===void 0?!0:s}function lr(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const t=ne;ne=void 0;try{e()}finally{ne=t}}}let Cn=0;class Wl{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fi{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ne||!Je||ne===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==ne)t=this.activeLink=new Wl(ne,this),ne.deps?(t.prevDep=ne.depsTail,ne.depsTail.nextDep=t,ne.depsTail=t):ne.deps=ne.depsTail=t,Fo(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=ne.depsTail,t.nextDep=void 0,ne.depsTail.nextDep=t,ne.depsTail=t,ne.deps===t&&(ne.deps=n)}return t}trigger(e){this.version++,Cn++,this.notify(e)}notify(e){Di();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{_i()}}}function Fo(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Fo(n)}const t=s.dep.subs;t!==s&&(s.prevSub=t,t&&(t.nextSub=s)),s.dep.subs=s}}const Qs=new WeakMap,Ot=Symbol(""),Zs=Symbol(""),Sn=Symbol("");function me(s,e,t){if(Je&&ne){let n=Qs.get(s);n||Qs.set(s,n=new Map);let i=n.get(t);i||(n.set(t,i=new Fi),i.map=n,i.key=t),i.track()}}function dt(s,e,t,n,i,r){const o=Qs.get(s);if(!o){Cn++;return}const a=l=>{l&&l.trigger()};if(Di(),e==="clear")o.forEach(a);else{const l=z(s),c=l&&Ei(t);if(l&&t==="length"){const u=Number(n);o.forEach((f,h)=>{(h==="length"||h===Sn||!xt(h)&&h>=u)&&a(f)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(Sn)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Ot)),Qt(s)&&a(o.get(Zs)));break;case"delete":l||(a(o.get(Ot)),Qt(s)&&a(o.get(Zs)));break;case"set":Qt(s)&&a(o.get(Ot));break}}_i()}function Ht(s){const e=G(s);return e===s?e:(me(e,"iterate",Sn),Ue(s)?e:e.map(ye))}function ps(s){return me(s=G(s),"iterate",Sn),s}const Vl={__proto__:null,[Symbol.iterator](){return Rs(this,Symbol.iterator,ye)},concat(...s){return Ht(this).concat(...s.map(e=>z(e)?Ht(e):e))},entries(){return Rs(this,"entries",s=>(s[1]=ye(s[1]),s))},every(s,e){return ft(this,"every",s,e,void 0,arguments)},filter(s,e){return ft(this,"filter",s,e,t=>t.map(ye),arguments)},find(s,e){return ft(this,"find",s,e,ye,arguments)},findIndex(s,e){return ft(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return ft(this,"findLast",s,e,ye,arguments)},findLastIndex(s,e){return ft(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return ft(this,"forEach",s,e,void 0,arguments)},includes(...s){return Os(this,"includes",s)},indexOf(...s){return Os(this,"indexOf",s)},join(s){return Ht(this).join(s)},lastIndexOf(...s){return Os(this,"lastIndexOf",s)},map(s,e){return ft(this,"map",s,e,void 0,arguments)},pop(){return an(this,"pop")},push(...s){return an(this,"push",s)},reduce(s,...e){return cr(this,"reduce",s,e)},reduceRight(s,...e){return cr(this,"reduceRight",s,e)},shift(){return an(this,"shift")},some(s,e){return ft(this,"some",s,e,void 0,arguments)},splice(...s){return an(this,"splice",s)},toReversed(){return Ht(this).toReversed()},toSorted(s){return Ht(this).toSorted(s)},toSpliced(...s){return Ht(this).toSpliced(...s)},unshift(...s){return an(this,"unshift",s)},values(){return Rs(this,"values",ye)}};function Rs(s,e,t){const n=ps(s),i=n[e]();return n!==s&&!Ue(s)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=t(r.value)),r}),i}const Jl=Array.prototype;function ft(s,e,t,n,i,r){const o=ps(s),a=o!==s&&!Ue(s),l=o[e];if(l!==Jl[e]){const f=l.apply(s,r);return a?ye(f):f}let c=t;o!==s&&(a?c=function(f,h){return t.call(this,ye(f),h,s)}:t.length>2&&(c=function(f,h){return t.call(this,f,h,s)}));const u=l.call(o,c,n);return a&&i?i(u):u}function cr(s,e,t,n){const i=ps(s);let r=t;return i!==s&&(Ue(s)?t.length>3&&(r=function(o,a,l){return t.call(this,o,a,l,s)}):r=function(o,a,l){return t.call(this,o,ye(a),l,s)}),i[e](r,...n)}function Os(s,e,t){const n=G(s);me(n,"iterate",Sn);const i=n[e](...t);return(i===-1||i===!1)&&Bi(t[0])?(t[0]=G(t[0]),n[e](...t)):i}function an(s,e,t=[]){At(),Di();const n=G(s)[e].apply(s,t);return _i(),Ct(),n}const Kl=Ai("__proto__,__v_isRef,__isVue"),Ro=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(xt));function Gl(s){xt(s)||(s=String(s));const e=G(this);return me(e,"has",s),e.hasOwnProperty(s)}class Oo{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return r;if(t==="__v_raw")return n===(i?r?rc:No:r?$o:Bo).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=z(e);if(!i){let l;if(o&&(l=Vl[t]))return l;if(t==="hasOwnProperty")return Gl}const a=Reflect.get(e,t,we(e)?e:n);return(xt(t)?Ro.has(t):Kl(t))||(i||me(e,"get",t),r)?a:we(a)?o&&Ei(t)?a:a.value:oe(a)?i?Lo(a):Oi(a):a}}class Po extends Oo{constructor(e=!1){super(!1,e)}set(e,t,n,i){let r=e[t];if(!this._isShallow){const l=Bt(r);if(!Ue(n)&&!Bt(n)&&(r=G(r),n=G(n)),!z(e)&&we(r)&&!we(n))return l?!1:(r.value=n,!0)}const o=z(e)&&Ei(t)?Number(t)<e.length:Q(e,t),a=Reflect.set(e,t,n,we(e)?e:i);return e===G(i)&&(o?bt(n,r)&&dt(e,"set",t,n):dt(e,"add",t,n)),a}deleteProperty(e,t){const n=Q(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&dt(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!xt(t)||!Ro.has(t))&&me(e,"has",t),n}ownKeys(e){return me(e,"iterate",z(e)?"length":Ot),Reflect.ownKeys(e)}}class Ql extends Oo{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Zl=new Po,Xl=new Ql,Yl=new Po(!0);const Xs=s=>s,Nn=s=>Reflect.getPrototypeOf(s);function ec(s,e,t){return function(...n){const i=this.__v_raw,r=G(i),o=Qt(r),a=s==="entries"||s===Symbol.iterator&&o,l=s==="keys"&&o,c=i[s](...n),u=t?Xs:e?Ys:ye;return!e&&me(r,"iterate",l?Zs:Ot),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Ln(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function tc(s,e){const t={get(i){const r=this.__v_raw,o=G(r),a=G(i);s||(bt(i,a)&&me(o,"get",i),me(o,"get",a));const{has:l}=Nn(o),c=e?Xs:s?Ys:ye;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!s&&me(G(i),"iterate",Ot),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=G(r),a=G(i);return s||(bt(i,a)&&me(o,"has",i),me(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=G(a),c=e?Xs:s?Ys:ye;return!s&&me(l,"iterate",Ot),a.forEach((u,f)=>i.call(r,c(u),c(f),o))}};return xe(t,s?{add:Ln("add"),set:Ln("set"),delete:Ln("delete"),clear:Ln("clear")}:{add(i){!e&&!Ue(i)&&!Bt(i)&&(i=G(i));const r=G(this);return Nn(r).has.call(r,i)||(r.add(i),dt(r,"add",i,i)),this},set(i,r){!e&&!Ue(r)&&!Bt(r)&&(r=G(r));const o=G(this),{has:a,get:l}=Nn(o);let c=a.call(o,i);c||(i=G(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?bt(r,u)&&dt(o,"set",i,r):dt(o,"add",i,r),this},delete(i){const r=G(this),{has:o,get:a}=Nn(r);let l=o.call(r,i);l||(i=G(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&dt(r,"delete",i,void 0),c},clear(){const i=G(this),r=i.size!==0,o=i.clear();return r&&dt(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ec(i,s,e)}),t}function Ri(s,e){const t=tc(s,e);return(n,i,r)=>i==="__v_isReactive"?!s:i==="__v_isReadonly"?s:i==="__v_raw"?n:Reflect.get(Q(t,i)&&i in n?t:n,i,r)}const nc={get:Ri(!1,!1)},sc={get:Ri(!1,!0)},ic={get:Ri(!0,!1)};const Bo=new WeakMap,$o=new WeakMap,No=new WeakMap,rc=new WeakMap;function oc(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ac(s){return s.__v_skip||!Object.isExtensible(s)?0:oc(Pl(s))}function Oi(s){return Bt(s)?s:Pi(s,!1,Zl,nc,Bo)}function lc(s){return Pi(s,!1,Yl,sc,$o)}function Lo(s){return Pi(s,!0,Xl,ic,No)}function Pi(s,e,t,n,i){if(!oe(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const r=i.get(s);if(r)return r;const o=ac(s);if(o===0)return s;const a=new Proxy(s,o===2?n:t);return i.set(s,a),a}function Zt(s){return Bt(s)?Zt(s.__v_raw):!!(s&&s.__v_isReactive)}function Bt(s){return!!(s&&s.__v_isReadonly)}function Ue(s){return!!(s&&s.__v_isShallow)}function Bi(s){return s?!!s.__v_raw:!1}function G(s){const e=s&&s.__v_raw;return e?G(e):s}function cc(s){return!Q(s,"__v_skip")&&Object.isExtensible(s)&&wo(s,"__v_skip",!0),s}const ye=s=>oe(s)?Oi(s):s,Ys=s=>oe(s)?Lo(s):s;function we(s){return s?s.__v_isRef===!0:!1}function de(s){return uc(s,!1)}function uc(s,e){return we(s)?s:new fc(s,e)}class fc{constructor(e,t){this.dep=new Fi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:G(e),this._value=t?e:ye(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||Ue(e)||Bt(e);e=n?e:G(e),bt(e,t)&&(this._rawValue=e,this._value=n?e:ye(e),this.dep.trigger())}}function Vt(s){return we(s)?s.value:s}const hc={get:(s,e,t)=>e==="__v_raw"?s:Vt(Reflect.get(s,e,t)),set:(s,e,t,n)=>{const i=s[e];return we(i)&&!we(t)?(i.value=t,!0):Reflect.set(s,e,t,n)}};function Mo(s){return Zt(s)?s:new Proxy(s,hc)}class dc{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Fi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ne!==this)return Eo(this,!0),!0}get value(){const e=this.dep.track();return _o(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function gc(s,e,t=!1){let n,i;return q(s)?n=s:(n=s.get,i=s.set),new dc(n,i,t)}const Mn={},es=new WeakMap;let _t;function pc(s,e=!1,t=_t){if(t){let n=es.get(t);n||es.set(t,n=[]),n.push(s)}}function mc(s,e,t=ee){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=t,c=R=>i?R:Ue(R)||i===!1||i===0?gt(R,1):gt(R);let u,f,h,p,m=!1,w=!1;if(we(s)?(f=()=>s.value,m=Ue(s)):Zt(s)?(f=()=>c(s),m=!0):z(s)?(w=!0,m=s.some(R=>Zt(R)||Ue(R)),f=()=>s.map(R=>{if(we(R))return R.value;if(Zt(R))return c(R);if(q(R))return l?l(R,2):R()})):q(s)?e?f=l?()=>l(s,2):s:f=()=>{if(h){At();try{h()}finally{Ct()}}const R=_t;_t=u;try{return l?l(s,3,[p]):s(p)}finally{_t=R}}:f=ot,e&&i){const R=f,j=i===!0?1/0:i;f=()=>gt(R(),j)}const k=ql(),F=()=>{u.stop(),k&&k.active&&Si(k.effects,u)};if(r&&e){const R=e;e=(...j)=>{R(...j),F()}}let $=w?new Array(s.length).fill(Mn):Mn;const M=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(e){const j=u.run();if(i||m||(w?j.some((re,se)=>bt(re,$[se])):bt(j,$))){h&&h();const re=_t;_t=u;try{const se=[j,$===Mn?void 0:w&&$[0]===Mn?[]:$,p];l?l(e,3,se):e(...se),$=j}finally{_t=re}}}else u.run()};return a&&a(M),u=new Co(f),u.scheduler=o?()=>o(M,!1):M,p=R=>pc(R,!1,u),h=u.onStop=()=>{const R=es.get(u);if(R){if(l)l(R,4);else for(const j of R)j();es.delete(u)}},e?n?M(!0):$=u.run():o?o(M.bind(null,!0),!0):u.run(),F.pause=u.pause.bind(u),F.resume=u.resume.bind(u),F.stop=F,F}function gt(s,e=1/0,t){if(e<=0||!oe(s)||s.__v_skip||(t=t||new Set,t.has(s)))return s;if(t.add(s),e--,we(s))gt(s.value,e,t);else if(z(s))for(let n=0;n<s.length;n++)gt(s[n],e,t);else if(go(s)||Qt(s))s.forEach(n=>{gt(n,e,t)});else if(yo(s)){for(const n in s)gt(s[n],e,t);for(const n of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,n)&&gt(s[n],e,t)}return s}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tn(s,e,t,n){try{return n?s(...n):s()}catch(i){ms(i,e,t)}}function lt(s,e,t,n){if(q(s)){const i=Tn(s,e,t,n);return i&&po(i)&&i.catch(r=>{ms(r,e,t)}),i}if(z(s)){const i=[];for(let r=0;r<s.length;r++)i.push(lt(s[r],e,t,n));return i}}function ms(s,e,t,n=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ee;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](s,l,c)===!1)return}a=a.parent}if(r){At(),Tn(r,null,10,[s,l,c]),Ct();return}}yc(s,t,i,n,o)}function yc(s,e,t,n=!0,i=!1){if(i)throw s;console.error(s)}const Se=[];let nt=-1;const Xt=[];let mt=null,Jt=0;const Io=Promise.resolve();let ts=null;function ei(s){const e=ts||Io;return s?e.then(this?s.bind(this):s):e}function bc(s){let e=nt+1,t=Se.length;for(;e<t;){const n=e+t>>>1,i=Se[n],r=En(i);r<s||r===s&&i.flags&2?e=n+1:t=n}return e}function $i(s){if(!(s.flags&1)){const e=En(s),t=Se[Se.length-1];!t||!(s.flags&2)&&e>=En(t)?Se.push(s):Se.splice(bc(e),0,s),s.flags|=1,jo()}}function jo(){ts||(ts=Io.then(Uo))}function wc(s){z(s)?Xt.push(...s):mt&&s.id===-1?mt.splice(Jt+1,0,s):s.flags&1||(Xt.push(s),s.flags|=1),jo()}function ur(s,e,t=nt+1){for(;t<Se.length;t++){const n=Se[t];if(n&&n.flags&2){if(s&&n.id!==s.uid)continue;Se.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function zo(s){if(Xt.length){const e=[...new Set(Xt)].sort((t,n)=>En(t)-En(n));if(Xt.length=0,mt){mt.push(...e);return}for(mt=e,Jt=0;Jt<mt.length;Jt++){const t=mt[Jt];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}mt=null,Jt=0}}const En=s=>s.id==null?s.flags&2?-1:1/0:s.id;function Uo(s){try{for(nt=0;nt<Se.length;nt++){const e=Se[nt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Tn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;nt<Se.length;nt++){const e=Se[nt];e&&(e.flags&=-2)}nt=-1,Se.length=0,zo(),ts=null,(Se.length||Xt.length)&&Uo()}}let ze=null,qo=null;function ns(s){const e=ze;return ze=s,qo=s&&s.type.__scopeId||null,e}function xc(s,e=ze,t){if(!e||s._n)return s;const n=(...i)=>{n._d&&wr(-1);const r=ns(e);let o;try{o=s(...i)}finally{ns(r),n._d&&wr(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function kc(s,e){if(ze===null)return s;const t=xs(ze),n=s.dirs||(s.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,l=ee]=e[i];r&&(q(r)&&(r={mounted:r,updated:r}),r.deep&&gt(o),n.push({dir:r,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return s}function vt(s,e,t,n){const i=s.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(At(),lt(l,t,8,[s.el,a,s,e]),Ct())}}const Ac=Symbol("_vte"),Cc=s=>s.__isTeleport;function Ni(s,e){s.shapeFlag&6&&s.component?(s.transition=e,Ni(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Li(s,e){return q(s)?xe({name:s.name},e,{setup:s}):s}function Ho(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function ss(s,e,t,n,i=!1){if(z(s)){s.forEach((m,w)=>ss(m,e&&(z(e)?e[w]:e),t,n,i));return}if(yn(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ss(s,e,t,n.component.subTree);return}const r=n.shapeFlag&4?xs(n.component):n.el,o=i?null:r,{i:a,r:l}=s,c=e&&e.r,u=a.refs===ee?a.refs={}:a.refs,f=a.setupState,h=G(f),p=f===ee?()=>!1:m=>Q(h,m);if(c!=null&&c!==l&&(ue(c)?(u[c]=null,p(c)&&(f[c]=null)):we(c)&&(c.value=null)),q(l))Tn(l,a,12,[o,u]);else{const m=ue(l),w=we(l);if(m||w){const k=()=>{if(s.f){const F=m?p(l)?f[l]:u[l]:l.value;i?z(F)&&Si(F,r):z(F)?F.includes(r)||F.push(r):m?(u[l]=[r],p(l)&&(f[l]=u[l])):(l.value=[r],s.k&&(u[s.k]=l.value))}else m?(u[l]=o,p(l)&&(f[l]=o)):w&&(l.value=o,s.k&&(u[s.k]=o))};o?(k.id=-1,Pe(k,t)):k()}}}gs().requestIdleCallback;gs().cancelIdleCallback;const yn=s=>!!s.type.__asyncLoader,Wo=s=>s.type.__isKeepAlive;function Sc(s,e){Vo(s,"a",e)}function Ec(s,e){Vo(s,"da",e)}function Vo(s,e,t=Ee){const n=s.__wdc||(s.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return s()});if(ys(e,n,t),t){let i=t.parent;for(;i&&i.parent;)Wo(i.parent.vnode)&&vc(n,e,t,i),i=i.parent}}function vc(s,e,t,n){const i=ys(e,s,n,!0);Mi(()=>{Si(n[e],i)},t)}function ys(s,e,t=Ee,n=!1){if(t){const i=t[s]||(t[s]=[]),r=e.__weh||(e.__weh=(...o)=>{At();const a=Fn(t),l=lt(e,t,s,o);return a(),Ct(),l});return n?i.unshift(r):i.push(r),r}}const pt=s=>(e,t=Ee)=>{(!Dn||s==="sp")&&ys(s,(...n)=>e(...n),t)},Dc=pt("bm"),Jo=pt("m"),_c=pt("bu"),Tc=pt("u"),Fc=pt("bum"),Mi=pt("um"),Rc=pt("sp"),Oc=pt("rtg"),Pc=pt("rtc");function Bc(s,e=Ee){ys("ec",s,e)}const $c=Symbol.for("v-ndc");function Nc(s,e,t,n){let i;const r=t,o=z(s);if(o||ue(s)){const a=o&&Zt(s);let l=!1;a&&(l=!Ue(s),s=ps(s)),i=new Array(s.length);for(let c=0,u=s.length;c<u;c++)i[c]=e(l?ye(s[c]):s[c],c,void 0,r)}else if(typeof s=="number"){i=new Array(s);for(let a=0;a<s;a++)i[a]=e(a+1,a,void 0,r)}else if(oe(s))if(s[Symbol.iterator])i=Array.from(s,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(s);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=e(s[u],u,l,r)}}else i=[];return i}const ti=s=>s?ma(s)?xs(s):ti(s.parent):null,bn=xe(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>ti(s.parent),$root:s=>ti(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>Go(s),$forceUpdate:s=>s.f||(s.f=()=>{$i(s.update)}),$nextTick:s=>s.n||(s.n=ei.bind(s.proxy)),$watch:s=>iu.bind(s)}),Ps=(s,e)=>s!==ee&&!s.__isScriptSetup&&Q(s,e),Lc={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:r,accessCache:o,type:a,appContext:l}=s;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return r[e]}else{if(Ps(n,e))return o[e]=1,n[e];if(i!==ee&&Q(i,e))return o[e]=2,i[e];if((c=s.propsOptions[0])&&Q(c,e))return o[e]=3,r[e];if(t!==ee&&Q(t,e))return o[e]=4,t[e];ni&&(o[e]=0)}}const u=bn[e];let f,h;if(u)return e==="$attrs"&&me(s.attrs,"get",""),u(s);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==ee&&Q(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,Q(h,e))return h[e]},set({_:s},e,t){const{data:n,setupState:i,ctx:r}=s;return Ps(i,e)?(i[e]=t,!0):n!==ee&&Q(n,e)?(n[e]=t,!0):Q(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(r[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:r}},o){let a;return!!t[o]||s!==ee&&Q(s,o)||Ps(e,o)||(a=r[0])&&Q(a,o)||Q(n,o)||Q(bn,o)||Q(i.config.globalProperties,o)},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:Q(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function fr(s){return z(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let ni=!0;function Mc(s){const e=Go(s),t=s.proxy,n=s.ctx;ni=!1,e.beforeCreate&&hr(e.beforeCreate,s,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:p,updated:m,activated:w,deactivated:k,beforeDestroy:F,beforeUnmount:$,destroyed:M,unmounted:R,render:j,renderTracked:re,renderTriggered:se,errorCaptured:ie,serverPrefetch:qe,expose:Ge,inheritAttrs:St,components:jt,directives:ke,filters:Et}=e;if(c&&Ic(c,n,null),o)for(const J in o){const W=o[J];q(W)&&(n[J]=W.bind(t))}if(i){const J=i.call(t,t);oe(J)&&(s.data=Oi(J))}if(ni=!0,r)for(const J in r){const W=r[J],ct=q(W)?W.bind(t,t):q(W.get)?W.get.bind(t,t):ot,Ut=!q(W)&&q(W.set)?W.set.bind(t):ot,ut=zi({get:ct,set:Ut});Object.defineProperty(n,J,{enumerable:!0,configurable:!0,get:()=>ut.value,set:ve=>ut.value=ve})}if(a)for(const J in a)Ko(a[J],n,t,J);if(l){const J=q(l)?l.call(t):l;Reflect.ownKeys(J).forEach(W=>{Wc(W,J[W])})}u&&hr(u,s,"c");function ae(J,W){z(W)?W.forEach(ct=>J(ct.bind(t))):W&&J(W.bind(t))}if(ae(Dc,f),ae(Jo,h),ae(_c,p),ae(Tc,m),ae(Sc,w),ae(Ec,k),ae(Bc,ie),ae(Pc,re),ae(Oc,se),ae(Fc,$),ae(Mi,R),ae(Rc,qe),z(Ge))if(Ge.length){const J=s.exposed||(s.exposed={});Ge.forEach(W=>{Object.defineProperty(J,W,{get:()=>t[W],set:ct=>t[W]=ct})})}else s.exposed||(s.exposed={});j&&s.render===ot&&(s.render=j),St!=null&&(s.inheritAttrs=St),jt&&(s.components=jt),ke&&(s.directives=ke),qe&&Ho(s)}function Ic(s,e,t=ot){z(s)&&(s=si(s));for(const n in s){const i=s[n];let r;oe(i)?"default"in i?r=Vn(i.from||n,i.default,!0):r=Vn(i.from||n):r=Vn(i),we(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function hr(s,e,t){lt(z(s)?s.map(n=>n.bind(e.proxy)):s.bind(e.proxy),e,t)}function Ko(s,e,t,n){let i=n.includes(".")?ca(t,n):()=>t[n];if(ue(s)){const r=e[s];q(r)&&en(i,r)}else if(q(s))en(i,s.bind(t));else if(oe(s))if(z(s))s.forEach(r=>Ko(r,e,t,n));else{const r=q(s.handler)?s.handler.bind(t):e[s.handler];q(r)&&en(i,r,s)}}function Go(s){const e=s.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!t&&!n?l=e:(l={},i.length&&i.forEach(c=>is(l,c,o,!0)),is(l,e,o)),oe(e)&&r.set(e,l),l}function is(s,e,t,n=!1){const{mixins:i,extends:r}=e;r&&is(s,r,t,!0),i&&i.forEach(o=>is(s,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const a=jc[o]||t&&t[o];s[o]=a?a(s[o],e[o]):e[o]}return s}const jc={data:dr,props:gr,emits:gr,methods:hn,computed:hn,beforeCreate:Ae,created:Ae,beforeMount:Ae,mounted:Ae,beforeUpdate:Ae,updated:Ae,beforeDestroy:Ae,beforeUnmount:Ae,destroyed:Ae,unmounted:Ae,activated:Ae,deactivated:Ae,errorCaptured:Ae,serverPrefetch:Ae,components:hn,directives:hn,watch:Uc,provide:dr,inject:zc};function dr(s,e){return e?s?function(){return xe(q(s)?s.call(this,this):s,q(e)?e.call(this,this):e)}:e:s}function zc(s,e){return hn(si(s),si(e))}function si(s){if(z(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function Ae(s,e){return s?[...new Set([].concat(s,e))]:e}function hn(s,e){return s?xe(Object.create(null),s,e):e}function gr(s,e){return s?z(s)&&z(e)?[...new Set([...s,...e])]:xe(Object.create(null),fr(s),fr(e??{})):e}function Uc(s,e){if(!s)return e;if(!e)return s;const t=xe(Object.create(null),s);for(const n in e)t[n]=Ae(s[n],e[n]);return t}function Qo(){return{app:null,config:{isNativeTag:Rl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qc=0;function Hc(s,e){return function(n,i=null){q(n)||(n=xe({},n)),i!=null&&!oe(i)&&(i=null);const r=Qo(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:qc++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:Eu,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&q(u.install)?(o.add(u),u.install(c,...f)):q(u)&&(o.add(u),u(c,...f))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,f){return f?(r.components[u]=f,c):r.components[u]},directive(u,f){return f?(r.directives[u]=f,c):r.directives[u]},mount(u,f,h){if(!l){const p=c._ceVNode||at(n,i);return p.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),s(p,u,h),l=!0,c._container=u,u.__vue_app__=c,xs(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(lt(a,c._instance,16),s(null,c._container),delete c._container.__vue_app__)},provide(u,f){return r.provides[u]=f,c},runWithContext(u){const f=Yt;Yt=c;try{return u()}finally{Yt=f}}};return c}}let Yt=null;function Wc(s,e){if(Ee){let t=Ee.provides;const n=Ee.parent&&Ee.parent.provides;n===t&&(t=Ee.provides=Object.create(n)),t[s]=e}}function Vn(s,e,t=!1){const n=Ee||ze;if(n||Yt){const i=Yt?Yt._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&s in i)return i[s];if(arguments.length>1)return t&&q(e)?e.call(n&&n.proxy):e}}const Zo={},Xo=()=>Object.create(Zo),Yo=s=>Object.getPrototypeOf(s)===Zo;function Vc(s,e,t,n=!1){const i={},r=Xo();s.propsDefaults=Object.create(null),ea(s,e,i,r);for(const o in s.propsOptions[0])o in i||(i[o]=void 0);t?s.props=n?i:lc(i):s.type.props?s.props=i:s.props=r,s.attrs=r}function Jc(s,e,t,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=s,a=G(i),[l]=s.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(bs(s.emitsOptions,h))continue;const p=e[h];if(l)if(Q(r,h))p!==r[h]&&(r[h]=p,c=!0);else{const m=wt(h);i[m]=ii(l,a,m,p,s,!1)}else p!==r[h]&&(r[h]=p,c=!0)}}}else{ea(s,e,i,r)&&(c=!0);let u;for(const f in a)(!e||!Q(e,f)&&((u=kt(f))===f||!Q(e,u)))&&(l?t&&(t[f]!==void 0||t[u]!==void 0)&&(i[f]=ii(l,a,f,void 0,s,!0)):delete i[f]);if(r!==a)for(const f in r)(!e||!Q(e,f))&&(delete r[f],c=!0)}c&&dt(s.attrs,"set","")}function ea(s,e,t,n){const[i,r]=s.propsOptions;let o=!1,a;if(e)for(let l in e){if(gn(l))continue;const c=e[l];let u;i&&Q(i,u=wt(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:bs(s.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=G(t),c=a||ee;for(let u=0;u<r.length;u++){const f=r[u];t[f]=ii(i,l,f,c[f],s,!Q(c,f))}}return o}function ii(s,e,t,n,i,r){const o=s[t];if(o!=null){const a=Q(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&q(l)){const{propsDefaults:c}=i;if(t in c)n=c[t];else{const u=Fn(i);n=c[t]=l.call(null,e),u()}}else n=l;i.ce&&i.ce._setProp(t,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===kt(t))&&(n=!0))}return n}const Kc=new WeakMap;function ta(s,e,t=!1){const n=t?Kc:e.propsCache,i=n.get(s);if(i)return i;const r=s.props,o={},a=[];let l=!1;if(!q(s)){const u=f=>{l=!0;const[h,p]=ta(f,e,!0);xe(o,h),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!l)return oe(s)&&n.set(s,Gt),Gt;if(z(r))for(let u=0;u<r.length;u++){const f=wt(r[u]);pr(f)&&(o[f]=ee)}else if(r)for(const u in r){const f=wt(u);if(pr(f)){const h=r[u],p=o[f]=z(h)||q(h)?{type:h}:xe({},h),m=p.type;let w=!1,k=!0;if(z(m))for(let F=0;F<m.length;++F){const $=m[F],M=q($)&&$.name;if(M==="Boolean"){w=!0;break}else M==="String"&&(k=!1)}else w=q(m)&&m.name==="Boolean";p[0]=w,p[1]=k,(w||Q(p,"default"))&&a.push(f)}}const c=[o,a];return oe(s)&&n.set(s,c),c}function pr(s){return s[0]!=="$"&&!gn(s)}const na=s=>s[0]==="_"||s==="$stable",Ii=s=>z(s)?s.map(st):[st(s)],Gc=(s,e,t)=>{if(e._n)return e;const n=xc((...i)=>Ii(e(...i)),t);return n._c=!1,n},sa=(s,e,t)=>{const n=s._ctx;for(const i in s){if(na(i))continue;const r=s[i];if(q(r))e[i]=Gc(i,r,n);else if(r!=null){const o=Ii(r);e[i]=()=>o}}},ia=(s,e)=>{const t=Ii(e);s.slots.default=()=>t},ra=(s,e,t)=>{for(const n in e)(t||n!=="_")&&(s[n]=e[n])},Qc=(s,e,t)=>{const n=s.slots=Xo();if(s.vnode.shapeFlag&32){const i=e._;i?(ra(n,e,t),t&&wo(n,"_",i,!0)):sa(e,n)}else e&&ia(s,e)},Zc=(s,e,t)=>{const{vnode:n,slots:i}=s;let r=!0,o=ee;if(n.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:ra(i,e,t):(r=!e.$stable,sa(e,i)),o=e}else e&&(ia(s,e),o={default:1});if(r)for(const a in i)!na(a)&&o[a]==null&&delete i[a]},Pe=fu;function Xc(s){return Yc(s)}function Yc(s,e){const t=gs();t.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:p=ot,insertStaticContent:m}=s,w=(d,g,b,A=null,x=null,C=null,D=void 0,v=null,E=!!g.dynamicChildren)=>{if(d===g)return;d&&!ln(d,g)&&(A=he(d),ve(d,x,C,!0),d=null),g.patchFlag===-2&&(E=!1,g.dynamicChildren=null);const{type:S,ref:L,shapeFlag:T}=g;switch(S){case ws:k(d,g,b,A);break;case $t:F(d,g,b,A);break;case $s:d==null&&$(g,b,A,D);break;case Ve:jt(d,g,b,A,x,C,D,v,E);break;default:T&1?j(d,g,b,A,x,C,D,v,E):T&6?ke(d,g,b,A,x,C,D,v,E):(T&64||T&128)&&S.process(d,g,b,A,x,C,D,v,E,pe)}L!=null&&x&&ss(L,d&&d.ref,C,g||d,!g)},k=(d,g,b,A)=>{if(d==null)n(g.el=a(g.children),b,A);else{const x=g.el=d.el;g.children!==d.children&&c(x,g.children)}},F=(d,g,b,A)=>{d==null?n(g.el=l(g.children||""),b,A):g.el=d.el},$=(d,g,b,A)=>{[d.el,d.anchor]=m(d.children,g,b,A,d.el,d.anchor)},M=({el:d,anchor:g},b,A)=>{let x;for(;d&&d!==g;)x=h(d),n(d,b,A),d=x;n(g,b,A)},R=({el:d,anchor:g})=>{let b;for(;d&&d!==g;)b=h(d),i(d),d=b;i(g)},j=(d,g,b,A,x,C,D,v,E)=>{g.type==="svg"?D="svg":g.type==="math"&&(D="mathml"),d==null?re(g,b,A,x,C,D,v,E):qe(d,g,x,C,D,v,E)},re=(d,g,b,A,x,C,D,v)=>{let E,S;const{props:L,shapeFlag:T,transition:B,dirs:I}=d;if(E=d.el=o(d.type,C,L&&L.is,L),T&8?u(E,d.children):T&16&&ie(d.children,E,null,A,x,Bs(d,C),D,v),I&&vt(d,null,A,"created"),se(E,d,d.scopeId,D,A),L){for(const te in L)te!=="value"&&!gn(te)&&r(E,te,null,L[te],C,A);"value"in L&&r(E,"value",null,L.value,C),(S=L.onVnodeBeforeMount)&&Ye(S,A,d)}I&&vt(d,null,A,"beforeMount");const H=eu(x,B);H&&B.beforeEnter(E),n(E,g,b),((S=L&&L.onVnodeMounted)||H||I)&&Pe(()=>{S&&Ye(S,A,d),H&&B.enter(E),I&&vt(d,null,A,"mounted")},x)},se=(d,g,b,A,x)=>{if(b&&p(d,b),A)for(let C=0;C<A.length;C++)p(d,A[C]);if(x){let C=x.subTree;if(g===C||fa(C.type)&&(C.ssContent===g||C.ssFallback===g)){const D=x.vnode;se(d,D,D.scopeId,D.slotScopeIds,x.parent)}}},ie=(d,g,b,A,x,C,D,v,E=0)=>{for(let S=E;S<d.length;S++){const L=d[S]=v?yt(d[S]):st(d[S]);w(null,L,g,b,A,x,C,D,v)}},qe=(d,g,b,A,x,C,D)=>{const v=g.el=d.el;let{patchFlag:E,dynamicChildren:S,dirs:L}=g;E|=d.patchFlag&16;const T=d.props||ee,B=g.props||ee;let I;if(b&&Dt(b,!1),(I=B.onVnodeBeforeUpdate)&&Ye(I,b,g,d),L&&vt(g,d,b,"beforeUpdate"),b&&Dt(b,!0),(T.innerHTML&&B.innerHTML==null||T.textContent&&B.textContent==null)&&u(v,""),S?Ge(d.dynamicChildren,S,v,b,A,Bs(g,x),C):D||W(d,g,v,null,b,A,Bs(g,x),C,!1),E>0){if(E&16)St(v,T,B,b,x);else if(E&2&&T.class!==B.class&&r(v,"class",null,B.class,x),E&4&&r(v,"style",T.style,B.style,x),E&8){const H=g.dynamicProps;for(let te=0;te<H.length;te++){const X=H[te],Re=T[X],De=B[X];(De!==Re||X==="value")&&r(v,X,Re,De,x,b)}}E&1&&d.children!==g.children&&u(v,g.children)}else!D&&S==null&&St(v,T,B,b,x);((I=B.onVnodeUpdated)||L)&&Pe(()=>{I&&Ye(I,b,g,d),L&&vt(g,d,b,"updated")},A)},Ge=(d,g,b,A,x,C,D)=>{for(let v=0;v<g.length;v++){const E=d[v],S=g[v],L=E.el&&(E.type===Ve||!ln(E,S)||E.shapeFlag&70)?f(E.el):b;w(E,S,L,null,A,x,C,D,!0)}},St=(d,g,b,A,x)=>{if(g!==b){if(g!==ee)for(const C in g)!gn(C)&&!(C in b)&&r(d,C,g[C],null,x,A);for(const C in b){if(gn(C))continue;const D=b[C],v=g[C];D!==v&&C!=="value"&&r(d,C,v,D,x,A)}"value"in b&&r(d,"value",g.value,b.value,x)}},jt=(d,g,b,A,x,C,D,v,E)=>{const S=g.el=d?d.el:a(""),L=g.anchor=d?d.anchor:a("");let{patchFlag:T,dynamicChildren:B,slotScopeIds:I}=g;I&&(v=v?v.concat(I):I),d==null?(n(S,b,A),n(L,b,A),ie(g.children||[],b,L,x,C,D,v,E)):T>0&&T&64&&B&&d.dynamicChildren?(Ge(d.dynamicChildren,B,b,x,C,D,v),(g.key!=null||x&&g===x.subTree)&&oa(d,g,!0)):W(d,g,b,L,x,C,D,v,E)},ke=(d,g,b,A,x,C,D,v,E)=>{g.slotScopeIds=v,d==null?g.shapeFlag&512?x.ctx.activate(g,b,A,D,E):Et(g,b,A,x,C,D,E):zt(d,g,E)},Et=(d,g,b,A,x,C,D)=>{const v=d.component=wu(d,A,x);if(Wo(d)&&(v.ctx.renderer=pe),xu(v,!1,D),v.asyncDep){if(x&&x.registerDep(v,ae,D),!d.el){const E=v.subTree=at($t);F(null,E,g,b)}}else ae(v,d,g,b,x,C,D)},zt=(d,g,b)=>{const A=g.component=d.component;if(cu(d,g,b))if(A.asyncDep&&!A.asyncResolved){J(A,g,b);return}else A.next=g,A.update();else g.el=d.el,A.vnode=g},ae=(d,g,b,A,x,C,D)=>{const v=()=>{if(d.isMounted){let{next:T,bu:B,u:I,parent:H,vnode:te}=d;{const Ze=aa(d);if(Ze){T&&(T.el=te.el,J(d,T,D)),Ze.asyncDep.then(()=>{d.isUnmounted||v()});return}}let X=T,Re;Dt(d,!1),T?(T.el=te.el,J(d,T,D)):T=te,B&&Hn(B),(Re=T.props&&T.props.onVnodeBeforeUpdate)&&Ye(Re,H,T,te),Dt(d,!0);const De=yr(d),Qe=d.subTree;d.subTree=De,w(Qe,De,f(Qe.el),he(Qe),d,x,C),T.el=De.el,X===null&&uu(d,De.el),I&&Pe(I,x),(Re=T.props&&T.props.onVnodeUpdated)&&Pe(()=>Ye(Re,H,T,te),x)}else{let T;const{el:B,props:I}=g,{bm:H,m:te,parent:X,root:Re,type:De}=d,Qe=yn(g);Dt(d,!1),H&&Hn(H),!Qe&&(T=I&&I.onVnodeBeforeMount)&&Ye(T,X,g),Dt(d,!0);{Re.ce&&Re.ce._injectChildStyle(De);const Ze=d.subTree=yr(d);w(null,Ze,b,A,d,x,C),g.el=Ze.el}if(te&&Pe(te,x),!Qe&&(T=I&&I.onVnodeMounted)){const Ze=g;Pe(()=>Ye(T,X,Ze),x)}(g.shapeFlag&256||X&&yn(X.vnode)&&X.vnode.shapeFlag&256)&&d.a&&Pe(d.a,x),d.isMounted=!0,g=b=A=null}};d.scope.on();const E=d.effect=new Co(v);d.scope.off();const S=d.update=E.run.bind(E),L=d.job=E.runIfDirty.bind(E);L.i=d,L.id=d.uid,E.scheduler=()=>$i(L),Dt(d,!0),S()},J=(d,g,b)=>{g.component=d;const A=d.vnode.props;d.vnode=g,d.next=null,Jc(d,g.props,A,b),Zc(d,g.children,b),At(),ur(d),Ct()},W=(d,g,b,A,x,C,D,v,E=!1)=>{const S=d&&d.children,L=d?d.shapeFlag:0,T=g.children,{patchFlag:B,shapeFlag:I}=g;if(B>0){if(B&128){Ut(S,T,b,A,x,C,D,v,E);return}else if(B&256){ct(S,T,b,A,x,C,D,v,E);return}}I&8?(L&16&&P(S,x,C),T!==S&&u(b,T)):L&16?I&16?Ut(S,T,b,A,x,C,D,v,E):P(S,x,C,!0):(L&8&&u(b,""),I&16&&ie(T,b,A,x,C,D,v,E))},ct=(d,g,b,A,x,C,D,v,E)=>{d=d||Gt,g=g||Gt;const S=d.length,L=g.length,T=Math.min(S,L);let B;for(B=0;B<T;B++){const I=g[B]=E?yt(g[B]):st(g[B]);w(d[B],I,b,null,x,C,D,v,E)}S>L?P(d,x,C,!0,!1,T):ie(g,b,A,x,C,D,v,E,T)},Ut=(d,g,b,A,x,C,D,v,E)=>{let S=0;const L=g.length;let T=d.length-1,B=L-1;for(;S<=T&&S<=B;){const I=d[S],H=g[S]=E?yt(g[S]):st(g[S]);if(ln(I,H))w(I,H,b,null,x,C,D,v,E);else break;S++}for(;S<=T&&S<=B;){const I=d[T],H=g[B]=E?yt(g[B]):st(g[B]);if(ln(I,H))w(I,H,b,null,x,C,D,v,E);else break;T--,B--}if(S>T){if(S<=B){const I=B+1,H=I<L?g[I].el:A;for(;S<=B;)w(null,g[S]=E?yt(g[S]):st(g[S]),b,H,x,C,D,v,E),S++}}else if(S>B)for(;S<=T;)ve(d[S],x,C,!0),S++;else{const I=S,H=S,te=new Map;for(S=H;S<=B;S++){const Oe=g[S]=E?yt(g[S]):st(g[S]);Oe.key!=null&&te.set(Oe.key,S)}let X,Re=0;const De=B-H+1;let Qe=!1,Ze=0;const on=new Array(De);for(S=0;S<De;S++)on[S]=0;for(S=I;S<=T;S++){const Oe=d[S];if(Re>=De){ve(Oe,x,C,!0);continue}let Xe;if(Oe.key!=null)Xe=te.get(Oe.key);else for(X=H;X<=B;X++)if(on[X-H]===0&&ln(Oe,g[X])){Xe=X;break}Xe===void 0?ve(Oe,x,C,!0):(on[Xe-H]=S+1,Xe>=Ze?Ze=Xe:Qe=!0,w(Oe,g[Xe],b,null,x,C,D,v,E),Re++)}const sr=Qe?tu(on):Gt;for(X=sr.length-1,S=De-1;S>=0;S--){const Oe=H+S,Xe=g[Oe],ir=Oe+1<L?g[Oe+1].el:A;on[S]===0?w(null,Xe,b,ir,x,C,D,v,E):Qe&&(X<0||S!==sr[X]?ut(Xe,b,ir,2):X--)}}},ut=(d,g,b,A,x=null)=>{const{el:C,type:D,transition:v,children:E,shapeFlag:S}=d;if(S&6){ut(d.component.subTree,g,b,A);return}if(S&128){d.suspense.move(g,b,A);return}if(S&64){D.move(d,g,b,pe);return}if(D===Ve){n(C,g,b);for(let T=0;T<E.length;T++)ut(E[T],g,b,A);n(d.anchor,g,b);return}if(D===$s){M(d,g,b);return}if(A!==2&&S&1&&v)if(A===0)v.beforeEnter(C),n(C,g,b),Pe(()=>v.enter(C),x);else{const{leave:T,delayLeave:B,afterLeave:I}=v,H=()=>n(C,g,b),te=()=>{T(C,()=>{H(),I&&I()})};B?B(C,H,te):te()}else n(C,g,b)},ve=(d,g,b,A=!1,x=!1)=>{const{type:C,props:D,ref:v,children:E,dynamicChildren:S,shapeFlag:L,patchFlag:T,dirs:B,cacheIndex:I}=d;if(T===-2&&(x=!1),v!=null&&ss(v,null,b,d,!0),I!=null&&(g.renderCache[I]=void 0),L&256){g.ctx.deactivate(d);return}const H=L&1&&B,te=!yn(d);let X;if(te&&(X=D&&D.onVnodeBeforeUnmount)&&Ye(X,g,d),L&6)K(d.component,b,A);else{if(L&128){d.suspense.unmount(b,A);return}H&&vt(d,null,g,"beforeUnmount"),L&64?d.type.remove(d,g,b,pe,A):S&&!S.hasOnce&&(C!==Ve||T>0&&T&64)?P(S,g,b,!1,!0):(C===Ve&&T&384||!x&&L&16)&&P(E,g,b),A&&Pn(d)}(te&&(X=D&&D.onVnodeUnmounted)||H)&&Pe(()=>{X&&Ye(X,g,d),H&&vt(d,null,g,"unmounted")},b)},Pn=d=>{const{type:g,el:b,anchor:A,transition:x}=d;if(g===Ve){Bn(b,A);return}if(g===$s){R(d);return}const C=()=>{i(b),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(d.shapeFlag&1&&x&&!x.persisted){const{leave:D,delayLeave:v}=x,E=()=>D(b,C);v?v(d.el,C,E):E()}else C()},Bn=(d,g)=>{let b;for(;d!==g;)b=h(d),i(d),d=b;i(g)},K=(d,g,b)=>{const{bum:A,scope:x,job:C,subTree:D,um:v,m:E,a:S}=d;mr(E),mr(S),A&&Hn(A),x.stop(),C&&(C.flags|=8,ve(D,d,g,b)),v&&Pe(v,g),Pe(()=>{d.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},P=(d,g,b,A=!1,x=!1,C=0)=>{for(let D=C;D<d.length;D++)ve(d[D],g,b,A,x)},he=d=>{if(d.shapeFlag&6)return he(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const g=h(d.anchor||d.el),b=g&&g[Ac];return b?h(b):g};let je=!1;const le=(d,g,b)=>{d==null?g._vnode&&ve(g._vnode,null,null,!0):w(g._vnode||null,d,g,null,null,null,b),g._vnode=d,je||(je=!0,ur(),zo(),je=!1)},pe={p:w,um:ve,m:ut,r:Pn,mt:Et,mc:ie,pc:W,pbc:Ge,n:he,o:s};return{render:le,hydrate:void 0,createApp:Hc(le)}}function Bs({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Dt({effect:s,job:e},t){t?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function eu(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function oa(s,e,t=!1){const n=s.children,i=e.children;if(z(n)&&z(i))for(let r=0;r<n.length;r++){const o=n[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=yt(i[r]),a.el=o.el),!t&&a.patchFlag!==-2&&oa(o,a)),a.type===ws&&(a.el=o.el)}}function tu(s){const e=s.slice(),t=[0];let n,i,r,o,a;const l=s.length;for(n=0;n<l;n++){const c=s[n];if(c!==0){if(i=t[t.length-1],s[i]<c){e[n]=i,t.push(n);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,s[t[a]]<c?r=a+1:o=a;c<s[t[r]]&&(r>0&&(e[n]=t[r-1]),t[r]=n)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function aa(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:aa(e)}function mr(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}const nu=Symbol.for("v-scx"),su=()=>Vn(nu);function en(s,e,t){return la(s,e,t)}function la(s,e,t=ee){const{immediate:n,deep:i,flush:r,once:o}=t,a=xe({},t),l=e&&n||!e&&r!=="post";let c;if(Dn){if(r==="sync"){const p=su();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=ot,p.resume=ot,p.pause=ot,p}}const u=Ee;a.call=(p,m,w)=>lt(p,u,m,w);let f=!1;r==="post"?a.scheduler=p=>{Pe(p,u&&u.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(p,m)=>{m?p():$i(p)}),a.augmentJob=p=>{e&&(p.flags|=4),f&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=mc(s,e,a);return Dn&&(c?c.push(h):l&&h()),h}function iu(s,e,t){const n=this.proxy,i=ue(s)?s.includes(".")?ca(n,s):()=>n[s]:s.bind(n,n);let r;q(e)?r=e:(r=e.handler,t=e);const o=Fn(this),a=la(i,r.bind(n),t);return o(),a}function ca(s,e){const t=e.split(".");return()=>{let n=s;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}const ru=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${wt(e)}Modifiers`]||s[`${kt(e)}Modifiers`];function ou(s,e,...t){if(s.isUnmounted)return;const n=s.vnode.props||ee;let i=t;const r=e.startsWith("update:"),o=r&&ru(n,e.slice(7));o&&(o.trim&&(i=t.map(u=>ue(u)?u.trim():u)),o.number&&(i=t.map(Ks)));let a,l=n[a=_s(e)]||n[a=_s(wt(e))];!l&&r&&(l=n[a=_s(kt(e))]),l&&lt(l,s,6,i);const c=n[a+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,lt(c,s,6,i)}}function ua(s,e,t=!1){const n=e.emitsCache,i=n.get(s);if(i!==void 0)return i;const r=s.emits;let o={},a=!1;if(!q(s)){const l=c=>{const u=ua(c,e,!0);u&&(a=!0,xe(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!r&&!a?(oe(s)&&n.set(s,null),null):(z(r)?r.forEach(l=>o[l]=null):xe(o,r),oe(s)&&n.set(s,o),o)}function bs(s,e){return!s||!fs(e)?!1:(e=e.slice(2).replace(/Once$/,""),Q(s,e[0].toLowerCase()+e.slice(1))||Q(s,kt(e))||Q(s,e))}function yr(s){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:h,setupState:p,ctx:m,inheritAttrs:w}=s,k=ns(s);let F,$;try{if(t.shapeFlag&4){const R=i||n,j=R;F=st(c.call(j,R,u,f,p,h,m)),$=a}else{const R=e;F=st(R.length>1?R(f,{attrs:a,slots:o,emit:l}):R(f,null)),$=e.props?a:au(a)}}catch(R){wn.length=0,ms(R,s,1),F=at($t)}let M=F;if($&&w!==!1){const R=Object.keys($),{shapeFlag:j}=M;R.length&&j&7&&(r&&R.some(Ci)&&($=lu($,r)),M=nn(M,$,!1,!0))}return t.dirs&&(M=nn(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(t.dirs):t.dirs),t.transition&&Ni(M,t.transition),F=M,ns(k),F}const au=s=>{let e;for(const t in s)(t==="class"||t==="style"||fs(t))&&((e||(e={}))[t]=s[t]);return e},lu=(s,e)=>{const t={};for(const n in s)(!Ci(n)||!(n.slice(9)in e))&&(t[n]=s[n]);return t};function cu(s,e,t){const{props:n,children:i,component:r}=s,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?br(n,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==n[h]&&!bs(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?br(n,o,c):!0:!!o;return!1}function br(s,e,t){const n=Object.keys(e);if(n.length!==Object.keys(s).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==s[r]&&!bs(t,r))return!0}return!1}function uu({vnode:s,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=e.vnode).el=t,e=e.parent;else break}}const fa=s=>s.__isSuspense;function fu(s,e){e&&e.pendingBranch?z(s)?e.effects.push(...s):e.effects.push(s):wc(s)}const Ve=Symbol.for("v-fgt"),ws=Symbol.for("v-txt"),$t=Symbol.for("v-cmt"),$s=Symbol.for("v-stc"),wn=[];let Le=null;function Be(s=!1){wn.push(Le=s?null:[])}function hu(){wn.pop(),Le=wn[wn.length-1]||null}let vn=1;function wr(s,e=!1){vn+=s,s<0&&Le&&e&&(Le.hasOnce=!0)}function ha(s){return s.dynamicChildren=vn>0?Le||Gt:null,hu(),vn>0&&Le&&Le.push(s),s}function We(s,e,t,n,i,r){return ha(V(s,e,t,n,i,r,!0))}function da(s,e,t,n,i){return ha(at(s,e,t,n,i,!0))}function ga(s){return s?s.__v_isVNode===!0:!1}function ln(s,e){return s.type===e.type&&s.key===e.key}const pa=({key:s})=>s??null,Jn=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?ue(s)||we(s)||q(s)?{i:ze,r:s,k:e,f:!!t}:s:null);function V(s,e=null,t=null,n=0,i=null,r=s===Ve?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&pa(e),ref:e&&Jn(e),scopeId:qo,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ze};return a?(ji(l,t),r&128&&s.normalize(l)):t&&(l.shapeFlag|=ue(t)?8:16),vn>0&&!o&&Le&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Le.push(l),l}const at=du;function du(s,e=null,t=null,n=0,i=null,r=!1){if((!s||s===$c)&&(s=$t),ga(s)){const a=nn(s,e,!0);return t&&ji(a,t),vn>0&&!r&&Le&&(a.shapeFlag&6?Le[Le.indexOf(s)]=a:Le.push(a)),a.patchFlag=-2,a}if(Su(s)&&(s=s.__vccOpts),e){e=gu(e);let{class:a,style:l}=e;a&&!ue(a)&&(e.class=tn(a)),oe(l)&&(Bi(l)&&!z(l)&&(l=xe({},l)),e.style=vi(l))}const o=ue(s)?1:fa(s)?128:Cc(s)?64:oe(s)?4:q(s)?2:0;return V(s,e,t,n,i,o,r,!0)}function gu(s){return s?Bi(s)||Yo(s)?xe({},s):s:null}function nn(s,e,t=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=s,c=e?mu(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&pa(c),ref:e&&e.ref?t&&r?z(r)?r.concat(Jn(e)):[r,Jn(e)]:Jn(e):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==Ve?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&nn(s.ssContent),ssFallback:s.ssFallback&&nn(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&n&&Ni(u,l.clone(u)),u}function pu(s=" ",e=0){return at(ws,null,s,e)}function cn(s="",e=!1){return e?(Be(),da($t,null,s)):at($t,null,s)}function st(s){return s==null||typeof s=="boolean"?at($t):z(s)?at(Ve,null,s.slice()):ga(s)?yt(s):at(ws,null,String(s))}function yt(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:nn(s)}function ji(s,e){let t=0;const{shapeFlag:n}=s;if(e==null)e=null;else if(z(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),ji(s,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!Yo(e)?e._ctx=ze:i===3&&ze&&(ze.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else q(e)?(e={default:e,_ctx:ze},t=32):(e=String(e),n&64?(t=16,e=[pu(e)]):t=8);s.children=e,s.shapeFlag|=t}function mu(...s){const e={};for(let t=0;t<s.length;t++){const n=s[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=tn([e.class,n.class]));else if(i==="style")e.style=vi([e.style,n.style]);else if(fs(i)){const r=e[i],o=n[i];o&&r!==o&&!(z(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=n[i])}return e}function Ye(s,e,t,n=null){lt(s,e,7,[t,n])}const yu=Qo();let bu=0;function wu(s,e,t){const n=s.type,i=(e?e.appContext:s.appContext)||yu,r={uid:bu++,vnode:s,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ul(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ta(n,i),emitsOptions:ua(n,i),emit:null,emitted:null,propsDefaults:ee,inheritAttrs:n.inheritAttrs,ctx:ee,data:ee,props:ee,attrs:ee,slots:ee,refs:ee,setupState:ee,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=ou.bind(null,r),s.ce&&s.ce(r),r}let Ee=null,rs,ri;{const s=gs(),e=(t,n)=>{let i;return(i=s[t])||(i=s[t]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};rs=e("__VUE_INSTANCE_SETTERS__",t=>Ee=t),ri=e("__VUE_SSR_SETTERS__",t=>Dn=t)}const Fn=s=>{const e=Ee;return rs(s),s.scope.on(),()=>{s.scope.off(),rs(e)}},xr=()=>{Ee&&Ee.scope.off(),rs(null)};function ma(s){return s.vnode.shapeFlag&4}let Dn=!1;function xu(s,e=!1,t=!1){e&&ri(e);const{props:n,children:i}=s.vnode,r=ma(s);Vc(s,n,r,e),Qc(s,i,t);const o=r?ku(s,e):void 0;return e&&ri(!1),o}function ku(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Lc);const{setup:n}=t;if(n){At();const i=s.setupContext=n.length>1?Cu(s):null,r=Fn(s),o=Tn(n,s,0,[s.props,i]),a=po(o);if(Ct(),r(),(a||s.sp)&&!yn(s)&&Ho(s),a){if(o.then(xr,xr),e)return o.then(l=>{kr(s,l)}).catch(l=>{ms(l,s,0)});s.asyncDep=o}else kr(s,o)}else ya(s)}function kr(s,e,t){q(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:oe(e)&&(s.setupState=Mo(e)),ya(s)}function ya(s,e,t){const n=s.type;s.render||(s.render=n.render||ot);{const i=Fn(s);At();try{Mc(s)}finally{Ct(),i()}}}const Au={get(s,e){return me(s,"get",""),s[e]}};function Cu(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,Au),slots:s.slots,emit:s.emit,expose:e}}function xs(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(Mo(cc(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in bn)return bn[t](s)},has(e,t){return t in e||t in bn}})):s.proxy}function Su(s){return q(s)&&"__vccOpts"in s}const zi=(s,e)=>gc(s,e,Dn),Eu="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let oi;const Ar=typeof window<"u"&&window.trustedTypes;if(Ar)try{oi=Ar.createPolicy("vue",{createHTML:s=>s})}catch{}const ba=oi?s=>oi.createHTML(s):s=>s,vu="http://www.w3.org/2000/svg",Du="http://www.w3.org/1998/Math/MathML",ht=typeof document<"u"?document:null,Cr=ht&&ht.createElement("template"),_u={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,n)=>{const i=e==="svg"?ht.createElementNS(vu,s):e==="mathml"?ht.createElementNS(Du,s):t?ht.createElement(s,{is:t}):ht.createElement(s);return s==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:s=>ht.createTextNode(s),createComment:s=>ht.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>ht.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,n,i,r){const o=t?t.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{Cr.innerHTML=ba(n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s);const a=Cr.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Tu=Symbol("_vtc");function Fu(s,e,t){const n=s[Tu];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const Sr=Symbol("_vod"),Ru=Symbol("_vsh"),Ou=Symbol(""),Pu=/(^|;)\s*display\s*:/;function Bu(s,e,t){const n=s.style,i=ue(t);let r=!1;if(t&&!i){if(e)if(ue(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Kn(n,a,"")}else for(const o in e)t[o]==null&&Kn(n,o,"");for(const o in t)o==="display"&&(r=!0),Kn(n,o,t[o])}else if(i){if(e!==t){const o=n[Ou];o&&(t+=";"+o),n.cssText=t,r=Pu.test(t)}}else e&&s.removeAttribute("style");Sr in s&&(s[Sr]=r?n.display:"",s[Ru]&&(n.display="none"))}const Er=/\s*!important$/;function Kn(s,e,t){if(z(t))t.forEach(n=>Kn(s,e,n));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const n=$u(s,e);Er.test(t)?s.setProperty(kt(n),t.replace(Er,""),"important"):s[n]=t}}const vr=["Webkit","Moz","ms"],Ns={};function $u(s,e){const t=Ns[e];if(t)return t;let n=wt(e);if(n!=="filter"&&n in s)return Ns[e]=n;n=bo(n);for(let i=0;i<vr.length;i++){const r=vr[i]+n;if(r in s)return Ns[e]=r}return e}const Dr="http://www.w3.org/1999/xlink";function _r(s,e,t,n,i,r=zl(e)){n&&e.startsWith("xlink:")?t==null?s.removeAttributeNS(Dr,e.slice(6,e.length)):s.setAttributeNS(Dr,e,t):t==null||r&&!xo(t)?s.removeAttribute(e):s.setAttribute(e,r?"":xt(t)?String(t):t)}function Tr(s,e,t,n,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(s[e]=e==="innerHTML"?ba(t):t);return}const r=s.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?s.getAttribute("value")||"":s.value,l=t==null?s.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in s))&&(s.value=l),t==null&&s.removeAttribute(e),s._value=t;return}let o=!1;if(t===""||t==null){const a=typeof s[e];a==="boolean"?t=xo(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{s[e]=t}catch{}o&&s.removeAttribute(i||e)}function Kt(s,e,t,n){s.addEventListener(e,t,n)}function Nu(s,e,t,n){s.removeEventListener(e,t,n)}const Fr=Symbol("_vei");function Lu(s,e,t,n,i=null){const r=s[Fr]||(s[Fr]={}),o=r[e];if(n&&o)o.value=n;else{const[a,l]=Mu(e);if(n){const c=r[e]=zu(n,i);Kt(s,a,c,l)}else o&&(Nu(s,a,o,l),r[e]=void 0)}}const Rr=/(?:Once|Passive|Capture)$/;function Mu(s){let e;if(Rr.test(s)){e={};let n;for(;n=s.match(Rr);)s=s.slice(0,s.length-n[0].length),e[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):kt(s.slice(2)),e]}let Ls=0;const Iu=Promise.resolve(),ju=()=>Ls||(Iu.then(()=>Ls=0),Ls=Date.now());function zu(s,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;lt(Uu(n,t.value),e,5,[n])};return t.value=s,t.attached=ju(),t}function Uu(s,e){if(z(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const Or=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,qu=(s,e,t,n,i,r)=>{const o=i==="svg";e==="class"?Fu(s,n,o):e==="style"?Bu(s,t,n):fs(e)?Ci(e)||Lu(s,e,t,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Hu(s,e,n,o))?(Tr(s,e,n),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&_r(s,e,n,o,r,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!ue(n))?Tr(s,wt(e),n,r,e):(e==="true-value"?s._trueValue=n:e==="false-value"&&(s._falseValue=n),_r(s,e,n,o))};function Hu(s,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in s&&Or(e)&&q(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=s.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Or(e)&&ue(t)?!1:e in s}const Pr=s=>{const e=s.props["onUpdate:modelValue"]||!1;return z(e)?t=>Hn(e,t):e};function Wu(s){s.target.composing=!0}function Br(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ms=Symbol("_assign"),Vu={created(s,{modifiers:{lazy:e,trim:t,number:n}},i){s[Ms]=Pr(i);const r=n||i.props&&i.props.type==="number";Kt(s,e?"change":"input",o=>{if(o.target.composing)return;let a=s.value;t&&(a=a.trim()),r&&(a=Ks(a)),s[Ms](a)}),t&&Kt(s,"change",()=>{s.value=s.value.trim()}),e||(Kt(s,"compositionstart",Wu),Kt(s,"compositionend",Br),Kt(s,"change",Br))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,oldValue:t,modifiers:{lazy:n,trim:i,number:r}},o){if(s[Ms]=Pr(o),s.composing)return;const a=(r||s.type==="number")&&!/^0\d/.test(s.value)?Ks(s.value):s.value,l=e??"";a!==l&&(document.activeElement===s&&s.type!=="range"&&(n&&e===t||i&&s.value.trim()===l)||(s.value=l))}},Ju={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ku=(s,e)=>{const t=s._withKeys||(s._withKeys={}),n=e.join(".");return t[n]||(t[n]=i=>{if(!("key"in i))return;const r=kt(i.key);if(e.some(o=>o===r||Ju[o]===r))return s(i)})},Gu=xe({patchProp:qu},_u);let $r;function Qu(){return $r||($r=Xc(Gu))}const Zu=(...s)=>{const e=Qu().createApp(...s),{mount:t}=e;return e.mount=n=>{const i=Yu(n);if(!i)return;const r=e._component;!q(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,Xu(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Xu(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function Yu(s){return ue(s)?document.querySelector(s):s}const ef="modulepreload",tf=function(s){return"/"+s},Nr={},wa=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=tf(l),l in Nr)return;Nr[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":ef,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};function Ui(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let It=Ui();function xa(s){It=s}const ka=/[&<>"']/,nf=new RegExp(ka.source,"g"),Aa=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,sf=new RegExp(Aa.source,"g"),rf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lr=s=>rf[s];function Ne(s,e){if(e){if(ka.test(s))return s.replace(nf,Lr)}else if(Aa.test(s))return s.replace(sf,Lr);return s}const of=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function af(s){return s.replace(of,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const lf=/(^|[^\[])\^/g;function Z(s,e){s=typeof s=="string"?s:s.source,e=e||"";const t={replace:(n,i)=>(i=typeof i=="object"&&"source"in i?i.source:i,i=i.replace(lf,"$1"),s=s.replace(n,i),t),getRegex:()=>new RegExp(s,e)};return t}function Mr(s){try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const os={exec:()=>null};function Ir(s,e){const t=s.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),n=t.split(/ \|/);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function In(s,e,t){const n=s.length;if(n===0)return"";let i=0;for(;i<n&&(s.charAt(n-i-1)===e&&!t);)i++;return s.slice(0,n-i)}function cf(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return-1}function jr(s,e,t,n){const i=e.href,r=e.title?Ne(e.title):null,o=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:t,href:i,title:r,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:r,text:Ne(o)}}function uf(s,e){const t=s.match(/^(\s+)(?:```)/);if(t===null)return e;const n=t[1];return e.split(`
`).map(i=>{const r=i.match(/^\s+/);if(r===null)return i;const[o]=r;return o.length>=n.length?i.slice(n.length):i}).join(`
`)}class as{constructor(e){N(this,"options");N(this,"rules");N(this,"lexer");this.options=e||It}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:In(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],i=uf(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const i=In(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const n=In(t[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:r,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",c=!1;for(;e;){let u=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let f=t[2].split(`
`,1)[0].replace(/^\t+/,F=>" ".repeat(3*F.length)),h=e.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,l=f.trimStart()):(p=t[2].search(/[^ ]/),p=p>4?1:p,l=f.slice(p),p+=t[1].length);let m=!1;if(!f&&/^ *$/.test(h)&&(a+=h+`
`,e=e.substring(h.length+1),u=!0),!u){const F=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),$=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),M=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),R=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const j=e.split(`
`,1)[0];if(h=j,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),M.test(h)||R.test(h)||F.test(h)||$.test(e))break;if(h.search(/[^ ]/)>=p||!h.trim())l+=`
`+h.slice(p);else{if(m||f.search(/[^ ]/)>=4||M.test(f)||R.test(f)||$.test(f))break;l+=`
`+h}!m&&!h.trim()&&(m=!0),a+=j+`
`,e=e.substring(j.length+1),f=h.slice(p)}}r.loose||(c?r.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let w=null,k;this.options.gfm&&(w=/^\[[ xX]\] /.exec(l),w&&(k=w[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:a,task:!!w,checked:k,loose:!1,text:l,tokens:[]}),r.raw+=a}r.items[r.items.length-1].raw=a.trimEnd(),r.items[r.items.length-1].text=l.trimEnd(),r.raw=r.raw.trimEnd();for(let u=0;u<r.items.length;u++)if(this.lexer.state.top=!1,r.items[u].tokens=this.lexer.blockTokens(r.items[u].text,[]),!r.loose){const f=r.items[u].tokens.filter(p=>p.type==="space"),h=f.length>0&&f.some(p=>/\n.*\n/.test(p.raw));r.loose=h}if(r.loose)for(let u=0;u<r.items.length;u++)r.items[u].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const n={type:"table",raw:t[0],header:Ir(t[1]).map(i=>({text:i,tokens:[]})),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){let i=n.align.length,r,o,a,l;for(r=0;r<i;r++){const c=n.align[r];c&&(/^ *-+: *$/.test(c)?n.align[r]="right":/^ *:-+: *$/.test(c)?n.align[r]="center":/^ *:-+ *$/.test(c)?n.align[r]="left":n.align[r]=null)}for(i=n.rows.length,r=0;r<i;r++)n.rows[r]=Ir(n.rows[r],n.header.length).map(c=>({text:c,tokens:[]}));for(i=n.header.length,o=0;o<i;o++)n.header[o].tokens=this.lexer.inline(n.header[o].text);for(i=n.rows.length,o=0;o<i;o++)for(l=n.rows[o],a=0;a<l.length;a++)l[a].tokens=this.lexer.inline(l[a].text);return n}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ne(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const o=In(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{const o=cf(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],r=o[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),jr(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return jr(n,i,n[0],this.lexer)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const o=[...i[0]].length-1;let a,l,c=o,u=0;const f=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(f.lastIndex=0,t=t.slice(-1*e.length+o);(i=f.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const h=[...i[0]][0].length,p=e.slice(0,o+i.index+h+l);if(Math.min(o,l)%2){const w=p.slice(1,-1);return{type:"em",raw:p,text:w,tokens:this.lexer.inlineTokens(w)}}const m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=Ne(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=Ne(t[1]),i="mailto:"+n):(n=Ne(t[1]),i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,i;if(t[2]==="@")n=Ne(t[0]),i="mailto:"+n;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0];while(r!==t[0]);n=Ne(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return this.lexer.state.inRawBlock?n=t[0]:n=Ne(t[0]),{type:"text",raw:t[0],text:n}}}}const O={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:os,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};O._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;O._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;O.def=Z(O.def).replace("label",O._label).replace("title",O._title).getRegex();O.bullet=/(?:[*+-]|\d{1,9}[.)])/;O.listItemStart=Z(/^( *)(bull) */).replace("bull",O.bullet).getRegex();O.list=Z(O.list).replace(/bull/g,O.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+O.def.source+")").getRegex();O._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";O._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;O.html=Z(O.html,"i").replace("comment",O._comment).replace("tag",O._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();O.lheading=Z(O.lheading).replace(/bull/g,O.bullet).getRegex();O.paragraph=Z(O._paragraph).replace("hr",O.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",O._tag).getRegex();O.blockquote=Z(O.blockquote).replace("paragraph",O.paragraph).getRegex();O.normal={...O};O.gfm={...O.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};O.gfm.table=Z(O.gfm.table).replace("hr",O.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",O._tag).getRegex();O.gfm.paragraph=Z(O._paragraph).replace("hr",O.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",O.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",O._tag).getRegex();O.pedantic={...O.normal,html:Z(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",O._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:os,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Z(O.normal._paragraph).replace("hr",O.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",O.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const _={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:os,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:os,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};_._punctuation="\\p{P}$+<=>`^|~";_.punctuation=Z(_.punctuation,"u").replace(/punctuation/g,_._punctuation).getRegex();_.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;_.anyPunctuation=/\\[punct]/g;_._escapes=/\\([punct])/g;_._comment=Z(O._comment).replace("(?:-->|$)","-->").getRegex();_.emStrong.lDelim=Z(_.emStrong.lDelim,"u").replace(/punct/g,_._punctuation).getRegex();_.emStrong.rDelimAst=Z(_.emStrong.rDelimAst,"gu").replace(/punct/g,_._punctuation).getRegex();_.emStrong.rDelimUnd=Z(_.emStrong.rDelimUnd,"gu").replace(/punct/g,_._punctuation).getRegex();_.anyPunctuation=Z(_.anyPunctuation,"gu").replace(/punct/g,_._punctuation).getRegex();_._escapes=Z(_._escapes,"gu").replace(/punct/g,_._punctuation).getRegex();_._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;_._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;_.autolink=Z(_.autolink).replace("scheme",_._scheme).replace("email",_._email).getRegex();_._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;_.tag=Z(_.tag).replace("comment",_._comment).replace("attribute",_._attribute).getRegex();_._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;_._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;_._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;_.link=Z(_.link).replace("label",_._label).replace("href",_._href).replace("title",_._title).getRegex();_.reflink=Z(_.reflink).replace("label",_._label).replace("ref",O._label).getRegex();_.nolink=Z(_.nolink).replace("ref",O._label).getRegex();_.reflinkSearch=Z(_.reflinkSearch,"g").replace("reflink",_.reflink).replace("nolink",_.nolink).getRegex();_.normal={..._};_.pedantic={..._.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Z(/^!?\[(label)\]\((.*?)\)/).replace("label",_._label).getRegex(),reflink:Z(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_._label).getRegex()};_.gfm={..._.normal,escape:Z(_.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};_.gfm.url=Z(_.gfm.url,"i").replace("email",_.gfm._extended_email).getRegex();_.breaks={..._.gfm,br:Z(_.br).replace("{2,}","*").getRegex(),text:Z(_.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class it{constructor(e){N(this,"tokens");N(this,"options");N(this,"state");N(this,"tokenizer");N(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||It,this.options.tokenizer=this.options.tokenizer||new as,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:O.normal,inline:_.normal};this.options.pedantic?(t.block=O.pedantic,t.inline=_.pedantic):this.options.gfm&&(t.block=O.gfm,this.options.breaks?t.inline=_.breaks:t.inline=_.gfm),this.tokenizer.rules=t}static get rules(){return{block:O,inline:_}}static lex(e,t){return new it(t).lex(e)}static lexInline(e,t){return new it(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let n,i,r,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(n=a.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(r=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(r))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),o=r.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,i,r,o=e,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(n=u.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,o,c)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}if(r=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const f=e.slice(1);let h;this.options.extensions.startInline.forEach(p=>{h=p.call({lexer:this},f),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(r=e.substring(0,u+1))}if(n=this.tokenizer.inlineText(r)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(c=n.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class ls{constructor(e){N(this,"options");this.options=e||It}code(e,t,n){var r;const i=(r=(t||"").match(/^\S*/))==null?void 0:r[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Ne(i)+'">'+(n?e:Ne(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:Ne(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,n){const i=t?"ol":"ul",r=t&&n!==1?' start="'+n+'"':"";return"<"+i+r+`>
`+e+"</"+i+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){const i=Mr(e);if(i===null)return n;e=i;let r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){const i=Mr(e);if(i===null)return n;e=i;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${t}"`),r+=">",r}text(e){return e}}class qi{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class rt{constructor(e){N(this,"options");N(this,"renderer");N(this,"textRenderer");this.options=e||It,this.options.renderer=this.options.renderer||new ls,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new qi}static parse(e,t){return new rt(t).parse(e)}static parseInline(e,t){return new rt(t).parseInline(e)}parse(e,t=!0){let n="";for(let i=0;i<e.length;i++){const r=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const o=r,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){n+=a||"";continue}}switch(r.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const o=r;n+=this.renderer.heading(this.parseInline(o.tokens),o.depth,af(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=r;n+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=r;let a="",l="";for(let u=0;u<o.header.length;u++)l+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(l);let c="";for(let u=0;u<o.rows.length;u++){const f=o.rows[u];l="";for(let h=0;h<f.length;h++)l+=this.renderer.tablecell(this.parseInline(f[h].tokens),{header:!1,align:o.align[h]});c+=this.renderer.tablerow(l)}n+=this.renderer.table(a,c);continue}case"blockquote":{const o=r,a=this.parse(o.tokens);n+=this.renderer.blockquote(a);continue}case"list":{const o=r,a=o.ordered,l=o.start,c=o.loose;let u="";for(let f=0;f<o.items.length;f++){const h=o.items[f],p=h.checked,m=h.task;let w="";if(h.task){const k=this.renderer.checkbox(!!p);c?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=k+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=k+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:k+" "}):w+=k+" "}w+=this.parse(h.tokens,c),u+=this.renderer.listitem(w,m,!!p)}n+=this.renderer.list(u,a,l);continue}case"html":{const o=r;n+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=r;n+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=r,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);n+=t?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let i=0;i<e.length;i++){const r=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const o=this.options.extensions.renderers[r.type].call({parser:this},r);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=o||"";continue}}switch(r.type){case"escape":{const o=r;n+=t.text(o.text);break}case"html":{const o=r;n+=t.html(o.text);break}case"link":{const o=r;n+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=r;n+=t.image(o.href,o.title,o.text);break}case"strong":{const o=r;n+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=r;n+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=r;n+=t.codespan(o.text);break}case"br":{n+=t.br();break}case"del":{const o=r;n+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=r;n+=t.text(o.text);break}default:{const o='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}}class xn{constructor(e){N(this,"options");this.options=e||It}preprocess(e){return e}postprocess(e){return e}}N(xn,"passThroughHooks",new Set(["preprocess","postprocess"]));var Mt,ai,Ca;class ff{constructor(...e){or(this,Mt);N(this,"defaults",Ui());N(this,"options",this.setOptions);N(this,"parse",$n(this,Mt,ai).call(this,it.lex,rt.parse));N(this,"parseInline",$n(this,Mt,ai).call(this,it.lexInline,rt.parseInline));N(this,"Parser",rt);N(this,"Renderer",ls);N(this,"TextRenderer",qi);N(this,"Lexer",it);N(this,"Tokenizer",as);N(this,"Hooks",xn);this.use(...e)}walkTokens(e,t){var i,r;let n=[];for(const o of e)switch(n=n.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)n=n.concat(this.walkTokens(l.tokens,t));for(const l of a.rows)for(const c of l)n=n.concat(this.walkTokens(c.tokens,t));break}case"list":{const a=o;n=n.concat(this.walkTokens(a.items,t));break}default:{const a=o;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{n=n.concat(this.walkTokens(a[l],t))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const o=t.renderers[r.name];o?t.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[r.level];o?o.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),i.extensions=t),n.renderer){const r=this.defaults.renderer||new ls(this.defaults);for(const o in n.renderer){const a=n.renderer[o],l=o,c=r[l];r[l]=(...u)=>{let f=a.apply(r,u);return f===!1&&(f=c.apply(r,u)),f||""}}i.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new as(this.defaults);for(const o in n.tokenizer){const a=n.tokenizer[o],l=o,c=r[l];r[l]=(...u)=>{let f=a.apply(r,u);return f===!1&&(f=c.apply(r,u)),f}}i.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new xn;for(const o in n.hooks){const a=n.hooks[o],l=o,c=r[l];xn.passThroughHooks.has(o)?r[l]=u=>{if(this.defaults.async)return Promise.resolve(a.call(r,u)).then(h=>c.call(r,h));const f=a.call(r,u);return c.call(r,f)}:r[l]=(...u)=>{let f=a.apply(r,u);return f===!1&&(f=c.apply(r,u)),f}}i.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,o=n.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return it.lex(e,t??this.defaults)}parser(e,t){return rt.parse(e,t??this.defaults)}}Mt=new WeakSet,ai=function(e,t){return(n,i)=>{const r={...i},o={...this.defaults,...r};this.defaults.async===!0&&r.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=$n(this,Mt,Ca).call(this,!!o.silent,!!o.async);if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(n):n).then(l=>e(l,o)).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>t(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(n=o.hooks.preprocess(n));const l=e(n,o);o.walkTokens&&this.walkTokens(l,o.walkTokens);let c=t(l,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(l){return a(l)}}},Ca=function(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Ne(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}};const Nt=new ff;function Y(s,e){return Nt.parse(s,e)}Y.options=Y.setOptions=function(s){return Nt.setOptions(s),Y.defaults=Nt.defaults,xa(Y.defaults),Y};Y.getDefaults=Ui;Y.defaults=It;Y.use=function(...s){return Nt.use(...s),Y.defaults=Nt.defaults,xa(Y.defaults),Y};Y.walkTokens=function(s,e){return Nt.walkTokens(s,e)};Y.parseInline=Nt.parseInline;Y.Parser=rt;Y.parser=rt.parse;Y.Renderer=ls;Y.TextRenderer=qi;Y.Lexer=it;Y.lexer=it.lex;Y.Tokenizer=as;Y.Hooks=xn;Y.parse=Y;Y.options;Y.setOptions;Y.use;Y.walkTokens;Y.parseInline;rt.parse;it.lex;const hf=["innerHTML"],df=Li({__name:"ChatMessage",props:{message:{}},setup(s){const e=s,t=zi(()=>Y(e.message.content));return(n,i)=>(Be(),We("div",{class:tn(["flex",n.message.role==="assistant"?"justify-start":"justify-end"])},[V("div",{class:tn(["max-w-[80%] rounded-lg px-4 py-2",n.message.role==="assistant"?"bg-gray-100":"bg-blue-500 text-white"])},[V("div",{class:"prose prose-sm dark:prose-invert",innerHTML:t.value},null,8,hf)],2)],2))}});function Sa(s,e){return function(){return s.apply(e,arguments)}}const{toString:gf}=Object.prototype,{getPrototypeOf:Hi}=Object,ks=(s=>e=>{const t=gf.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ke=s=>(s=s.toLowerCase(),e=>ks(e)===s),As=s=>e=>typeof e===s,{isArray:sn}=Array,_n=As("undefined");function pf(s){return s!==null&&!_n(s)&&s.constructor!==null&&!_n(s.constructor)&&Me(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Ea=Ke("ArrayBuffer");function mf(s){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(s):e=s&&s.buffer&&Ea(s.buffer),e}const yf=As("string"),Me=As("function"),va=As("number"),Cs=s=>s!==null&&typeof s=="object",bf=s=>s===!0||s===!1,Gn=s=>{if(ks(s)!=="object")return!1;const e=Hi(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},wf=Ke("Date"),xf=Ke("File"),kf=Ke("Blob"),Af=Ke("FileList"),Cf=s=>Cs(s)&&Me(s.pipe),Sf=s=>{let e;return s&&(typeof FormData=="function"&&s instanceof FormData||Me(s.append)&&((e=ks(s))==="formdata"||e==="object"&&Me(s.toString)&&s.toString()==="[object FormData]"))},Ef=Ke("URLSearchParams"),[vf,Df,_f,Tf]=["ReadableStream","Request","Response","Headers"].map(Ke),Ff=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rn(s,e,{allOwnKeys:t=!1}={}){if(s===null||typeof s>"u")return;let n,i;if(typeof s!="object"&&(s=[s]),sn(s))for(n=0,i=s.length;n<i;n++)e.call(null,s[n],n,s);else{const r=t?Object.getOwnPropertyNames(s):Object.keys(s),o=r.length;let a;for(n=0;n<o;n++)a=r[n],e.call(null,s[a],a,s)}}function Da(s,e){e=e.toLowerCase();const t=Object.keys(s);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const Rt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_a=s=>!_n(s)&&s!==Rt;function li(){const{caseless:s}=_a(this)&&this||{},e={},t=(n,i)=>{const r=s&&Da(e,i)||i;Gn(e[r])&&Gn(n)?e[r]=li(e[r],n):Gn(n)?e[r]=li({},n):sn(n)?e[r]=n.slice():e[r]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Rn(arguments[n],t);return e}const Rf=(s,e,t,{allOwnKeys:n}={})=>(Rn(e,(i,r)=>{t&&Me(i)?s[r]=Sa(i,t):s[r]=i},{allOwnKeys:n}),s),Of=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),Pf=(s,e,t,n)=>{s.prototype=Object.create(e.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:e.prototype}),t&&Object.assign(s.prototype,t)},Bf=(s,e,t,n)=>{let i,r,o;const a={};if(e=e||{},s==null)return e;do{for(i=Object.getOwnPropertyNames(s),r=i.length;r-- >0;)o=i[r],(!n||n(o,s,e))&&!a[o]&&(e[o]=s[o],a[o]=!0);s=t!==!1&&Hi(s)}while(s&&(!t||t(s,e))&&s!==Object.prototype);return e},$f=(s,e,t)=>{s=String(s),(t===void 0||t>s.length)&&(t=s.length),t-=e.length;const n=s.indexOf(e,t);return n!==-1&&n===t},Nf=s=>{if(!s)return null;if(sn(s))return s;let e=s.length;if(!va(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=s[e];return t},Lf=(s=>e=>s&&e instanceof s)(typeof Uint8Array<"u"&&Hi(Uint8Array)),Mf=(s,e)=>{const n=(s&&s[Symbol.iterator]).call(s);let i;for(;(i=n.next())&&!i.done;){const r=i.value;e.call(s,r[0],r[1])}},If=(s,e)=>{let t;const n=[];for(;(t=s.exec(e))!==null;)n.push(t);return n},jf=Ke("HTMLFormElement"),zf=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),zr=(({hasOwnProperty:s})=>(e,t)=>s.call(e,t))(Object.prototype),Uf=Ke("RegExp"),Ta=(s,e)=>{const t=Object.getOwnPropertyDescriptors(s),n={};Rn(t,(i,r)=>{let o;(o=e(i,r,s))!==!1&&(n[r]=o||i)}),Object.defineProperties(s,n)},qf=s=>{Ta(s,(e,t)=>{if(Me(s)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=s[t];if(Me(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Hf=(s,e)=>{const t={},n=i=>{i.forEach(r=>{t[r]=!0})};return sn(s)?n(s):n(String(s).split(e)),t},Wf=()=>{},Vf=(s,e)=>s!=null&&Number.isFinite(s=+s)?s:e,Is="abcdefghijklmnopqrstuvwxyz",Ur="0123456789",Fa={DIGIT:Ur,ALPHA:Is,ALPHA_DIGIT:Is+Is.toUpperCase()+Ur},Jf=(s=16,e=Fa.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;s--;)t+=e[Math.random()*n|0];return t};function Kf(s){return!!(s&&Me(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}const Gf=s=>{const e=new Array(10),t=(n,i)=>{if(Cs(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const r=sn(n)?[]:{};return Rn(n,(o,a)=>{const l=t(o,i+1);!_n(l)&&(r[a]=l)}),e[i]=void 0,r}}return n};return t(s,0)},Qf=Ke("AsyncFunction"),Zf=s=>s&&(Cs(s)||Me(s))&&Me(s.then)&&Me(s.catch),Ra=((s,e)=>s?setImmediate:e?((t,n)=>(Rt.addEventListener("message",({source:i,data:r})=>{i===Rt&&r===t&&n.length&&n.shift()()},!1),i=>{n.push(i),Rt.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Me(Rt.postMessage)),Xf=typeof queueMicrotask<"u"?queueMicrotask.bind(Rt):typeof process<"u"&&process.nextTick||Ra,y={isArray:sn,isArrayBuffer:Ea,isBuffer:pf,isFormData:Sf,isArrayBufferView:mf,isString:yf,isNumber:va,isBoolean:bf,isObject:Cs,isPlainObject:Gn,isReadableStream:vf,isRequest:Df,isResponse:_f,isHeaders:Tf,isUndefined:_n,isDate:wf,isFile:xf,isBlob:kf,isRegExp:Uf,isFunction:Me,isStream:Cf,isURLSearchParams:Ef,isTypedArray:Lf,isFileList:Af,forEach:Rn,merge:li,extend:Rf,trim:Ff,stripBOM:Of,inherits:Pf,toFlatObject:Bf,kindOf:ks,kindOfTest:Ke,endsWith:$f,toArray:Nf,forEachEntry:Mf,matchAll:If,isHTMLForm:jf,hasOwnProperty:zr,hasOwnProp:zr,reduceDescriptors:Ta,freezeMethods:qf,toObjectSet:Hf,toCamelCase:zf,noop:Wf,toFiniteNumber:Vf,findKey:Da,global:Rt,isContextDefined:_a,ALPHABET:Fa,generateString:Jf,isSpecCompliantForm:Kf,toJSONObject:Gf,isAsyncFn:Qf,isThenable:Zf,setImmediate:Ra,asap:Xf};function U(s,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}y.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:y.toJSONObject(this.config),code:this.code,status:this.status}}});const Oa=U.prototype,Pa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Pa[s]={value:s}});Object.defineProperties(U,Pa);Object.defineProperty(Oa,"isAxiosError",{value:!0});U.from=(s,e,t,n,i,r)=>{const o=Object.create(Oa);return y.toFlatObject(s,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),U.call(o,s.message,e,t,n,i),o.cause=s,o.name=s.name,r&&Object.assign(o,r),o};const Yf=null;function ci(s){return y.isPlainObject(s)||y.isArray(s)}function Ba(s){return y.endsWith(s,"[]")?s.slice(0,-2):s}function qr(s,e,t){return s?s.concat(e).map(function(i,r){return i=Ba(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function eh(s){return y.isArray(s)&&!s.some(ci)}const th=y.toFlatObject(y,{},null,function(e){return/^is[A-Z]/.test(e)});function Ss(s,e,t){if(!y.isObject(s))throw new TypeError("target must be an object");e=e||new FormData,t=y.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,k){return!y.isUndefined(k[w])});const n=t.metaTokens,i=t.visitor||u,r=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&y.isSpecCompliantForm(e);if(!y.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(y.isDate(m))return m.toISOString();if(!l&&y.isBlob(m))throw new U("Blob is not supported. Use a Buffer instead.");return y.isArrayBuffer(m)||y.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,w,k){let F=m;if(m&&!k&&typeof m=="object"){if(y.endsWith(w,"{}"))w=n?w:w.slice(0,-2),m=JSON.stringify(m);else if(y.isArray(m)&&eh(m)||(y.isFileList(m)||y.endsWith(w,"[]"))&&(F=y.toArray(m)))return w=Ba(w),F.forEach(function(M,R){!(y.isUndefined(M)||M===null)&&e.append(o===!0?qr([w],R,r):o===null?w:w+"[]",c(M))}),!1}return ci(m)?!0:(e.append(qr(k,w,r),c(m)),!1)}const f=[],h=Object.assign(th,{defaultVisitor:u,convertValue:c,isVisitable:ci});function p(m,w){if(!y.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(m),y.forEach(m,function(F,$){(!(y.isUndefined(F)||F===null)&&i.call(e,F,y.isString($)?$.trim():$,w,h))===!0&&p(F,w?w.concat($):[$])}),f.pop()}}if(!y.isObject(s))throw new TypeError("data must be an object");return p(s),e}function Hr(s){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Wi(s,e){this._pairs=[],s&&Ss(s,this,e)}const $a=Wi.prototype;$a.append=function(e,t){this._pairs.push([e,t])};$a.toString=function(e){const t=e?function(n){return e.call(this,n,Hr)}:Hr;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function nh(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Na(s,e,t){if(!e)return s;const n=t&&t.encode||nh;y.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let r;if(i?r=i(e,t):r=y.isURLSearchParams(e)?e.toString():new Wi(e,t).toString(n),r){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}class Wr{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){y.forEach(this.handlers,function(n){n!==null&&e(n)})}}const La={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sh=typeof URLSearchParams<"u"?URLSearchParams:Wi,ih=typeof FormData<"u"?FormData:null,rh=typeof Blob<"u"?Blob:null,oh={isBrowser:!0,classes:{URLSearchParams:sh,FormData:ih,Blob:rh},protocols:["http","https","file","blob","url","data"]},Vi=typeof window<"u"&&typeof document<"u",ui=typeof navigator=="object"&&navigator||void 0,ah=Vi&&(!ui||["ReactNative","NativeScript","NS"].indexOf(ui.product)<0),lh=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ch=Vi&&window.location.href||"http://localhost",uh=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vi,hasStandardBrowserEnv:ah,hasStandardBrowserWebWorkerEnv:lh,navigator:ui,origin:ch},Symbol.toStringTag,{value:"Module"})),be={...uh,...oh};function fh(s,e){return Ss(s,new be.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,r){return be.isNode&&y.isBuffer(t)?(this.append(n,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function hh(s){return y.matchAll(/\w+|\[(\w*)]/g,s).map(e=>e[0]==="[]"?"":e[1]||e[0])}function dh(s){const e={},t=Object.keys(s);let n;const i=t.length;let r;for(n=0;n<i;n++)r=t[n],e[r]=s[r];return e}function Ma(s){function e(t,n,i,r){let o=t[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=t.length;return o=!o&&y.isArray(i)?i.length:o,l?(y.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!y.isObject(i[o]))&&(i[o]=[]),e(t,n,i[o],r)&&y.isArray(i[o])&&(i[o]=dh(i[o])),!a)}if(y.isFormData(s)&&y.isFunction(s.entries)){const t={};return y.forEachEntry(s,(n,i)=>{e(hh(n),i,t,0)}),t}return null}function gh(s,e,t){if(y.isString(s))try{return(e||JSON.parse)(s),y.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(s)}const On={transitional:La,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=y.isObject(e);if(r&&y.isHTMLForm(e)&&(e=new FormData(e)),y.isFormData(e))return i?JSON.stringify(Ma(e)):e;if(y.isArrayBuffer(e)||y.isBuffer(e)||y.isStream(e)||y.isFile(e)||y.isBlob(e)||y.isReadableStream(e))return e;if(y.isArrayBufferView(e))return e.buffer;if(y.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return fh(e,this.formSerializer).toString();if((a=y.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ss(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),gh(e)):e}],transformResponse:[function(e){const t=this.transitional||On.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(y.isResponse(e)||y.isReadableStream(e))return e;if(e&&y.isString(e)&&(n&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?U.from(a,U.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:be.classes.FormData,Blob:be.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};y.forEach(["delete","get","head","post","put","patch"],s=>{On.headers[s]={}});const ph=y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mh=s=>{const e={};let t,n,i;return s&&s.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!t||e[t]&&ph[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Vr=Symbol("internals");function un(s){return s&&String(s).trim().toLowerCase()}function Qn(s){return s===!1||s==null?s:y.isArray(s)?s.map(Qn):String(s)}function yh(s){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(s);)e[n[1]]=n[2];return e}const bh=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function js(s,e,t,n,i){if(y.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!y.isString(e)){if(y.isString(n))return e.indexOf(n)!==-1;if(y.isRegExp(n))return n.test(e)}}function wh(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function xh(s,e){const t=y.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+t,{value:function(i,r,o){return this[n].call(this,e,i,r,o)},configurable:!0})})}class Te{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(a,l,c){const u=un(l);if(!u)throw new Error("header name must be a non-empty string");const f=y.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=Qn(a))}const o=(a,l)=>y.forEach(a,(c,u)=>r(c,u,l));if(y.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(y.isString(e)&&(e=e.trim())&&!bh(e))o(mh(e),t);else if(y.isHeaders(e))for(const[a,l]of e.entries())r(l,a,n);else e!=null&&r(t,e,n);return this}get(e,t){if(e=un(e),e){const n=y.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return yh(i);if(y.isFunction(t))return t.call(this,i,n);if(y.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=un(e),e){const n=y.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||js(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function r(o){if(o=un(o),o){const a=y.findKey(n,o);a&&(!t||js(n,n[a],a,t))&&(delete n[a],i=!0)}}return y.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];(!e||js(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return y.forEach(this,(i,r)=>{const o=y.findKey(n,r);if(o){t[o]=Qn(i),delete t[r];return}const a=e?wh(r):String(r).trim();a!==r&&delete t[r],t[a]=Qn(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return y.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&y.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Vr]=this[Vr]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=un(o);n[a]||(xh(i,o),n[a]=!0)}return y.isArray(e)?e.forEach(r):r(e),this}}Te.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);y.reduceDescriptors(Te.prototype,({value:s},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>s,set(n){this[t]=n}}});y.freezeMethods(Te);function zs(s,e){const t=this||On,n=e||t,i=Te.from(n.headers);let r=n.data;return y.forEach(s,function(a){r=a.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function Ia(s){return!!(s&&s.__CANCEL__)}function rn(s,e,t){U.call(this,s??"canceled",U.ERR_CANCELED,e,t),this.name="CanceledError"}y.inherits(rn,U,{__CANCEL__:!0});function ja(s,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?s(t):e(new U("Request failed with status code "+t.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function kh(s){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return e&&e[1]||""}function Ah(s,e){s=s||10;const t=new Array(s),n=new Array(s);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=n[r];o||(o=c),t[i]=l,n[i]=c;let f=r,h=0;for(;f!==i;)h+=t[f++],f=f%s;if(i=(i+1)%s,i===r&&(r=(r+1)%s),c-o<e)return;const p=u&&c-u;return p?Math.round(h*1e3/p):void 0}}function Ch(s,e){let t=0,n=1e3/e,i,r;const o=(c,u=Date.now())=>{t=u,i=null,r&&(clearTimeout(r),r=null),s.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-t;f>=n?o(c,u):(i=c,r||(r=setTimeout(()=>{r=null,o(i)},n-f)))},()=>i&&o(i)]}const cs=(s,e,t=3)=>{let n=0;const i=Ah(50,250);return Ch(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-n,c=i(l),u=o<=a;n=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[e?"download":"upload"]:!0};s(f)},t)},Jr=(s,e)=>{const t=s!=null;return[n=>e[0]({lengthComputable:t,total:s,loaded:n}),e[1]]},Kr=s=>(...e)=>y.asap(()=>s(...e)),Sh=be.hasStandardBrowserEnv?((s,e)=>t=>(t=new URL(t,be.origin),s.protocol===t.protocol&&s.host===t.host&&(e||s.port===t.port)))(new URL(be.origin),be.navigator&&/(msie|trident)/i.test(be.navigator.userAgent)):()=>!0,Eh=be.hasStandardBrowserEnv?{write(s,e,t,n,i,r){const o=[s+"="+encodeURIComponent(e)];y.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),y.isString(n)&&o.push("path="+n),y.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(s){const e=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vh(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function Dh(s,e){return e?s.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):s}function za(s,e){return s&&!vh(e)?Dh(s,e):e}const Gr=s=>s instanceof Te?{...s}:s;function Lt(s,e){e=e||{};const t={};function n(c,u,f,h){return y.isPlainObject(c)&&y.isPlainObject(u)?y.merge.call({caseless:h},c,u):y.isPlainObject(u)?y.merge({},u):y.isArray(u)?u.slice():u}function i(c,u,f,h){if(y.isUndefined(u)){if(!y.isUndefined(c))return n(void 0,c,f,h)}else return n(c,u,f,h)}function r(c,u){if(!y.isUndefined(u))return n(void 0,u)}function o(c,u){if(y.isUndefined(u)){if(!y.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,f){if(f in e)return n(c,u);if(f in s)return n(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,f)=>i(Gr(c),Gr(u),f,!0)};return y.forEach(Object.keys(Object.assign({},s,e)),function(u){const f=l[u]||i,h=f(s[u],e[u],u);y.isUndefined(h)&&f!==a||(t[u]=h)}),t}const Ua=s=>{const e=Lt({},s);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:a}=e;e.headers=o=Te.from(o),e.url=Na(za(e.baseURL,e.url),s.params,s.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(y.isFormData(t)){if(be.hasStandardBrowserEnv||be.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(be.hasStandardBrowserEnv&&(n&&y.isFunction(n)&&(n=n(e)),n||n!==!1&&Sh(e.url))){const c=i&&r&&Eh.read(r);c&&o.set(i,c)}return e},_h=typeof XMLHttpRequest<"u",Th=_h&&function(s){return new Promise(function(t,n){const i=Ua(s);let r=i.data;const o=Te.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,f,h,p,m;function w(){p&&p(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function F(){if(!k)return;const M=Te.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),j={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:M,config:s,request:k};ja(function(se){t(se),w()},function(se){n(se),w()},j),k=null}"onloadend"in k?k.onloadend=F:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(F)},k.onabort=function(){k&&(n(new U("Request aborted",U.ECONNABORTED,s,k)),k=null)},k.onerror=function(){n(new U("Network Error",U.ERR_NETWORK,s,k)),k=null},k.ontimeout=function(){let R=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const j=i.transitional||La;i.timeoutErrorMessage&&(R=i.timeoutErrorMessage),n(new U(R,j.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,s,k)),k=null},r===void 0&&o.setContentType(null),"setRequestHeader"in k&&y.forEach(o.toJSON(),function(R,j){k.setRequestHeader(j,R)}),y.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),c&&([h,m]=cs(c,!0),k.addEventListener("progress",h)),l&&k.upload&&([f,p]=cs(l),k.upload.addEventListener("progress",f),k.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=M=>{k&&(n(!M||M.type?new rn(null,s,k):M),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const $=kh(i.url);if($&&be.protocols.indexOf($)===-1){n(new U("Unsupported protocol "+$+":",U.ERR_BAD_REQUEST,s));return}k.send(r||null)})},Fh=(s,e)=>{const{length:t}=s=s?s.filter(Boolean):[];if(e||t){let n=new AbortController,i;const r=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof U?u:new rn(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,r(new U(`timeout ${e} of ms exceeded`,U.ETIMEDOUT))},e);const a=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),s=null)};s.forEach(c=>c.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=()=>y.asap(a),l}},Rh=function*(s,e){let t=s.byteLength;if(t<e){yield s;return}let n=0,i;for(;n<t;)i=n+e,yield s.slice(n,i),n=i},Oh=async function*(s,e){for await(const t of Ph(s))yield*Rh(t,e)},Ph=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const e=s.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},Qr=(s,e,t,n)=>{const i=Oh(s,e);let r=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let f=u.byteLength;if(t){let h=r+=f;t(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Es=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qa=Es&&typeof ReadableStream=="function",Bh=Es&&(typeof TextEncoder=="function"?(s=>e=>s.encode(e))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),Ha=(s,...e)=>{try{return!!s(...e)}catch{return!1}},$h=qa&&Ha(()=>{let s=!1;const e=new Request(be.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!e}),Zr=64*1024,fi=qa&&Ha(()=>y.isReadableStream(new Response("").body)),us={stream:fi&&(s=>s.body)};Es&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!us[e]&&(us[e]=y.isFunction(s[e])?t=>t[e]():(t,n)=>{throw new U(`Response type '${e}' is not supported`,U.ERR_NOT_SUPPORT,n)})})})(new Response);const Nh=async s=>{if(s==null)return 0;if(y.isBlob(s))return s.size;if(y.isSpecCompliantForm(s))return(await new Request(be.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(y.isArrayBufferView(s)||y.isArrayBuffer(s))return s.byteLength;if(y.isURLSearchParams(s)&&(s=s+""),y.isString(s))return(await Bh(s)).byteLength},Lh=async(s,e)=>{const t=y.toFiniteNumber(s.getContentLength());return t??Nh(e)},Mh=Es&&(async s=>{let{url:e,method:t,data:n,signal:i,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:h}=Ua(s);c=c?(c+"").toLowerCase():"text";let p=Fh([i,r&&r.toAbortSignal()],o),m;const w=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let k;try{if(l&&$h&&t!=="get"&&t!=="head"&&(k=await Lh(u,n))!==0){let j=new Request(e,{method:"POST",body:n,duplex:"half"}),re;if(y.isFormData(n)&&(re=j.headers.get("content-type"))&&u.setContentType(re),j.body){const[se,ie]=Jr(k,cs(Kr(l)));n=Qr(j.body,Zr,se,ie)}}y.isString(f)||(f=f?"include":"omit");const F="credentials"in Request.prototype;m=new Request(e,{...h,signal:p,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:F?f:void 0});let $=await fetch(m);const M=fi&&(c==="stream"||c==="response");if(fi&&(a||M&&w)){const j={};["status","statusText","headers"].forEach(qe=>{j[qe]=$[qe]});const re=y.toFiniteNumber($.headers.get("content-length")),[se,ie]=a&&Jr(re,cs(Kr(a),!0))||[];$=new Response(Qr($.body,Zr,se,()=>{ie&&ie(),w&&w()}),j)}c=c||"text";let R=await us[y.findKey(us,c)||"text"]($,s);return!M&&w&&w(),await new Promise((j,re)=>{ja(j,re,{data:R,headers:Te.from($.headers),status:$.status,statusText:$.statusText,config:s,request:m})})}catch(F){throw w&&w(),F&&F.name==="TypeError"&&/fetch/i.test(F.message)?Object.assign(new U("Network Error",U.ERR_NETWORK,s,m),{cause:F.cause||F}):U.from(F,F&&F.code,s,m)}}),hi={http:Yf,xhr:Th,fetch:Mh};y.forEach(hi,(s,e)=>{if(s){try{Object.defineProperty(s,"name",{value:e})}catch{}Object.defineProperty(s,"adapterName",{value:e})}});const Xr=s=>`- ${s}`,Ih=s=>y.isFunction(s)||s===null||s===!1,Wa={getAdapter:s=>{s=y.isArray(s)?s:[s];const{length:e}=s;let t,n;const i={};for(let r=0;r<e;r++){t=s[r];let o;if(n=t,!Ih(t)&&(n=hi[(o=String(t)).toLowerCase()],n===void 0))throw new U(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+r]=n}if(!n){const r=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(Xr).join(`
`):" "+Xr(r[0]):"as no adapter specified";throw new U("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:hi};function Us(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new rn(null,s)}function Yr(s){return Us(s),s.headers=Te.from(s.headers),s.data=zs.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Wa.getAdapter(s.adapter||On.adapter)(s).then(function(n){return Us(s),n.data=zs.call(s,s.transformResponse,n),n.headers=Te.from(n.headers),n},function(n){return Ia(n)||(Us(s),n&&n.response&&(n.response.data=zs.call(s,s.transformResponse,n.response),n.response.headers=Te.from(n.response.headers))),Promise.reject(n)})}const Va="1.7.9",vs={};["object","boolean","number","function","string","symbol"].forEach((s,e)=>{vs[s]=function(n){return typeof n===s||"a"+(e<1?"n ":" ")+s}});const eo={};vs.transitional=function(e,t,n){function i(r,o){return"[Axios v"+Va+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,a)=>{if(e===!1)throw new U(i(o," has been removed"+(t?" in "+t:"")),U.ERR_DEPRECATED);return t&&!eo[o]&&(eo[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,a):!0}};vs.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function jh(s,e,t){if(typeof s!="object")throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let i=n.length;for(;i-- >0;){const r=n[i],o=e[r];if(o){const a=s[r],l=a===void 0||o(a,r,s);if(l!==!0)throw new U("option "+r+" must be "+l,U.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new U("Unknown option "+r,U.ERR_BAD_OPTION)}}const Zn={assertOptions:jh,validators:vs},et=Zn.validators;class Pt{constructor(e){this.defaults=e,this.interceptors={request:new Wr,response:new Wr}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Lt(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;n!==void 0&&Zn.assertOptions(n,{silentJSONParsing:et.transitional(et.boolean),forcedJSONParsing:et.transitional(et.boolean),clarifyTimeoutError:et.transitional(et.boolean)},!1),i!=null&&(y.isFunction(i)?t.paramsSerializer={serialize:i}:Zn.assertOptions(i,{encode:et.function,serialize:et.function},!0)),Zn.assertOptions(t,{baseUrl:et.spelling("baseURL"),withXsrfToken:et.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&y.merge(r.common,r[t.method]);r&&y.forEach(["delete","get","head","post","put","patch","common"],m=>{delete r[m]}),t.headers=Te.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let u,f=0,h;if(!l){const m=[Yr.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),h=m.length,u=Promise.resolve(t);f<h;)u=u.then(m[f++],m[f++]);return u}h=a.length;let p=t;for(f=0;f<h;){const m=a[f++],w=a[f++];try{p=m(p)}catch(k){w.call(this,k);break}}try{u=Yr.call(this,p)}catch(m){return Promise.reject(m)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=Lt(this.defaults,e);const t=za(e.baseURL,e.url);return Na(t,e.params,e.paramsSerializer)}}y.forEach(["delete","get","head","options"],function(e){Pt.prototype[e]=function(t,n){return this.request(Lt(n||{},{method:e,url:t,data:(n||{}).data}))}});y.forEach(["post","put","patch"],function(e){function t(n){return function(r,o,a){return this.request(Lt(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Pt.prototype[e]=t(),Pt.prototype[e+"Form"]=t(!0)});class Ji{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const n=this;this.promise.then(i=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](i);n._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{n.subscribe(a),r=a}).then(i);return o.cancel=function(){n.unsubscribe(r)},o},e(function(r,o,a){n.reason||(n.reason=new rn(r,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Ji(function(i){e=i}),cancel:e}}}function zh(s){return function(t){return s.apply(null,t)}}function Uh(s){return y.isObject(s)&&s.isAxiosError===!0}const di={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(di).forEach(([s,e])=>{di[e]=s});function Ja(s){const e=new Pt(s),t=Sa(Pt.prototype.request,e);return y.extend(t,Pt.prototype,e,{allOwnKeys:!0}),y.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Ja(Lt(s,i))},t}const fe=Ja(On);fe.Axios=Pt;fe.CanceledError=rn;fe.CancelToken=Ji;fe.isCancel=Ia;fe.VERSION=Va;fe.toFormData=Ss;fe.AxiosError=U;fe.Cancel=fe.CanceledError;fe.all=function(e){return Promise.all(e)};fe.spread=zh;fe.isAxiosError=Uh;fe.mergeConfig=Lt;fe.AxiosHeaders=Te;fe.formToJSON=s=>Ma(y.isHTMLForm(s)?new FormData(s):s);fe.getAdapter=Wa.getAdapter;fe.HttpStatusCode=di;fe.default=fe;async function qh(s,e){const t=s.getReader();let n;for(;!(n=await t.read()).done;)e(n.value)}function Hh(s){let e,t,n,i=!1;return function(o){e===void 0?(e=o,t=0,n=-1):e=Vh(e,o);const a=e.length;let l=0;for(;t<a;){i&&(e[t]===10&&(l=++t),i=!1);let c=-1;for(;t<a&&c===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-l);break;case 13:i=!0;case 10:c=t;break}if(c===-1)break;s(e.subarray(l,c),n),l=t,n=-1}l===a?e=void 0:l!==0&&(e=e.subarray(l),t-=l)}}function Wh(s,e,t){let n=to();const i=new TextDecoder;return function(o,a){if(o.length===0)t==null||t(n),n=to();else if(a>0){const l=i.decode(o.subarray(0,a)),c=a+(o[a+1]===32?2:1),u=i.decode(o.subarray(c));switch(l){case"data":n.data=n.data?n.data+`
`+u:u;break;case"event":n.event=u;break;case"id":s(n.id=u);break;case"retry":const f=parseInt(u,10);isNaN(f)||e(n.retry=f);break}}}}function Vh(s,e){const t=new Uint8Array(s.length+e.length);return t.set(s),t.set(e,s.length),t}function to(){return{data:"",event:"",id:"",retry:void 0}}var Jh=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t};const gi="text/event-stream",Kh=1e3,no="last-event-id";function Gh(s,e){var{signal:t,headers:n,onopen:i,onmessage:r,onclose:o,onerror:a,openWhenHidden:l,fetch:c}=e,u=Jh(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((f,h)=>{const p=Object.assign({},n);p.accept||(p.accept=gi);let m;function w(){m.abort(),document.hidden||j()}l||document.addEventListener("visibilitychange",w);let k=Kh,F=0;function $(){document.removeEventListener("visibilitychange",w),window.clearTimeout(F),m.abort()}t==null||t.addEventListener("abort",()=>{$(),f()});const M=c??window.fetch,R=i??Qh;async function j(){var re;m=new AbortController;try{const se=await M(s,Object.assign(Object.assign({},u),{headers:p,signal:m.signal}));await R(se),await qh(se.body,Hh(Wh(ie=>{ie?p[no]=ie:delete p[no]},ie=>{k=ie},r))),o==null||o(),$(),f()}catch(se){if(!m.signal.aborted)try{const ie=(re=a==null?void 0:a(se))!==null&&re!==void 0?re:k;window.clearTimeout(F),F=window.setTimeout(j,ie)}catch(ie){$(),h(ie)}}}j()})}function Qh(s){const e=s.headers.get("content-type");if(!(e!=null&&e.startsWith(gi)))throw new Error(`Expected content-type to be ${gi}, Actual: ${e}`)}function Zh(){try{const s=new(window.AudioContext||window.webkitAudioContext);return console.log("AudioContext created with initial state:",s.state),s}catch(s){throw console.error("Failed to create AudioContext:",s),s}}let Xh=Zh();const ce=Xh,Yh=Object.freeze(Object.defineProperty({__proto__:null,audioContext:ce},Symbol.toStringTag,{value:"Module"})),Tt=class Tt{constructor(){N(this,"queue",[]);N(this,"isPlaying",!1);N(this,"currentSource",null);N(this,"textToAudioDelay",500);N(this,"pendingBuffers",new Map);N(this,"nextToPlay",0);N(this,"globalOnCompleteCallback",null)}static getInstance(){return Tt.instance||(Tt.instance=new Tt),Tt.instance}setTextToAudioDelay(e){this.textToAudioDelay=e}setGlobalOnCompleteCallback(e){this.globalOnCompleteCallback=e}diagnoseAudioContext(){console.log("Audio Context Diagnosis",{state:ce.state,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),userAgent:navigator.userAgent,audioContextSupport:!!(window.AudioContext||window.webkitAudioContext)}),ce.state==="suspended"&&ce.resume().then(()=>{console.log("AudioContext successfully resumed")}).catch(e=>{console.error("Failed to resume AudioContext:",e)})}stopAudioPlayback(){this.currentSource&&(this.currentSource.stop(),this.currentSource.disconnect(),this.currentSource=null),this.pendingBuffers.clear(),this.queue=[],this.isPlaying=!1,this.nextToPlay=0,this.globalOnCompleteCallback=null}async processAudioInBackground(e,t){return await new Promise(n=>setTimeout(n,this.textToAudioDelay)),console.log(`sequence: ${t}, nextToPlay: ${this.nextToPlay}`),new Promise(n=>{if(t<this.nextToPlay){console.log(`Skipping audio sequence ${t} as it's before ${this.nextToPlay}`),n();return}this.pendingBuffers.set(t,{buffer:e,onComplete:()=>{console.log(`Audio ${t} processing completed`),n()}}),this.tryProcessQueue()})}tryProcessQueue(){const e=[];for(;this.pendingBuffers.has(this.nextToPlay);){const t=this.pendingBuffers.get(this.nextToPlay);this.pendingBuffers.delete(this.nextToPlay),this.queue.push({...t,sequence:this.nextToPlay}),e.push(this.nextToPlay),this.nextToPlay++,this.isPlaying||this.playNext()}if(e.length===0&&this.pendingBuffers.size>0){const t=Array.from(this.pendingBuffers.keys()).sort((n,i)=>n-i);console.warn("Queue processing stalled. Available sequences:",t),t.length>0&&(this.nextToPlay=t[0],console.log(`Skipping to sequence ${this.nextToPlay} to prevent queue stall`))}}playNext(){if(console.log("playNext"),this.isPlaying||this.queue.length===0)return;this.isPlaying=!0;const{buffer:e,onComplete:t}=this.queue[0],n=ce.createBufferSource();n.buffer=e,n.connect(ce.destination),this.currentSource=n,n.onended=()=>{if(this.queue.shift(),this.isPlaying=!1,this.currentSource=null,t(),this.queue.length===0){if(console.log("All buffers played"),this.isPlaying=!1,this.globalOnCompleteCallback){const i=this.globalOnCompleteCallback;this.globalOnCompleteCallback=null,i()}this.playNext()}else this.playNext()},ce.state==="suspended"?ce.resume().then(()=>{console.log("AudioContext successfully resumed for playing"),n.start(0)}):n.start(0)}clear(){this.queue=[],this.pendingBuffers.clear(),this.isPlaying=!1,this.nextToPlay=0,this.globalOnCompleteCallback=null}};N(Tt,"instance");let pi=Tt;const ge=[];for(let s=0;s<256;++s)ge.push((s+256).toString(16).slice(1));function ed(s,e=0){return(ge[s[e+0]]+ge[s[e+1]]+ge[s[e+2]]+ge[s[e+3]]+"-"+ge[s[e+4]]+ge[s[e+5]]+"-"+ge[s[e+6]]+ge[s[e+7]]+"-"+ge[s[e+8]]+ge[s[e+9]]+"-"+ge[s[e+10]]+ge[s[e+11]]+ge[s[e+12]]+ge[s[e+13]]+ge[s[e+14]]+ge[s[e+15]]).toLowerCase()}let qs;const td=new Uint8Array(16);function nd(){if(!qs){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");qs=crypto.getRandomValues.bind(crypto)}return qs(td)}const sd=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),so={randomUUID:sd};function id(s,e,t){if(so.randomUUID&&!e&&!s)return so.randomUUID();s=s||{};const n=s.random||(s.rng||nd)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ed(n)}const Hs={development:{baseUrl:"",ttsBaseUrl:"",asrBaseUrl:"http://localhost:5101"},production:{baseUrl:"https://kb.uuxlink.com",ttsBaseUrl:"https://kb.uuxlink.com",asrBaseUrl:"https://kb.uuxlink.com"}},kn={api:{baseUrl:Hs.production.baseUrl,ttsBaseUrl:Hs.production.ttsBaseUrl,asrBaseUrl:Hs.production.asrBaseUrl},bailian:{workspaceId:"123456abc",indexId:"jrpw2n7nll",endpoint:"bailian.cn-beijing.aliyuncs.com",regionId:"cn-beijing"},auth:{username:"needle",password:"jQAjpkdalP^UKt21"}},rd="4823798285",Ka="GmakIY6Um9DZgCQl7Rr0RJNfDukCJ8RB",od="volcano_tts",ad="cn",ld="BV700_V2_streaming",cd="professional",ud=`${kn.api.ttsBaseUrl}/api/v1/tts`,fd={Authorization:`Bearer;${Ka}`};function hd(s){try{if(typeof s!="string")return console.error("base64 parameter must be a string, received:",typeof s),new ArrayBuffer(0);const t=s.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");if(!t||!/^[A-Za-z0-9+/=]+$/.test(t))return console.error("Invalid base64 string:",s),new ArrayBuffer(0);const n=window.atob(t),i=n.length,r=new Uint8Array(i);for(let o=0;o<i;o++)r[o]=n.charCodeAt(o);return r.buffer}catch(e){return console.error("Error decoding base64:",e),new ArrayBuffer(0)}}async function dd(s,e=16e3,t="mp3",n=1,i=1){if(!s||s.trim().length===0)return console.warn("Empty text provided for speech generation"),Promise.resolve(new ArrayBuffer(0));const r={app:{appid:rd,token:Ka,cluster:od},user:{uid:"388808087185088"},audio:{voice_type:ld,emotion:cd,encoding:t,speed_ratio:n,rate:e,volume_ratio:1,pitch_ratio:i,language:ad},request:{reqid:id(),text:s,text_type:"plain",operation:"query",with_frontend:1,frontend_type:"unitTson"}};return["mp3","wav","pcm"].includes(t)||(console.warn(`Unsupported audio format: ${t}. Defaulting to mp3.`),r.audio.encoding="mp3"),new Promise(o=>{fe.post(ud,r,{headers:{...fd}}).then(a=>{if(console.log("Speech Generation Response:",{status:a.status,headers:a.headers,dataLength:a.data?a.data.byteLength:0,dataType:a.data?typeof a.data:"undefined",data:a.data}),a.data){const l=hd(a.data.data);l.byteLength>0?o(l):(console.warn("Failed to decode audio data:",{originalData:a.data,decodedBuffer:l}),o(new ArrayBuffer(0)))}else console.warn("Received invalid audio data:",{data:a.data,type:typeof a.data,length:a.data?a.data.byteLength:"N/A"}),o(new ArrayBuffer(0))}).catch(a=>{console.error("Speech Generation Error:",{message:a.message,response:a.response?{status:a.response.status,data:a.response.data?a.response.data instanceof ArrayBuffer?`ArrayBuffer(${a.response.data.byteLength} bytes)`:typeof a.response.data:"No data"}:"No response",config:a.config}),o(new ArrayBuffer(0))})})}const gd=["。","！","？","!","?"],Ft=class Ft{constructor(){N(this,"queue",[]);N(this,"runningTasks",0);N(this,"MAX_CONCURRENT",1);N(this,"DELAY_BETWEEN_CALLS",500);N(this,"accumulatedChunk","");N(this,"sentenceSequence",0);N(this,"audioQueueManager",pi.getInstance());N(this,"globalOnCompleteCallback",null)}static getInstance(){return Ft.instance||(Ft.instance=new Ft),Ft.instance}async enqueue(e){return new Promise((t,n)=>{this.queue.push(async()=>{try{const i=await e(),r=i.byteLength>0?i:new ArrayBuffer(0);return t(r),r}catch(i){throw n(i),i}}),this.processQueue()})}async processQueue(){for(;this.queue.length>0&&this.runningTasks<this.MAX_CONCURRENT;){const e=this.queue.shift();if(e){this.runningTasks++;try{await e()}catch(t){console.error("Error processing audio generation:",t)}finally{this.runningTasks--,this.queue.length>0&&await new Promise(t=>setTimeout(t,this.DELAY_BETWEEN_CALLS)),this.processQueue()}}}}async decodeAudioData(e){return new Promise((t,n)=>{const r=new Uint8Array(e).buffer,o=[()=>ce.decodeAudioData(e),()=>ce.decodeAudioData(r),async()=>{const l=await new Blob([r],{type:"audio/mp3"}).arrayBuffer();return ce.decodeAudioData(l)}];if(!e||e.byteLength===0){n(new Error("Invalid or empty audio buffer"));return}ce.state==="suspended"&&ce.resume().catch(console.error),this.attemptDecode(o).then(t).catch(n)})}async attemptDecode(e){if(e.length===0)throw new Error("All audio decoding attempts failed");try{return await e[0]()}catch(t){return console.error("Audio decoding attempt failed:",{error:t}),this.attemptDecode(e.slice(1))}}setGlobalOnCompleteCallback(e){this.globalOnCompleteCallback=e,this.audioQueueManager.setGlobalOnCompleteCallback(()=>{if(this.globalOnCompleteCallback){const t=this.globalOnCompleteCallback;this.globalOnCompleteCallback=null,t()}})}async processAudioChunk(e){this.accumulatedChunk+=e;const t=gd.find(n=>this.accumulatedChunk.includes(n));if(t){const n=this.accumulatedChunk.split(t).filter(i=>i.trim()!=="");if(n.length>0){const r=n[0]+t;let o=this.sentenceSequence;console.log(`Processing sentence ${o}: ${r}`),this.sentenceSequence++,this.accumulatedChunk=this.accumulatedChunk.replace(r,"");const a=await this.enqueue(()=>dd(r)),l=await this.decodeAudioData(a);console.log("sentenceSequence of audio playback",{sentence:r,sentenceSequence:o}),await this.audioQueueManager.processAudioInBackground(l,o)}}}async stopAudioPlayback(){this.audioQueueManager.stopAudioPlayback(),this.globalOnCompleteCallback=null}reset(){this.accumulatedChunk="",this.sentenceSequence=0,this.queue=[],this.runningTasks=0,this.globalOnCompleteCallback=null,this.audioQueueManager.stopAudioPlayback(),this.audioQueueManager.clear()}};N(Ft,"instance");let mi=Ft;const pd=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function md(s,e){const t=s.length,n=e.length,i=Array.from({length:t+1},()=>new Array(n+1).fill(0));for(let r=0;r<=t;r++)i[r][0]=r;for(let r=0;r<=n;r++)i[0][r]=r;for(let r=1;r<=t;r++)for(let o=1;o<=n;o++)s[r-1]===e[o-1]?i[r][o]=i[r-1][o-1]:i[r][o]=Math.min(i[r-1][o]+1,i[r][o-1]+1,i[r-1][o-1]+1);return i[t][n]}function yd(s,e){const t=md(s,e),n=Math.max(s.length,e.length);return 1-t/n}class bd{constructor(){N(this,"buffer","");N(this,"delimiters",["。","！","？","!","?",".",";","；"])}addChunk(e){return this.buffer+=e,this.extractCompleteSentences()}extractCompleteSentences(){const e=[];for(;;){const t=this.delimiters.reduce((i,r)=>{const o=this.buffer.indexOf(r);return o!==-1&&o<i?o:i},this.buffer.length);if(t===this.buffer.length)break;const n=this.buffer.slice(0,t+1).trim();e.push(n),this.buffer=this.buffer.slice(t+1).trimStart()}return e}getRemainingBuffer(){return this.buffer}}class wd{constructor(){N(this,"queue",[]);N(this,"isProcessing",!1)}async enqueue(e,t){this.queue.push(e),this.isProcessing||(this.isProcessing=!0,await this.processQueue(t))}async processQueue(e){for(;this.queue.length>0;){const t=this.queue.shift();t&&await this.displaySentence(t,e)}this.isProcessing=!1}async displaySentence(e,t){return new Promise(n=>{let i=0;const r=()=>{if(i<e.length){t(e[i]),i++;const o=/[\u4e00-\u9fff]/.test(e[i-1])?100:50;setTimeout(r,o)}else n()};r()})}}class xd{constructor(){N(this,"intents",{"intent.yes":["是","对","好的","可以","行","当然","好的","有的","没问题","继续","好","没错","可以","肯定","有"],"intent.no":["不","不是","不行","不要","不用","不需要","无","否","不想","没有了","停","停止","算了","没了"],"intent.start":["开始","启动","开播","开机"],"intent.stop":["停止","暂停","结束"]})}classify(e){const t=e.trim();console.log("Normalized text:",t);for(const[r,o]of Object.entries(this.intents))if(o.some(a=>t===a))return{intent:r,score:1};let n=null,i=.5;for(const[r,o]of Object.entries(this.intents)){const a=o.map(c=>yd(t,c)),l=Math.max(...a);l>=i&&(!n||l>n.score)&&(n={intent:r,score:l})}return n||{intent:"intent.unknown",score:0}}}class Xn{constructor(){N(this,"classifier");N(this,"isInitialized",de(!1));this.classifier=new xd}async initialize(){return this.isInitialized.value=!0,!0}getIntent(e){if(!this.isInitialized.value)throw new Error("NLP Manager not initialized");return this.classifier.classify(e)}}let kd=class{constructor(e,t,n,i,r){this.s_size=e.length,this.s=e,this.substring_i=t,this.result=n,this.method=i,this.instance=r}};var Ad=kd;const Ki="\\ud800-\\udfff",Cd="\\u0300-\\u036f",Sd="\\ufe20-\\ufe2f",Ed="\\u20d0-\\u20ff",vd="\\u1ab0-\\u1aff",Dd="\\u1dc0-\\u1dff",Ga=Cd+Sd+Ed+vd+Dd,Qa="\\ufe0e\\ufe0f",_d=`[${Ki}]`,Gi=`[${Ga}]`,yi="\\ud83c[\\udffb-\\udfff]",Td=`(?:${Gi}|${yi})`,Za=`[^${Ki}]`,Xa="(?:\\ud83c[\\udde6-\\uddff]){2}",Ya="[\\ud800-\\udbff][\\udc00-\\udfff]",el="\\u200d",tl=`${Td}?`,nl=`[${Qa}]?`,Fd=`(?:${el}(?:${[Za,Xa,Ya].join("|")})${nl+tl})*`,Rd=nl+tl+Fd,Od=`${Za}${Gi}?`,Pd=`(?:${[Od,Gi,Xa,Ya,_d].join("|")})`,Bd=RegExp(`[${el+Ki+Ga+Qa}]`),$d=RegExp(`${yi}(?=${yi})|${Pd+Rd}`,"g"),sl=s=>Bd.test(s),il=s=>s.match($d)||[],rl=s=>s.split(""),Nd=s=>sl(s)?il(s):rl(s);function Ld(s,e){const t=i=>i.replace(/([.*+^=!:${}()|[\]/\\])/g,"\\$1"),n=`^${e.split("*").map(t).join(".*")}$`.replace(/\?/g,".");return new RegExp(n).test(s)}function Md(s,e={}){const t=Object.keys(e);s=s?`${s}_`:"";for(let n=0;n<t.length;n+=1)`${s}${t[n]}`,e[t[n]]}var Qi={hasUnicode:sl,unicodeToArray:il,asciiToArray:rl,stringToArray:Nd,compareWildcars:Ld,loadEnvFromJson:Md};let Id=class{constructor(e){this.container=e.container||e,this.name="default"}getTokenFromWord(e){return e.startsWith("//")?{type:"comment",value:e}:["set","delete","get","inc","dec","eq","neq","gt","ge","lt","le","label","goto","jne","je"].includes(e)?{type:e,arguments:[]}:e.startsWith("$")?{type:"call",value:e.slice(1)}:{type:"reference",value:e}}compile(e){const t=[];for(let n=0;n<e.length;n+=1){const r=e[n].trim().split(" "),o=[];let a="",l;for(let c=0;c<r.length;c+=1){const u=r[c];let f=!1;l?(a=`${a} ${u}`,f=!0,u.endsWith(l)&&(l=void 0,o.push(this.getTokenFromWord(a)))):u.startsWith('"')?(a=u,f=!0,l='"',u.endsWith('"')&&(l=void 0,o.push(this.getTokenFromWord(a)))):u.startsWith("'")&&(a=u,f=!0,l="'",u.endsWith("'")&&(l=void 0,o.push(this.getTokenFromWord(a)))),f||o.push(this.getTokenFromWord(u))}t.push(o)}return t}executeCall(e,t,n,i,r){const o=this.container.getPipeline(e.value);if(!o)throw new Error(`Pipeline $${e.value} not found.`);return this.container.runPipeline(o,n,i,r+1)}executeReference(e,t,n,i,r){const o=this.container.resolvePath(t.value,n,i,r),a=[];for(let c=1;c<e.length;c+=1)a.push(this.container.resolvePathWithType(e[c].value,n,i,r));if(!o)throw new Error(`Method not found for step ${JSON.stringify(e)}`);const l=o.run||o;return typeof l=="function"?typeof o=="function"?l(i,...a):l.bind(o)(i,...a):l}doGoto(e,t){const n=t,i=n.labels[e];n.cursor=i}async executeAction(e,t,n,i,r){let o=e[0];if(o&&o.value&&o.value.startsWith("->")){if(r>0)return n;o={...o},o.value=o.value.slice(2)}switch(o.type){case"set":this.container.setValue(e[1].value,e[2]?e[2].value:void 0,t,n,i);break;case"delete":this.container.deleteValue(e[1].value,t,n,i);break;case"get":return this.container.getValue(e[1]?e[1].value:void 0,t,n,i);case"inc":this.container.incValue(e[1]?e[1].value:void 0,e[2]?e[2].value:"1",t,n,i);break;case"dec":this.container.decValue(e[1]?e[1].value:void 0,e[2]?e[2].value:"1",t,n,i);break;case"eq":this.container.eqValue(e[1]?e[1].value:void 0,e[2]?e[2].value:void 0,t,n,i);break;case"neq":this.container.neqValue(e[1]?e[1].value:void 0,e[2]?e[2].value:void 0,t,n,i);break;case"gt":this.container.gtValue(e[1]?e[1].value:void 0,e[2]?e[2].value:void 0,t,n,i);break;case"ge":this.container.geValue(e[1]?e[1].value:void 0,e[2]?e[2].value:void 0,t,n,i);break;case"lt":this.container.ltValue(e[1]?e[1].value:void 0,e[2]?e[2].value:void 0,t,n,i);break;case"le":this.container.leValue(e[1]?e[1].value:void 0,e[2]?e[2].value:void 0,t,n,i);break;case"goto":this.doGoto(e[1].value,t);break;case"jne":t.floating||this.doGoto(e[1].value,t);break;case"je":t.floating&&this.doGoto(e[1].value,t);break;case"call":return this.executeCall(o,t,n,i,r);case"reference":return this.executeReference(e,o,t,n,i)}return n}findLabels(e,t){const n=t;for(let i=0;i<e.length;i+=1){const r=e[i];r[0].type==="label"&&(n[r[1].value]=i)}}async execute(e,t,n,i){let r=t;const o={cursor:0,labels:{}};for(this.findLabels(e,o.labels);o.cursor<e.length;)r=await this.executeAction(e[o.cursor],o,r,n,i),o.cursor+=1;return r}};var jd=Id;class zd{constructor(){this.name="logger"}debug(...e){console.debug(...e)}info(...e){console.info(...e)}warn(...e){console.warn(...e)}error(...e){console.error(...e)}log(...e){console.log(...e)}trace(...e){console.trace(...e)}fatal(...e){console.error(...e)}}const Ud=new zd;var Zi=Ud;const{compareWildcars:Ws}=Qi,qd=jd,Hd=Zi;let ol=class{constructor(e=!1){this.classes={},this.factory={},this.pipelines={},this.configurations={},this.compilers={},this.cache={bestKeys:{},pipelines:{}},this.registerCompiler(qd),e||this.use(Hd)}registerCompiler(e,t){const n=new e(this);this.compilers[t||n.name]=n}addClass(e,t){this.classes[t||e.name]=e}toJSON(e){const t=e.toJSON?e.toJSON():{...e};return t.className=e.constructor.name,t}fromJSON(e,t){const n=this.classes[e.className];let i;return n?(i=new n(t),i.fromJSON?i.fromJSON(e):Object.assign(i,e)):i={...e},delete i.className,i}register(e,t,n=!0){this.cache.bestKeys={};const i=typeof t=="function",r={name:e,isSingleton:n};n?r.instance=i?new t:t:r.instance=i?t:t.constructor,this.factory[e]=r}getBestKey(e){if(this.cache.bestKeys[e]!==void 0)return this.cache.bestKeys[e];const t=Object.keys(this.factory);for(let n=0;n<t.length;n+=1)if(Ws(e,t[n]))return this.cache.bestKeys[e]=t[n],t[n];this.cache.bestKeys[e]=null}get(e,t){let n=this.factory[e];if(!n){if(this.parent)return this.parent.get(e,t);const r=this.getBestKey(e);if(r&&(n=this.factory[r]),!n)return}if(n.isSingleton)return n.instance&&n.instance.applySettings&&n.instance.applySettings(n.instance.settings,t),n.instance;const i=n.instance;return new i(t,this)}buildLiteral(e,t,n,i){return{type:"literal",subtype:e,src:t,value:n,context:i,container:this}}resolvePathWithType(e,t,n,i){const r=e.split(".");let o=r[0].trim();if(o||(o=e.startsWith(".")?"this":"context"),/^\d+$/.test(o))return this.buildLiteral("number",e,parseFloat(o),t);if(o.startsWith('"'))return this.buildLiteral("string",e,o.replace(/^"(.+(?="$))"$/,"$1"),t);if(o.startsWith("'"))return this.buildLiteral("string",e,o.replace(/^'(.+(?='$))'$/,"$1"),t);if(o==="true")return this.buildLiteral("boolean",e,!0,t);if(o==="false")return this.buildLiteral("boolean",e,!1,t);let l=t;o==="input"||o==="output"?l=n:o&&o!=="context"&&o!=="this"?l=this.get(o)||l[o]:o==="this"&&(l=i);for(let c=1;c<r.length;c+=1){const u=r[c];if((!l||!l[u])&&c<r.length-1)throw Error(`Path not found in pipeline "${e}"`);const f=l;l=l[u],typeof l=="function"&&(l=l.bind(f))}return typeof l=="function"?{type:"function",src:e,value:l,context:t,container:this}:{type:"reference",src:e,value:l,context:t,container:this}}resolvePath(e,t,n,i){const r=this.resolvePathWithType(e,t,n,i);return r&&r.value}setValue(e,t,n,i,r){const o=this.resolvePath(t,n,i,r),a=e.split("."),l=a.slice(0,-1).join("."),c=this.resolvePath(l,n,i,r);c[a[a.length-1]]=o}incValue(e,t,n,i,r){const o=this.resolvePath(t,n,i,r),a=e.split(".");e.startsWith(".")&&a.push("this");const l=a.slice(0,-1).join("."),c=this.resolvePath(l,n,i,r);c[a[a.length-1]]+=o}decValue(e,t,n,i,r){const o=this.resolvePath(t,n,i,r),a=e.split("."),l=a.slice(0,-1).join("."),c=this.resolvePath(l,n,i,r);c[a[a.length-1]]-=o}eqValue(e,t,n,i,r){const o=n,a=this.resolvePath(e,o,i,r),l=this.resolvePath(t,o,i,r);o.floating=a===l}neqValue(e,t,n,i,r){const o=n,a=this.resolvePath(e,o,i,r),l=this.resolvePath(t,o,i,r);o.floating=a!==l}gtValue(e,t,n,i,r){const o=n,a=this.resolvePath(e,o,i,r),l=this.resolvePath(t,o,i,r);o.floating=a>l}geValue(e,t,n,i,r){const o=n,a=this.resolvePath(e,o,i,r),l=this.resolvePath(t,o,i,r);o.floating=a>=l}ltValue(e,t,n,i,r){const o=n,a=this.resolvePath(e,o,i,r),l=this.resolvePath(t,o,i,r);o.floating=a<l}leValue(e,t,n,i,r){const o=n,a=this.resolvePath(e,o,i,r),l=this.resolvePath(t,o,i,r);o.floating=a<=l}deleteValue(e,t,n,i){const r=e.split("."),o=r.slice(0,-1).join("."),a=this.resolvePath(o,t,n,i);delete a[r[r.length-1]]}getValue(e,t,n,i){const o=(e||"floating").split("."),a=o.slice(0,-1).join(".");return this.resolvePath(a,t,n,i)[o[o.length-1]]}async runPipeline(e,t,n,i=0){if(i>10)throw new Error("Pipeline depth is too high: perhaps you are using recursive pipelines?");const r=typeof e=="string"?this.getPipeline(e):e;if(!r)throw new Error(`Pipeline not found ${e}`);if(!r.compiler){const o=JSON.stringify(r);this.registerPipeline(o,r,!1);const a=this.getPipeline(o);return a.compiler.execute(a.compiled,t,n,i)}return r.compiler.execute(r.compiled,t,n,i)}use(e,t,n,i=!1){let r;if(typeof e=="function"){if(e.name.endsWith("Compiler"))return this.registerCompiler(e),e.name;const l=e;r=new l({container:this})}else r=e;r.register&&r.register(this);const o=r.settings?r.settings.tag:void 0,a=t||r.name||o||e.name||r.constructor.name;return(!i||!this.get(a))&&this.register(a,r,n),a}getCompiler(e){const t=this.compilers[e];return t||(this.parent?this.parent.getCompiler(e):this.compilers.default)}buildPipeline(e,t=[]){const n=[];if(e&&e.length>0)for(let a=0;a<e.length;a+=1){const l=e[a];if(l.trim()==="$super")for(let c=0;c<t.length;c+=1)t[c].trim().startsWith("->")||n.push(t[c]);else n.push(l)}const i=!n.length||!n[0].startsWith("// compiler=")?"default":n[0].slice(12),r=this.getCompiler(i),o=r.compile(n);return{pipeline:n,compiler:r,compiled:o}}registerPipeline(e,t,n=!0){if(n||!this.pipelines[e]){this.cache.pipelines={};const i=this.getPipeline(e);this.pipelines[e]=this.buildPipeline(t,i?i.pipeline:[])}}registerPipelineForChilds(e,t,n,i=!0){this.childPipelines||(this.childPipelines={}),this.childPipelines[e]||(this.childPipelines[e]=[]),this.childPipelines[e].push({tag:t,pipeline:n,overwrite:i})}getPipeline(e){if(this.pipelines[e])return this.pipelines[e];if(this.cache.pipelines[e]!==void 0)return this.cache.pipelines[e]||void 0;const t=Object.keys(this.pipelines);for(let n=0;n<t.length;n+=1)if(Ws(e,t[n]))return this.cache.pipelines[e]=this.pipelines[t[n]],this.pipelines[t[n]];this.cache.pipelines[e]=null}registerConfiguration(e,t,n=!0){(n||!this.configurations[e])&&(this.configurations[e]=t)}getConfiguration(e){if(this.configurations[e])return this.configurations[e];const t=Object.keys(this.configurations);for(let n=0;n<t.length;n+=1)if(Ws(e,t[n]))return this.configurations[t[n]]}loadPipelinesFromString(e=""){const t=e.split(/\n|\r|\r\n/);let n="",i=[],r="";for(let o=0;o<t.length;o+=1){const a=t[o];a!==""&&(a.startsWith("# ")?(n&&(r&&!["default","pipelines"].includes(r.toLowerCase())?this.registerPipelineForChilds(r,n,i):this.registerPipeline(n,i)),r=a.slice(1).trim(),n="",i=[]):a.startsWith("## ")?(n&&(r&&!["default","pipelines"].includes(r.toLowerCase())?this.registerPipelineForChilds(r,n,i):this.registerPipeline(n,i)),n=a.slice(2).trim(),i=[]):n&&i.push(a))}n&&(r&&!["default","pipelines"].includes(r.toLowerCase())?this.registerPipelineForChilds(r,n,i):this.registerPipeline(n,i))}async start(e="main"){const t=Object.keys(this.factory);for(let n=0;n<t.length;n+=1){const i=this.factory[t[n]];i.isSingleton&&i.instance&&i.instance.start&&await i.instance.start()}this.getPipeline(e)&&await this.runPipeline(e,{},this)}};const Wd=new ol;var Ie={Container:ol,defaultContainer:Wd};const{defaultContainer:Vd}=Ie;let Jd=class bi{constructor(e=Vd){this.container=e.container||e,this.name="arrToObj"}static arrToObj(e){const t={};for(let n=0;n<e.length;n+=1)t[e[n]]=1;return t}run(e){return Array.isArray(e)?bi.arrToObj(e):(e.tokens=bi.arrToObj(e.tokens),e)}};var al=Jd;const{defaultContainer:Kd}=Ie;let Gd=class{constructor(e=Kd){this.container=e.container||e,this.name="normalize"}normalize(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}run(e){const t=e,n=t.locale||"en",i=this.container.get(`normalizer-${n}`)||this;return t.text=i.normalize(t.text,t),t}};var Xi=Gd;const{defaultContainer:Qd}=Ie,Zd=Xi;let Xd=class{constructor(e=Qd,t=!1){this.container=e.container||e,this.name="tokenize",this.shouldNormalize=t}getNormalizer(){return this.normalizer||(this.normalizer=this.container.get(`normalizer-${this.name.slice(-2)}`)||new Zd),this.normalizer}normalize(e,t){return t===void 0&&this.shouldNormalize||t===!0?this.getNormalizer().normalize(e):e}innerTokenize(e){return e.split(/[\s,.!?;:([\]'"¡¿)/]+/).filter(t=>t)}tokenize(e,t){let n;if(this.cache&&Math.abs(new Date().getTime()-this.cache.created)/36e5>1&&(this.cache=void 0),!this.cache)this.cache={created:new Date().getTime(),normalized:{},nonNormalized:{}};else if(t?Object.prototype.hasOwnProperty.call(this.cache.normalized,e)&&(n=this.cache.normalized[e]):Object.prototype.hasOwnProperty.call(this.cache.nonNormalized,e)&&(n=this.cache.nonNormalized[e]),n)return n;return n=this.innerTokenize(this.normalize(e,t),t),t?this.cache.normalized[e]=n:this.cache.nonNormalized[e]=n,n}async run(e){const t=e,n=t.locale||"en";let i=this.container.get(`tokenizer-${n}`);if(!i){const o=this.container.get("tokenizer-bert");o&&o.activeFor(n)?i=o:i=this}const r=await i.tokenize(t.text,t);return t.tokens=r.filter(o=>o),t}};var Yi=Xd;const{defaultContainer:Yd}=Ie,eg=Yi;let tg=class{constructor(e=Yd,t){this.container=e.container||e,this.cache={},this.setCurrent(""),this.dictionary=t||{before:{},after:{}}}setCurrent(e){this.current=e,this.cursor=0,this.limit=this.current.length,this.limit_backward=0,this.bra=this.cursor,this.ket=this.limit}getCurrent(){return this.current}bc(e,t){return!(e[t>>>3]&1<<(t&7))}in_grouping(e,t,n){if(this.cursor>=this.limit)return!1;let i=this.current.charCodeAt(this.cursor);return i>n||i<t||(i-=t,this.bc(e,i))?!1:(this.cursor++,!0)}in_grouping_b(e,t,n){if(this.cursor<=this.limit_backward)return!1;let i=this.current.charCodeAt(this.cursor-1);return i>n||i<t||(i-=t,this.bc(e,i))?!1:(this.cursor--,!0)}out_grouping(e,t,n){if(this.cursor>=this.limit)return!1;let i=this.current.charCodeAt(this.cursor);return i>n||i<t?(this.cursor++,!0):(i-=t,this.bc(e,i)?(this.cursor++,!0):!1)}out_grouping_b(e,t,n){if(this.cursor<=this.limit_backward)return!1;let i=this.current.charCodeAt(this.cursor-1);return i>n||i<t?(this.cursor--,!0):(i-=t,this.bc(e,i)?(this.cursor--,!0):!1)}eq_s(e,t){return typeof e=="string"&&(t=e,e=t.length),this.limit-this.cursor<e||this.current.slice(this.cursor,this.cursor+e)!=t?!1:(this.cursor+=e,!0)}eq_s_b(e,t){return typeof e=="string"&&(t=e,e=t.length),this.cursor-this.limit_backward<e||this.current.slice(this.cursor-e,this.cursor)!=t?!1:(this.cursor-=e,!0)}find_among(e,t){let n=0,i=t||e.length;const r=this.cursor,o=this.limit;let a=0,l=0,c=!1;for(;;){const h=n+(i-n>>>1);let p=0,m=a<l?a:l;var u=e[h],f;for(f=m;f<u.s_size;f++){if(r+m==o){p=-1;break}if(p=this.current.charCodeAt(r+m)-u.s.charCodeAt(f),p!=0)break;m++}if(p<0?(i=h,l=m):(n=h,a=m),i-n<=1){if(n>0||i==n||c)break;c=!0}}for(;;){var u=e[n];if(a>=u.s_size){if(this.cursor=r+u.s_size,u.method==null)return u.result;const p=u.method(u.instance);if(this.cursor=r+u.s_size,p)return u.result}if(n=u.substring_i,n<0)return 0}return-1}find_among_b(e,t){let n=0,i=t||e.length;const r=this.cursor,o=this.limit_backward;let a=0,l=0,c=!1;for(;;){const h=n+(i-n>>1);let p=0,m=a<l?a:l;var u=e[h],f;for(f=u.s_size-1-m;f>=0;f--){if(r-m==o){p=-1;break}if(p=this.current.charCodeAt(r-1-m)-u.s.charCodeAt(f),p!=0)break;m++}if(p<0?(i=h,l=m):(n=h,a=m),i-n<=1){if(n>0||i==n||c)break;c=!0}}for(;;){var u=e[n];if(a>=u.s_size){if(this.cursor=r-u.s_size,u.method==null)return u.result;const p=u.method(this);if(this.cursor=r-u.s_size,p)return u.result}if(n=u.substring_i,n<0)return 0}return-1}replace_s(e,t,n){const i=n.length-(t-e);return this.current=this.current.slice(0,e)+n+this.current.slice(t),this.limit+=i,this.cursor>=t?this.cursor+=i:this.cursor>e&&(this.cursor=e),i}slice_check(){return!(this.bra<0||this.bra>this.ket||this.ket>this.limit||this.limit>this.current.length)}slice_from(e){return this.slice_check()?(this.replace_s(this.bra,this.ket,e),!0):!1}slice_del(){return this.slice_from("")}insert(e,t,n){const i=this.replace_s(e,t,n);e<=this.bra&&(this.bra+=i),e<=this.ket&&(this.ket+=i)}slice_to(e){let t="";return this.slice_check()&&(t=this.current.slice(this.bra,this.ket)),t}stemWord(e){let t=this.cache[`.${e}`];return t==null&&(this.dictionary.before.hasOwnProperty(e)?t=this.dictionary.before[e]:(this.setCurrent(e),this.innerStem(),t=this.getCurrent(),this.dictionary.after.hasOwnProperty(t)&&(t=this.dictionary.after[t])),this.cache[`.${e}`]=t),t}stemWords(e){const t=[];for(let n=0;n<e.length;n++){const i=this.stemWord(e[n]);i&&t.push(i.trim())}return t}stem(e){return e==null?e:Array.isArray(e)?this.stemWords(e):this.stemWords([e])[0]}getTokenizer(){return this.tokenizer||(this.tokenizer=this.container.get(`tokenizer-${this.name.slice(-2)}`)||new eg),this.tokenizer}getStopwords(){return this.stopwords||(this.stopwords=this.container.get(`tokenizer-${this.name.slice(-2)}`)),this.stopwords}tokenizeAndStem(e,t=!0){let i=this.getTokenizer().tokenize(e,!0);if(!t){const r=this.getStopwords();r&&(i=r.removeStopwords(i))}return this.stemWords(i)}};var ng=tg;const{defaultContainer:sg}=Ie;let ig=class wi{constructor(e=sg){this.container=e.container||e,this.name="objToArr"}static objToArr(e){return Object.keys(e)}run(e){return e.tokens?(e.tokens=wi.objToArr(e.tokens),e):wi.objToArr(e)}};var ll=ig;const{defaultContainer:rg}=Ie;let og=class{constructor(e=rg){this.container=e.container||e,this.name="stem"}stem(e){return e}getStemmer(e){const t=e,n=t.locale||t.settings&&t.settings.locale||"en";let i=this.container.get(`stemmer-${n}`);if(!i){const r=this.container.get("stemmer-bert");r&&r.activeFor(n)?i=r:i=this}return i}async addForTraining(e){const t=this.getStemmer(e);return t.addUtterance&&await t.addUtterance(e.utterance,e.intent),e}async train(e){const t=this.getStemmer(e);return t.innerTrain&&await t.innerTrain(),e}async run(e){const t=e,n=this.getStemmer(t);return t.tokens=await n.stem(t.tokens,t),t}};var cl=og;const{defaultContainer:ag}=Ie;let lg=class{constructor(e=ag){this.container=e.container||e,this.name="removeStopwords",this.dictionary={}}build(e){for(let t=0;t<e.length;t+=1)this.dictionary[e[t]]=!0}isNotStopword(e){return!this.dictionary[e]}isStopword(e){return!!this.dictionary[e]}removeStopwords(e){return e.filter(t=>this.isNotStopword(t))}run(e){if(e.settings&&e.settings.keepStopwords===!1){const t=e,n=t.locale||"en",i=this.container.get(`stopwords-${n}`)||this;return t.tokens=i.removeStopwords(t.tokens,t).filter(r=>r),t}return e}};var ul=lg;const{defaultContainer:cg}=Ie;let ug=class{constructor(e=cg){this.container=e.container||e,this.name="timer"}start(e){return e&&(e.hrstart=new Date),e}stop(e){const t=e;if(t&&t.hrstart){const n=new Date;t.elapsed=n.getTime()-t.hrstart.getTime(),delete t.hrstart}return t}run(e){this.start(e)}};var fl=ug;const{defaultContainer:fg}=Ie;let hg=class{constructor(e={},t=fg){this.container=e.container||t,this.applySettings(this,e)}get logger(){return this.container.get("logger")}applySettings(e,t={}){const n=e||{};return Object.keys(t).forEach(i=>{n[i]===void 0&&(n[i]=t[i])}),n}toJSON(){const e=this.jsonExport||{},t={},n=Object.keys(this);for(let i=0;i<n.length;i+=1){const r=n[i];if(r!=="jsonExport"&&r!=="jsonImport"&&r!=="container"&&!r.startsWith("pipeline")){const o=e[r]===void 0?!0:e[r];if(typeof o=="function"){const a=o.bind(this)(t,this,r,this[r]);a&&(t[r]=a)}else typeof o=="boolean"?o&&(t[r]=this[r],r==="settings"&&delete t[r].container):typeof o=="string"&&(t[o]=this[r])}}return t}fromJSON(e){const t=this.jsonImport||{},n=Object.keys(e);for(let i=0;i<n.length;i+=1){const r=n[i],o=t[r]===void 0?!0:t[r];if(typeof o=="function"){const a=o.bind(this)(this,e,r,e[r]);a&&(this[r]=a)}else typeof o=="boolean"?o&&(this[r]=e[r]):typeof o=="string"&&(this[o]=e[r])}}objToValues(e,t){const n=t||Object.keys(e),i=[];for(let r=0;r<n.length;r+=1)i.push(e[n[r]]);return i}valuesToObj(e,t){const n={};for(let i=0;i<e.length;i+=1)n[t[i]]=e[i];return n}getPipeline(e){return this.container.getPipeline(e)}async runPipeline(e,t){return this.container.runPipeline(t||this.pipeline,e,this)}use(e){this.container.use(e)}};var er=hg;const{defaultContainer:dg}=Ie,gg=er;let pg=class extends gg{constructor(e={},t=void 0){super({settings:{},container:e.container||t||dg},t),this.applySettings(this.settings,e),this.applySettings(this.settings,{etag:1,memory:{}}),this.settings.tag||(this.settings.tag="storage"),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag))}read(e){return new Promise(t=>{const n={};Array.isArray(e)||(e=[e]),e.forEach(i=>{const r=this.settings.memory[i];r&&(n[i]=JSON.parse(r))}),t(n)})}saveItem(e,t){const n={...t};return n.eTag=this.settings.etag.toString(),this.settings.etag+=1,this.settings.memory[e]=JSON.stringify(n),n}write(e){return new Promise((t,n)=>{Object.keys(e).forEach(i=>{const r=e[i],o=this.settings.memory[i];if(!o||r.eTag==="*")return t(this.saveItem(i,r));const a=JSON.parse(o);return r.eTag!==a.eTag?n(new Error(`Error writing "${i}" due to eTag conflict.`)):t(this.saveItem(i,r))})})}delete(e){return new Promise(t=>{e.forEach(n=>delete this.settings.memory[n]),t()})}};var hl=pg;function mg(){return new Promise(s=>{s(void 0)})}function yg(){return new Promise((s,e)=>{e(new Error("File cannot be written in web"))})}function bg(){return!1}function wg(){}function xg(){}var kg={readFile:mg,writeFile:yg,existsSync:bg,lstatSync:wg,readFileSync:xg,name:"fs"},io={};const Ag=al,{Container:Cg}=Ie,Sg=Xi,Eg=ll,{loadEnvFromJson:vg}=Qi,Dg=cl,_g=ul,Tg=Yi,Fg=fl,Rg=Zi,Og=hl,Pg=kg;function Bg(s,e){s.loadPipelinesFromString(e)}function xi(s,e){if(typeof s=="string")return s.startsWith("$")?io[`${e}${s.slice(1)}`]||io[s.slice(1)]:s;if(Array.isArray(s))return s.map(t=>xi(t,e));if(typeof s=="object"){const t=Object.keys(s),n={};for(let i=0;i<t.length;i+=1)n[t[i]]=xi(s[t[i]],e);return n}return s}function $g(s,e,t,n,i,r){const o=s||{},a=t||new Cg(n);a.parent=r,n||(a.register("fs",Pg),a.use(Ag),a.use(Sg),a.use(Eg),a.use(Dg),a.use(_g),a.use(Tg),a.use(Fg),a.use(Rg),a.use(Og));const l=o;o.env&&vg(n,o.env);let c;if(c=l,c=xi(c,n?`${n}_`:""),c.settings){const u=Object.keys(c.settings);for(let f=0;f<u.length;f+=1)a.registerConfiguration(u[f],c.settings[u[f]],!0)}if(c.use)for(let u=0;u<c.use.length;u+=1){const f=c.use[u];Array.isArray(f)?a.register(f[0],f[1]):a.use(f)}if(c.terraform)for(let u=0;u<c.terraform.length;u+=1){const f=c.terraform[u],h=a.get(f.className);a.register(f.name,h,!0)}if(c.childs&&(a.childs=c.childs),i)for(let u=0;u<i.length;u+=1){const f=i[u];a.registerPipeline(f.tag,f.pipeline,f.overwrite)}return c.pipelines&&Bg(a,c.pipelines),a}var dl=$g;function Ng(){function s(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return`${s()+s()}-${s()}-${s()}-${s()}-${s()}${s()}${s()}`}var Lg=Ng;const Mg=dl;class Ig{constructor(){this.containers={}}getContainer(e){return this.containers[e||"default"]}async createContainer(e,t,n,i,r,o){const a=n===void 0?!0:n;if(typeof e!="string"&&(t=e,e=""),t||(e==="default"||e==="")&&(t="conf.json"),!this.containers[e]){const l=Mg(t,a,void 0,i,o);l.name=e,this.containers[e]=l,l.dock=this,l.parent=r,await l.start(),l.childs&&await this.buildChilds(l)}return this.containers[e]}async buildChilds(e){if(e&&e.childs){const t=Object.keys(e.childs),n={};for(let i=0;i<t.length;i+=1){const r=e.childs[t[i]];r.isChild=!0,r.pathPipeline||(r.pathPipeline=`${t[i]}_pipeline.md`),n[t[i]]=await this.createContainer(t[i],r,!1,t[i],e,e.childPipelines?e.childPipelines[t[i]]:void 0)}e.childs=n}}async terraform(e,t=!0){return await this.createContainer("default",e,t,"")}start(e,t=!0){return this.terraform(e,t)}}const jg=new Ig;var zg=jg;const{defaultContainer:Ug}=Ie,qg=er;let Hg=class extends qg{constructor(e={},t=void 0){super({settings:{},container:e.container||t||Ug},t),this.applySettings(this.settings,e),this.settings.tag||(this.settings.tag="context"),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag))}getStorage(){const e=this.container.get(this.settings.storageName||"storage");if(!e)throw new Error("Storage not found");return e}getContext(e){return this.getStorage().read(`${this.settings.tag}-${e}`)}setContext(e,t){const n=this.getStorage(),i={[e]:t};return n.write(i)}async getContextValue(e,t){const n=await this.getContext(e);return n?n[t]:void 0}async setContextValue(e,t,n){let i=await this.getContext(e);return i||(i={}),i[t]=n,this.setContext(e,i)}};var Wg=Hg;const Vg=Ad,Jg=al,Kg=ng,Gg=dl,Qg=er,{Container:Zg,defaultContainer:Xg}=Ie,Yg=Xi,ep=ll,tp=cl,np=ul,sp=Yi,ip=fl,rp=Zi,{hasUnicode:op,unicodeToArray:ap,asciiToArray:lp,stringToArray:cp,compareWildcars:up,loadEnv:fp}=Qi,hp=hl,dp=Lg,ki=zg,gp=Wg;async function pp(s,e){return await ki.start(s,e),ki}var Fe={Among:Vg,ArrToObj:Jg,BaseStemmer:Kg,containerBootstrap:Gg,Clonable:Qg,Container:Zg,defaultContainer:Xg,hasUnicode:op,unicodeToArray:ap,asciiToArray:lp,stringToArray:cp,compareWildcars:up,loadEnv:fp,Normalizer:Yg,ObjToArr:ep,Stemmer:tp,Stopwords:np,Tokenizer:sp,Timer:ip,logger:rp,MemoryStorage:hp,uuid:dp,dock:ki,Context:gp,dockStart:pp};const fn=[],ro=[];function mp(s,e){s.length>e.length&&([s,e]=[e,s]);let t=s.length-1,n=e.length-1;for(;t>0&&s.charCodeAt(t)===e.charCodeAt(n);)t-=1,n-=1;t+=1,n+=1;let i=0;for(;i<t&&s.charCodeAt(i)===e.charCodeAt(i);)i+=1;if(t-=i,n-=i,t===0)return n;for(let u=0;u<t;u+=1)ro[u]=s.charCodeAt(i+u),fn[u]=u+1;let r,o,a,l,c=0;for(;c<n;){r=e.charCodeAt(i+c),a=c,c+=1,o=c;for(let u=0;u<t;u+=1)l=a+(r!==ro[u])|0,a=fn[u],a>o?fn[u]=l>o?o+1:l:fn[u]=l>a?a+1:l,o=fn[u]}return o}var gl=mp;const yp=gl;function bp(s,e,t=!1){return t&&(s=s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),s===e?0:yp(s,e)}var pl=bp;let wp=class{constructor(e){this.container=e}getTokens(e,t="en"){if(typeof e=="string"){const n=this.container&&this.container.get(`tokenizer-${t}`);return n?n.tokenize(e,!0):e.split(" ")}return e}termFreqMap(e,t){const n=this.getTokens(e,t),i={};return n.forEach(r=>{i[r]=(i[r]||0)+1}),i}addKeysToDict(e,t){Object.keys(e).forEach(n=>{t[n]=!0})}termFreqMapToVector(e,t){const n=[];return Object.keys(t).forEach(i=>{n.push(e[i]||0)}),n}vecDotProduct(e,t){let n=0;for(let i=0;i<e.length;i+=1)n+=e[i]*t[i];return n}vecMagnitude(e){let t=0;for(let n=0;n<e.length;n+=1)t+=e[n]*e[n];return Math.sqrt(t)}cosineSimilarity(e,t){return this.vecDotProduct(e,t)/(this.vecMagnitude(e)*this.vecMagnitude(t))}getTermFreqVectors(e,t,n){const i=this.termFreqMap(e,n),r=this.termFreqMap(t,n);if(!Object.keys(i).length||!Object.keys(r).length)return 0;const o={};return this.addKeysToDict(i,o),this.addKeysToDict(r,o),[this.termFreqMapToVector(i,o),this.termFreqMapToVector(r,o)]}similarity(e,t,n){if(e===t)return 1;const[i,r]=this.getTermFreqVectors(e,t,n);return this.cosineSimilarity(i,r)}};var xp=wp;const kp=pl;let Ap=class{constructor(e){this.settings=e||{},this.minLength=this.settings.minLength||4,this.settings.features?this.setFeatures(this.settings.features):(this.features={},this.featuresByLength={})}setFeatures(e){this.features=e,this.featuresByLength={},this.featuresList=Object.keys(this.features);for(let t=0;t<this.featuresList.length;t+=1){const n=this.featuresList[t],{length:i}=n;this.featuresByLength[i]||(this.featuresByLength[i]=[]),this.featuresByLength[i].push(n)}}checkToken(e,t){if(this.features[e]||e.length<this.minLength)return e;let n,i=1/0;for(let r=e.length-t-1;r<e.length+t;r+=1){const o=this.featuresByLength[r+1];if(o)for(let a=0;a<o.length;a+=1){const l=o[a],c=kp(e,l);if(c<=t){if(c<i)n=l,i=c;else if(c===i&&n){const u=Math.abs(n.length-e.length),f=Math.abs(l.length-e.length);(u>f||u===f&&this.features[l]>this.features[n])&&(n=l,i=c)}}}}return n||e}check(e,t=1){if(!Array.isArray(e)){const i=Object.keys(e),r=this.check(i,t),o={};for(let a=0;a<r.length;a+=1)o[r[a]]=e[i[a]];return o}const n=[];for(let i=0;i<e.length;i+=1)n.push(this.checkToken(e[i],t));return n}};var Cp=Ap;const Sp=gl,Ep=pl,vp=xp,Dp=Cp;var ml={leven:Sp,CosineSimilarity:vp,similarity:Ep,SpellCheck:Dp};const{Clonable:_p,compareWildcars:Tp}=Fe,{SpellCheck:Fp}=ml;let Rp=class extends _p{constructor(e={},t){super({settings:{},container:e.container||t},t),this.applySettings(this.settings,e),this.applySettings(this.settings,{locale:"en"}),this.settings.tag||(this.settings.tag=`nlu-${this.settings.locale}`),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.applySettings(this,{pipelinePrepare:this.getPipeline(`${this.settings.tag}-prepare`),pipelineTrain:this.getPipeline(`${this.settings.tag}-train`),pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)}),this.spellCheck=new Fp(this.settings)}registerDefault(){this.container.registerConfiguration("nlu-??",{keepStopwords:!0,nonefeatureValue:1,nonedeltaMultiplier:1.2,spellCheck:!1,spellCheckDistance:1,filterZeros:!0,log:!0},!1),this.container.registerPipeline("nlu-??-train",[".prepareCorpus",".addNoneFeature",".innerTrain"],!1)}async defaultPipelinePrepare(e){let t;if(this.cache&&Math.abs(new Date().getTime()-this.cache.created)/36e5>1&&(this.cache.results={},this.cache.created=new Date().getTime()),!this.cache)this.cache={created:new Date().getTime(),results:{},normalize:this.container.get("normalize"),tokenize:this.container.get("tokenize"),removeStopwords:this.container.get("removeStopwords"),stem:this.container.get("stem"),arrToObj:this.container.get("arrToObj")};else if(this.cache.results[e.settings.locale]&&(t=this.cache.results[e.settings.locale][e.text||e.utterance],t))return t;let n=e;return n=this.cache.normalize.run(n),n=await this.cache.tokenize.run(n),n=this.cache.removeStopwords.run(n),n=await this.cache.stem.run(n),n=this.cache.arrToObj.run(n),t=n.tokens,this.cache.results[e.settings.locale]||(this.cache.results[e.settings.locale]={}),this.cache.results[e.settings.locale][e.text||e.utterance]=t,t}async defaultPipelineProcess(e){let t=await this.prepare(e);return t=await this.doSpellCheck(t),t=await this.textToFeatures(t),t=await this.innerProcess(t),t=await this.filterNonActivated(t),t=await this.normalizeClassifications(t),t}async prepare(e,t){const n=t||this.settings;if(typeof e=="string"){const i={locale:this.settings.locale,text:e,settings:n};return this.pipelinePrepare?this.runPipeline(i,this.pipelinePrepare):this.defaultPipelinePrepare(i)}if(typeof e=="object"){if(Array.isArray(e)){const r=[];for(let o=0;o<e.length;o+=1)r.push(await this.prepare(e[o],n));return r}let i=n.fieldNameSrc?e[n.fieldNameSrc]:e.texts||e.utterances;if(!i&&typeof i!="string"&&(typeof e.text=="string"?i=e.text:typeof e.utterance=="string"&&(i=e.utterance)),i||typeof i=="string"){const r=await this.prepare(i,n);return{[n.fieldNameTgt||"tokens"]:r,...e}}}throw new Error(`Error at nlu.prepare: expected a text but received ${e}`)}async doSpellCheck(e,t){const n=this.applySettings(t||{},this.settings);let i=e.settings.spellCheck===void 0?void 0:e.settings.spellCheck,r=e.settings.spellCheckDistance===void 0?void 0:e.settings.spellCheckDistance;if(i===void 0&&(i=n.spellCheck===void 0?void 0:n.spellCheck),r===void 0&&(r=n.spellCheckDistance===void 0?1:n.spellCheckDistance),i){const o=this.spellCheck.check(e.tokens,r);e.tokens=o}return e}async prepareCorpus(e){this.features={},this.intents={},this.intentFeatures={};const t=e,{corpus:n}=t,i=[];for(let o=0;o<n.length;o+=1){const{intent:a}=n[o],l={input:await this.prepare(n[o].utterance,t.settings),output:{[a]:1}},c=Object.keys(l.input);Object.prototype.hasOwnProperty.call(this.intentFeatures,a)||(this.intentFeatures[a]={});for(let u=0;u<c.length;u+=1)this.features[c[u]]=1,this.intentFeatures[a][c[u]]=1;this.intents[a]=1,i.push(l)}const r=Object.keys(this.intentFeatures);this.featuresToIntent={};for(let o=0;o<r.length;o+=1){const a=r[o],l=Object.keys(this.intentFeatures[a]);for(let c=0;c<l.length;c+=1){const u=l[c];Object.prototype.hasOwnProperty.call(this.featuresToIntent,u)||(this.featuresToIntent[u]=[]),this.featuresToIntent[u].push(a)}}return this.spellCheck.setFeatures(this.features),this.numFeatures=Object.keys(this.features).length,this.numIntents=Object.keys(this.intents).length,t.corpus=i,t}addNoneFeature(e){const{corpus:t}=e;return e.settings&&e.settings.useNoneFeature&&t.push({input:{nonefeature:1},output:{None:1}}),e}convertToArray(e){const t=e,{classifications:n}=t;if(n){this.intentsArr||(this.intents?(this.intentsArr=Object.keys(this.intents),this.intents.None||this.intentsArr.push("None")):this.intentsArr=Object.keys(n));const i=this.intentsArr,r=[];for(let o=0;o<i.length;o+=1){const a=i[o],l=n[a];l!==void 0&&(l>0||!t.settings.filterZeros)&&r.push({intent:a,score:l})}r.length||r.push({intent:"None",score:1}),t.classifications=r.sort((o,a)=>a.score-o.score)}return t}someSimilar(e,t){for(let n=0;n<t.length;n+=1)if(e[t[n]])return!0;return!1}matchAllowList(e,t){for(let n=0;n<t.length;n+=1)if(Tp(e,t[n]))return!0;return!1}intentIsActivated(e,t,n){if(n){if(Array.isArray(n))return this.matchAllowList(e,n);if(!n[e])return!1}const i=this.intentFeatures[e];if(!i)return!1;const r=Object.keys(t);for(let o=0;o<r.length;o+=1)if(i[r[o]])return!0;return!1}filterNonActivated(e){if(this.intentFeatures&&e.classifications){const t=e.classifications.map(i=>i.intent);let n=!1;for(let i=0;i<t.length;i+=1){const r=t[i];r!=="None"&&(this.intentIsActivated(r,e.tokens,e.settings.allowList)||(e.classifications[i].score=0,n=!0))}n&&e.classifications.sort((i,r)=>r.score-i.score)}return e}normalizeClassifications(e){const t=e,{classifications:n}=t;if(n){let i=0;for(let r=0;r<n.length;r+=1)n[r].score**=2,i+=n[r].score;if(i>0)for(let r=0;r<n.length;r+=1)n[r].score/=i}else t.classifications=t.nluAnswer;return t}textToFeatures(e){const t=e,{tokens:n}=t,i=Object.keys(n);let r=0;const o={};for(let c=0;c<i.length;c+=1){const u=i[c];u==="nonefeature"?n[u]=this.nonefeatureValue:!this.features||!this.features[u]?r+=1:o[u]=n[u]}let a=t.settings.nonedeltaValue===void 0?this.numIntents/this.numFeatures:this.settings.nonedeltaValue,l=0;for(let c=0;c<r;c+=1)l+=a,a*=this.settings.nonedeltaMultiplier;return t.settings&&t.settings.useNoneFeature&&l&&(o.nonefeature=l),t.tokens=o,t}async innerTrain(){throw new Error("This method should be implemented by child classes")}async train(e,t){const n={corpus:e,settings:this.applySettings(t,this.settings)};return this.runPipeline(n,this.pipelineTrain)}async getExplanation(e,t){if(!t)return;const n=await this.container.get("normalize").run(e),i=await this.container.get("tokenize").run(n),{tokens:r}=i,a=(await this.container.get("stem").run(i)).tokens,l=[];l.push({token:"",stem:"##bias",weight:t.bias});for(let c=0;c<r.length;c+=1){const u=a[c];l.push({token:r[c],stem:u,weight:t.weights[u]})}return l}async process(e,t){const n={text:e,settings:this.applySettings(t||{},this.settings)};let i;if(this.pipelineProcess?i=await this.runPipeline(n,this.pipelineProcess):i=await this.defaultPipelineProcess(n),Array.isArray(i.classifications)){const r=n.settings.returnExplanation?await this.getExplanation(n,i.explanation):void 0;return{classifications:i.classifications,entities:void 0,explanation:r}}return i.intents&&(i.classifications=i.intents,delete i.intents),i}toJSON(){const e={settings:{...this.settings},features:this.features,intents:this.intents,intentFeatures:this.intentFeatures,featuresToIntent:this.featuresToIntent};return delete e.settings.container,e}fromJSON(e){this.applySettings(this.settings,e.settings),this.features=e.features||{},this.intents=e.intents||{},this.intentsArr=Object.keys(e.intents),this.featuresToIntent=e.featuresToIntent||{},this.intentFeatures=e.intentFeatures||{},this.spellCheck.setFeatures(this.features),this.numFeatures=Object.keys(this.features).length,this.numIntents=Object.keys(this.intents).length}};var yl=Rp;let Op=class{constructor(e,t="input"){this.dict={},this.items=[],e&&this.buildFromData(e,t)}add(e){this.dict[e]===void 0&&(this.dict[e]=this.items.length,this.items.push(e))}buildFromData(e,t){for(let n=0;n<e.length;n+=1){const i=e[n][t],r=Object.keys(i);for(let o=0;o<r.length;o+=1)this.add(r[o])}}prepare(e){const t=Object.keys(e),n=[],i={};for(let r=0;r<t.length;r+=1){const o=t[r];this.dict[o]!==void 0&&(n.push(this.dict[o]),i[this.dict[o]]=e[o])}return{keys:n,data:i}}};var Pp=Op;const jn=Pp;let Bp=class{constructor(e,t){if(e){this.inputLookup=new jn,this.outputLookup=new jn;for(let n=0;n<e.length;n+=1)this.inputLookup.add(e[n]);for(let n=0;n<t.length;n+=1)this.outputLookup.add(t[n]);this.numInputs=this.inputLookup.items.length,this.numOutputs=this.outputLookup.items.length}}build(e){this.inputLookup=new jn(e,"input"),this.outputLookup=new jn(e,"output"),this.numInputs=this.inputLookup.items.length,this.numOutputs=this.outputLookup.items.length;const t=[];for(let n=0;n<e.length;n+=1){const{input:i,output:r}=e[n];t.push({input:this.inputLookup.prepare(i),output:this.outputLookup.prepare(r)})}return t}transformInput(e){return this.inputLookup.prepare(e)}};var $p=Bp;const oo=$p,Vs={iterations:2e4,errorThresh:5e-5,deltaErrorThresh:1e-6,learningRate:.6,momentum:.5,alpha:.07,log:!1};let Np=class{constructor(e={}){this.settings=e,this.applySettings(this.settings,Vs),this.settings.log===!0?this.logFn=(t,n)=>console.log(`Epoch ${t.iterations} loss ${t.error} time ${n}ms`):typeof this.settings.log=="function"&&(this.logFn=this.settings.log)}applySettings(e={},t={}){return Object.keys(t).forEach(n=>{e[n]===void 0&&(e[n]=t[n])}),e}initialize(e,t){this.perceptronsByName={},this.perceptrons=[],this.outputs={},this.numPerceptrons=t.length;for(let n=0;n<t.length;n+=1){const i=t[n];this.outputs[i]=0;const r={name:i,id:n,weights:new Float32Array(e),changes:new Float32Array(e),bias:0};this.perceptrons.push(r),this.perceptronsByName[i]=r}}runInputPerceptron(e,t){const n=t.keys.reduce((i,r)=>i+t.data[r]*e.weights[r],e.bias);return n<=0?0:this.settings.alpha*n}runInput(e){for(let t=0;t<this.numPerceptrons;t+=1)this.outputs[this.perceptrons[t].name]=this.runInputPerceptron(this.perceptrons[t],e);return this.outputs}get isRunnable(){return!!this.numPerceptrons}run(e){return this.numPerceptrons?this.runInput(this.lookup.transformInput(e)):void 0}prepareCorpus(e){return this.lookup=new oo,this.lookup.build(e)}verifyIsInitialized(){this.perceptrons||this.initialize(this.lookup.numInputs,this.lookup.outputLookup.items)}trainPerceptron(e,t){const{alpha:n,momentum:i}=this.settings,{changes:r,weights:o}=e;let a=0;for(let l=0;l<t.length;l+=1){const{input:c,output:u}=t[l],f=this.runInputPerceptron(e,c),p=(u.data[e.id]||0)-f;if(p){a+=p**2;const m=(f>0?1:n)*p*this.decayLearningRate;for(let w=0;w<c.keys.length;w+=1){const k=c.keys[w],F=m*c.data[k]+i*r[k];r[k]=F,o[k]+=F}e.bias+=m}}return a}train(e){if(!e||!e.length)return{};if(e[e.length-1].input.nonefeature!==void 0){const o={};for(let c=0;c<e.length-1;c+=1){const u=Object.keys(e[c].output);for(let f=0;f<u.length;f+=1)o[u[f]]||(o[u[f]]=1)}const a=e[e.length-1],l=Object.keys(o);for(let c=0;c<l.length;c+=1)a.output[l[c]]=1e-7}const n=this.prepareCorpus(e);this.status||(this.status={error:1/0,deltaError:1/0,iterations:0}),this.verifyIsInitialized();const i=this.settings.errorThresh,r=this.settings.deltaErrorThresh;for(;this.status.iterations<this.settings.iterations&&this.status.error>i&&this.status.deltaError>r;){const o=new Date;this.status.iterations+=1,this.decayLearningRate=this.settings.learningRate/(1+.001*this.status.iterations);const a=this.status.error;this.status.error=0;for(let c=0;c<this.numPerceptrons;c+=1)this.status.error+=this.trainPerceptron(this.perceptrons[c],n);this.status.error/=this.numPerceptrons*n.length,this.status.deltaError=Math.abs(this.status.error-a);const l=new Date;this.logFn&&this.logFn(this.status,l.getTime()-o.getTime())}return this.status}explain(e,t){const n=this.lookup.transformInput(e),i={},r=this.lookup.outputLookup.dict[t];if(r===void 0)return{};for(let o=0;o<n.keys.length;o+=1){const a=n.keys[o];i[this.lookup.inputLookup.items[a]]=this.perceptrons[r].weights[a]}return{weights:i,bias:this.perceptrons[r].bias}}toJSON(){const e={},t=Object.keys(this.settings);for(let o=0;o<t.length;o+=1){const a=t[o];this.settings[a]!==Vs[a]&&(e[a]=this.settings[a])}if(!this.lookup)return{settings:e};const n=this.lookup.inputLookup.items,i=this.lookup.outputLookup.items,r=[];for(let o=0;o<this.perceptrons.length;o+=1){const a=this.perceptrons[o],l=[...a.weights,a.bias];r.push(l)}return{settings:e,features:n,intents:i,perceptrons:r}}fromJSON(e){if(this.settings=this.applySettings({...Vs,...e.settings}),e.features){this.lookup=new oo(e.features,e.intents),this.initialize(e.features.length,e.intents);for(let t=0;t<this.perceptrons.length;t+=1){const n=this.perceptrons[t],i=e.perceptrons[t];n.bias=i[i.length-1];for(let r=0;r<e.features.length;r+=1)n.weights[r]=i[r]}}}};var Lp=Np;const Mp=Lp;var Ip={NeuralNetwork:Mp};const{NeuralNetwork:ao}=Ip,jp=yl;class tr extends jp{async innerTrain(e){const t=e;return this.neuralNetwork=new ao(t.settings,this.container),t.status=await this.neuralNetwork.train(t.corpus),t}innerProcess(e){const t=e;t.classifications=this.neuralNetwork?this.neuralNetwork.run(t.tokens)||{None:1}:{None:1},this.convertToArray(t);const{intent:n}=t.classifications[0];return t.settings&&t.settings.returnExplanation&&n&&this.neuralNetwork&&n!=="None"&&(t.explanation=this.neuralNetwork.explain(t.tokens,n)),t}registerDefault(){super.registerDefault(),this.container.register("NeuralNlu",tr,!1)}toJSON(){const e=super.toJSON();return e.neuralNetwork=this.neuralNetwork?this.neuralNetwork.toJSON():void 0,e}fromJSON(e){super.fromJSON(e),e.neuralNetwork&&(this.neuralNetwork=new ao,this.neuralNetwork.fromJSON(e.neuralNetwork))}}var zp=tr;const{Clonable:Up,compareWildcars:qp}=Fe,He="master_domain";let Hp=class extends Up{constructor(e={},t){super({settings:{},container:e.container||t},t),this.applySettings(this.settings,e),this.applySettings(this.settings,{locale:"en"}),this.settings.tag||(this.settings.tag=`domain-manager-${this.settings.locale}`),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.domains={},this.addDomain(He),this.stemDict={},this.intentDict={},this.sentences=[],this.applySettings(this,{pipelineTrain:this.getPipeline(`${this.settings.tag}-train`),pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)})}registerDefault(){this.container.registerConfiguration("domain-manager-??",{nluByDomain:{default:{className:"NeuralNlu",settings:{}}},trainByDomain:!1,useStemDict:!0},!1),this.container.registerPipeline("domain-manager-??-train",[".trainStemmer",".generateCorpus",".fillStemDict",".innerTrain","output.status"],!1)}getDomainInstance(e){this.settings.nluByDomain||(this.settings.nluByDomain={});const t=this.settings.nluByDomain[e]||this.settings.nluByDomain.default||{className:"NeuralNlu",settings:{}};return this.container.get(t.className||"NeuralNlu",this.applySettings({locale:this.settings.locale},t.settings||{}))}addDomain(e){return this.domains[e]||(this.domains[e]=this.getDomainInstance(e)),this.domains[e]}removeDomain(e){delete this.domains[e]}async generateStemKey(e){let t;return typeof e!="string"?t=e:t=await(await this.prepare({utterance:e})).stems,Array.isArray(t)||(t=Object.keys(t)),t.slice().sort().join()}add(e,t,n){n?this.sentences.push({domain:e,utterance:t,intent:n}):this.sentences.push({domain:He,utterance:e,intent:t})}getSentences(){return this.sentences}remove(e,t,n){const i=n?e:He,r=n?t:e,o=n||t;for(let a=0;a<this.sentences.length;a+=1){const l=this.sentences[a];if(l.domain===i&&l.utterance===r&&l.intent===o)return this.sentences.splice(a,1),!0}return!1}async trainStemmer(e){const t=e;this.cache||(this.cache={stem:this.container.get("stem")});for(let n=0;n<this.sentences.length;n+=1){const r={...this.sentences[n],...t};await this.cache.stem.addForTraining(r)}return await this.cache.stem.train(t),t}innerGenerateCorpus(e){this.intentDict={};const t={};t[He]=[];for(let n=0;n<this.sentences.length;n+=1){const i=this.sentences[n];this.intentDict[i.intent]=i.domain;const r=e||i.domain;t[r]||(t[r]=[]),t[r].push({utterance:i.utterance,intent:i.intent}),e||t[He].push({utterance:i.utterance,intent:i.domain})}return t}async generateCorpus(e){const t=e;return t.corpus=this.innerGenerateCorpus(this.settings.trainByDomain?void 0:He),t}async prepare(e){const t=e,n=typeof t=="string",i=n?t:t.utterance,o=this.addDomain(He).prepare(i);return n?o:(t.stems=o,t)}async fillStemDict(e){this.stemDict={};for(let t=0;t<this.sentences.length;t+=1){const{utterance:n,intent:i,domain:r}=this.sentences[t],o=await this.generateStemKey(n);(!o||o==="")&&this.container.get("logger").warn(`This utterance: "${n}" contains only stop words`),this.stemDict[o]={intent:i,domain:r}}return e}async innerTrain(e){const t=e,{corpus:n}=t,i=Object.keys(n),r={};for(let o=0;o<i.length;o+=1){const a=this.addDomain(i[o]),l={useNoneFeature:this.settings.useNoneFeature};e.settings&&e.settings.log!==void 0&&(l.log=e.settings.log);const c=await a.train(n[i[o]],l);r[i[o]]=c.status}return t.status=r,t}async train(e){const t={domainManager:this,settings:e||this.settings};return this.runPipeline(t,this.pipelineTrain)}matchAllowList(e,t){for(let n=0;n<t.length;n+=1)if(qp(e,t[n]))return!0;return!1}async classifyByStemDict(e,t,n){const i=await this.generateStemKey(e),r=this.stemDict[i];if(r&&(!t||r.domain===t)){if(n&&!this.matchAllowList(r.intent,n))return;const o=[];o.push({intent:r.intent,score:1});const a=Object.keys(this.intentDict);for(let l=0;l<a.length;l+=1)a[l]!==r.intent&&o.push({intent:a[l],score:0});return{domain:r.domain,classifications:o}}}async innerClassify(e,t){const n=e;if(this.applySettings({...n.settings},this.settings).useStemDict){const o=await this.classifyByStemDict(n.utterance,t,e.settings?e.settings.allowList:void 0);if(o)return n.classification=o,n.explanation=[{token:"",stem:"##exact",weight:1}],n}if(t){const o=this.domains[t];if(!o)return n.classification={domain:"default",classifications:[{intent:"None",score:1}]},n;const a=await o.process(n.utterance,n.settings||this.settings);let l;Array.isArray(a)?l=a:(l=a.classifications,n.nluAnswer=a);let c;return t===He?l&&l.length?c=this.intentDict[l[0].intent]:c=He:c=t,n.classification={domain:c,classifications:l},n}let r=He;if(n.settings.trainByDomain===void 0&&this.settings.trainByDomain||n.settings.trainByDomain){let a=await this.domains[He].process(n.utterance);if(a.classifications&&(a=a.classifications),Object.keys(this.domains).length===1)return n.classification={domain:"default",classifications:a},n;if(r=a[0].intent,r==="None")return n.classification={domain:"default",classifications:[{intent:"None",score:1}]},n}return this.innerClassify(n,r)}async defaultPipelineProcess(e){return(await this.innerClassify(e)).classification}async process(e,t){const n=typeof e=="string"?{utterance:e,settings:t||this.settings}:e;return this.pipelineProcess?this.runPipeline(n,this.pipelineProcess):this.defaultPipelineProcess(n)}toJSON(){const e={settings:this.settings,stemDict:this.stemDict,intentDict:this.intentDict,sentences:this.sentences,domains:{}};delete e.settings.container;const t=Object.keys(this.domains);for(let n=0;n<t.length;n+=1)e.domains[t[n]]=this.domains[t[n]].toJSON();return e}fromJSON(e){this.applySettings(this.settings,e.settings),this.stemDict=e.stemDict,this.intentDict=e.intentDict,this.sentences=e.sentences;const t=Object.keys(e.domains);for(let n=0;n<t.length;n+=1)this.addDomain(t[n]).fromJSON(e.domains[t[n]])}};var bl=Hp;const Wp=[["ar","arb","Arabic"],["bn","ben","Bengali"],["ca","cat","Catalan"],["cs","ces","Czech"],["da","dan","Danish"],["de","deu","German"],["el","ell","Greek"],["en","eng","English"],["eu","eus","Basque"],["fa","fas","Persian"],["fi","fin","Finnish"],["fr","fra","French"],["ga","gle","Irish"],["gl","glg","Galician"],["hi","hin","Hindi"],["hu","hun","Hungarian"],["hy","hye","Armenian"],["id","ind","Indonesian"],["it","ita","Italian"],["ja","jpn","Japanese"],["ko","kor","Korean"],["lt","lit","Lithuanian"],["ne","nep","Nepali"],["nl","nld","Dutch"],["no","nor","Norwegian"],["pl","pol","Polish"],["pt","por","Portuguese"],["ro","ron","Romanian"],["ru","rus","Russian"],["sr","srp","Serbian"],["sl","slv","Slovenian"],["es","spa","Spanish"],["sv","swe","Swedish"],["ta","tam","Tamil"],["tl","tgl","Tagalog"],["th","tha","Thai"],["tr","tur","Turkish"],["uk","ukr","Ukrainian"],["zh","cmn","Chinese"]],Vp={spa:"",eng:"",por:"",ind:"",fra:"",deu:"",ita:"",tur:"",nld:"",tgl:"",hun:"",ces:"",swe:"",fin:"",dan:"",cat:"",glg:"",slv:""},Jp={rus:"",ukr:""},Kp={arb:"",fas:""},Gp={hin:""},Qp={},Zp={},Xp={Latin:Vp,Cyrillic:Jp,Arabic:Kp,Devanagari:Gp,Ethiopic:Qp,Hebrew:Zp},zn=Wp,tt=Xp,wl={cmn:/[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DB5\u4E00-\u9FCC\uF900-\uFA6D\uFA70-\uFAD9]|[\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/g,Latin:/[A-Za-z\xAA\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02E0-\u02E4\u1D00-\u1D25\u1D2C-\u1D5C\u1D62-\u1D65\u1D6B-\u1D77\u1D79-\u1DBE\u1E00-\u1EFF\u2071\u207F\u2090-\u209C\u212A\u212B\u2132\u214E\u2160-\u2188\u2C60-\u2C7F\uA722-\uA787\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA7FF\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uFB00-\uFB06\uFF21-\uFF3A\uFF41-\uFF5A]/g,Cyrillic:/[\u0400-\u0484\u0487-\u052F\u1D2B\u1D78\u2DE0-\u2DFF\uA640-\uA69D\uA69F]/g,Arabic:/[\u0600-\u0604\u0606-\u060B\u060D-\u061A\u061E\u0620-\u063F\u0641-\u064A\u0656-\u065F\u066A-\u066F\u0671-\u06DC\u06DE-\u06FF\u0750-\u077F\u08A0-\u08B2\u08E4-\u08FF\uFB50-\uFBC1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFD\uFE70-\uFE74\uFE76-\uFEFC]|\uD803[\uDE60-\uDE7E]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]/g,ben:/[\u0980-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FB]/g,Devanagari:/[\u0900-\u0950\u0953-\u0963\u0966-\u097F\uA8E0-\uA8FB]/g,jpn:/[\u3041-\u3096\u309D-\u309F]|\uD82C\uDC01|\uD83C\uDE00|[\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\uFF66-\uFF6F\uFF71-\uFF9D]|\uD82C\uDC00/g,kor:/[\u1100-\u11FF\u302E\u302F\u3131-\u318E\u3200-\u321E\u3260-\u327E\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/g,tel:/[\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C78-\u0C7F]/g,tam:/[\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA]/g,guj:/[\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1]/g,kan:/[\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2]/g,mal:/[\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D75\u0D79-\u0D7F]/g,Myanmar:/[\u1000-\u109F\uA9E0-\uA9FE\uAA60-\uAA7F]/g,ori:/[\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77]/g,pan:/[\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75]/g,Ethiopic:/[\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]/g,tha:/[\u0E01-\u0E3A\u0E40-\u0E5B]/g,sin:/[\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4]|\uD804[\uDDE1-\uDDF4]/g,ell:/[\u0370-\u0373\u0375-\u0377\u037A-\u037D\u037F\u0384\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03E1\u03F0-\u03FF\u1D26-\u1D2A\u1D5D-\u1D61\u1D66-\u1D6A\u1DBF\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u2126\uAB65]|\uD800[\uDD40-\uDD8C\uDDA0]|\uD834[\uDE00-\uDE45]/g,khm:/[\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u19E0-\u19FF]/g,hye:/[\u0531-\u0556\u0559-\u055F\u0561-\u0587\u058A\u058D-\u058F\uFB13-\uFB17]/g,sat:/[\u1C50-\u1C7F]/g,bod:/[\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FD4\u0FD9\u0FDA]/g,Hebrew:/[\u0591-\u05C7\u05D0-\u05EA\u05F0-\u05F4\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFB4F]/g,kat:/[\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u10FF\u2D00-\u2D25\u2D27\u2D2D]/g,lao:/[\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF]/g,zgh:/[\u2D30-\u2D67\u2D6F\u2D70\u2D7F]/g,iii:/[\uA000-\uA48C\uA490-\uA4C6]/g,aii:/[\u0700-\u070D\u070F-\u074A\u074D-\u074F]/g},lo=Object.keys(wl),co=()=>[["und",1]];let xl=class Ce{constructor(){this.languagesAlpha3={},this.languagesAlpha2={},this.extraSentences=[],this.buildData()}static getTrigrams(e){const t=[],n=e?` ${String(e).replace(/[\u0021-\u0040]+/g," ").replace(/\s+/g," ").trim().toLowerCase()} `:"";if(!n||n.length<3)return t;for(let i=0,r=n.length-2;i<r;i+=1)t[i]=n.substr(i,3);return t}static asTuples(e){const t=Ce.getTrigrams(e).reduce((i,r)=>{const o=i;return o[r]=(o[r]||0)+1,o},{}),n=[];return Object.keys(t).forEach(i=>{n.push([i,t[i]])}),n.sort((i,r)=>i[1]-r[1]),n}static getDistance(e,t){let n=0;return e.forEach(i=>{n+=i[0]in t?Math.abs(i[1]-t[i[0]]-1):300}),n}static getOccurrence(e,t){const n=e.match(t);return(n?n.length:0)/e.length||0}static isLatin(e){let t=0;const n=e.length/2;for(let i=0;i<e.length;i+=1){const r=e.charCodeAt(i);if(r>=32&&r<=126&&(t+=1,t>n))return!0}return t>n}static getTopScript(e){if(Ce.isLatin(e))return["Latin",1];let t=-1,n;for(let i=0;i<lo.length;i+=1){const r=lo[i],o=Ce.getOccurrence(e,wl[r]);if(o>t&&(t=o,n=r,t===1))return[n,t]}return[n,t]}static filterLanguages(e,t,n){if(t.length===0&&n.length===0)return e;const i={};return Object.keys(e).forEach(r=>{(t.length===0||t.indexOf(r)>-1)&&n.indexOf(r)===-1&&(i[r]=e[r])}),i}static getDistances(e,t,n){const i=[],r=n.allowList||[],o=n.denyList||[],a=Ce.filterLanguages(t,r,o);return a?(Object.keys(a).forEach(l=>{i.push([l,Ce.getDistance(e,a[l])])}),i.sort((l,c)=>l[1]-c[1])):co()}static detectAll(e,t={}){const n=t.minLength||10;if(!e||e.length<n)return co();const i=e.substr(0,2048),r=Ce.getTopScript(i);if(!(r[0]in tt)&&r[1]>.5)if(t.allowList){if(t.allowList.includes(r[0]))return[[r[0],1]];if(r[0]==="cmn"&&t.allowList.includes("jpn"))return[["jpn",1]]}else return[[r[0],1]];if(tt[r[0]]){const o=Ce.getDistances(Ce.asTuples(i),tt[r[0]],t);if(o[0][0]==="und")return[[r[0],1]];const a=o[0][1],l=i.length*300-a;return o.map(c=>[c[0],1-(c[1]-a)/l||0])}return[[r[0],1]]}buildData(){for(let e=0;e<zn.length;e+=1){const t={alpha2:zn[e][0],alpha3:zn[e][1],name:zn[e][2]};this.languagesAlpha3[t.alpha3]=t,this.languagesAlpha2[t.alpha2]=t}}transformAllowList(e){const t=[];for(let n=0;n<e.length;n+=1)if(e[n].length===3)t.push(e[n]);else{const i=this.languagesAlpha2[e[n]];i&&t.push(i.alpha3)}return t}guess(e,t,n){const i={};e.length<10&&(i.minLength=e.length),t&&t.length&&t.length>0&&(i.allowList=this.transformAllowList(t));const r=Ce.detectAll(e,i),o=[];for(let a=0;a<r.length;a+=1){const l=this.languagesAlpha3[r[a][0]];if(l&&(o.push({alpha3:l.alpha3,alpha2:l.alpha2,language:l.name,score:r[a][1]}),n&&o.length>=n))break}return o}guessBest(e,t){return this.guess(e,t,1)[0]}addTrigrams(e,t){const n=this.languagesAlpha2[e],i=n?n.alpha3:e,r=Ce.getTopScript(t)[0],o=Ce.getTrigrams(t);tt[r]&&(tt[r][i]||(tt[r][i]={}),o.forEach(a=>{tt[r][i][a]=1}))}addExtraSentence(e,t){this.extraSentences.push([e,t]),this.addTrigrams(e,t)}processExtraSentences(){this.extraSentences.forEach(e=>{this.addTrigrams(e[0],e[1])})}static lansplit(e){if(e.includes("|"))return e.split("|");const t=[];for(let n=0;n<e.length;n+=3)t.push(e.substr(n,3));return t}static addModel(e,t,n){const i=tt[e],r=Ce.lansplit(n);let o=r.length;const a={};for(;o>0;)o-=1,a[r[o]]=o;i[t]=a}addModel(e,t,n){Ce.addModel(e,t,n)}static buildModel(){Object.keys(tt).forEach(e=>{const t=tt[e];Object.keys(t).forEach(n=>{Ce.addModel(e,n,t[n])})})}};xl.buildModel();var Yp=xl;const em=Yp;var kl={Language:em};const{Clonable:tm}=Fe,{Language:nm}=kl,sm=bl;let im=class extends tm{constructor(e={},t){super({settings:{},container:e.container||t},t),this.applySettings(this.settings,e),this.settings.tag||(this.settings.tag="nlu-manager"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.container.get("Language")||this.container.register("Language",nm,!1),this.guesser=this.container.get("Language"),this.locales=[],this.languageNames={},this.domainManagers={},this.intentDomains={},this.settings.locales&&this.addLanguage(this.settings.locales),this.applySettings(this,{pipelineTrain:this.getPipeline(`${this.settings.tag}-train`),pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)})}registerDefault(){this.container.registerConfiguration("nlu-manager",{},!1),this.container.registerPipeline("nlu-manager-train",[".innerTrain"],!1)}describeLanguage(e,t){this.languageNames[e]={locale:e,name:t}}addLanguage(e){if(e){const t=Array.isArray(e)?e:[e];for(let n=0;n<t.length;n+=1){const i=t[n].substr(0,2).toLowerCase();this.locales.includes(i)||this.locales.push(i),this.domainManagers[i]||(this.domainManagers[i]=new sm({locale:i,...this.settings.domain,useNoneFeature:this.settings.useNoneFeature,trainByDomain:this.settings.trainByDomain},this.container))}}}removeLanguage(e){if(Array.isArray(e))e.forEach(t=>this.removeLanguage(t));else{delete this.domainManagers[e];const t=this.locales.indexOf(e);t!==-1&&this.locales.splice(t,1)}}guessLanguage(e){const t=e,n=typeof t=="string";if(this.locales.length===1)return n?this.locales[0]:([t.locale]=this.locales,t);if(!t)return n?void 0:t;if(!n&&t.locale)return t;const i=n?t:t.utterance;if(this.locales.length===1){if(n)return this.locales[0];[t.locale]=this.locales}const r=this.guesser.guess(i,this.locales,1),o=r&&r.length>0?r[0].alpha2:void 0;return n?o:(t.locale=o,t)}assignDomain(e,t,n){const i=n?e.substr(0,2).toLowerCase():void 0,r=n?t:e,o=n||t;if(i)this.intentDomains[i]||(this.intentDomains[i]={}),this.intentDomains[i][r]=o;else for(let a=0;a<this.locales.length;a+=1)this.assignDomain(this.locales[a],r,o)}getIntentDomain(e,t){const n=e.substr(0,2).toLowerCase();return this.intentDomains[n]&&this.intentDomains[n][t]||"default"}getDomains(){const e={},t=Object.keys(this.intentDomains);for(let n=0;n<t.length;n+=1){const i=t[n];e[i]={};const r=Object.keys(this.intentDomains[i]);for(let o=0;o<r.length;o+=1){const a=r[o],l=this.intentDomains[i][a];e[i][l]||(e[i][l]=[]),e[i][l].push(a)}}return e}consolidateLocale(e,t){const n=e?e.substr(0,2).toLowerCase():this.guessLanguage(t);if(!n)throw new Error("Locale must be defined");return n}consolidateManager(e){const t=this.domainManagers[e];if(!t)throw new Error(`Domain Manager not found for locale ${e}`);return t}add(e,t,n){const i=this.consolidateLocale(e,t),r=this.consolidateManager(i),o=this.getIntentDomain(i,n);this.guesser.addExtraSentence(i,t),r.add(o,t,n)}remove(e,t,n){const i=this.consolidateLocale(e,t),r=this.consolidateManager(i),o=this.getIntentDomain(i,n);r.remove(o,t,n)}async innerTrain(e){let t=e.locales||this.locales;Array.isArray(t)||(t=[t]);const n=t.filter(i=>this.domainManagers[i]).map(i=>this.domainManagers[i].train(e.settings));return Promise.all(n)}async train(e){const t={nluManager:this,settings:this.applySettings(e,this.settings)};return delete t.settings.tag,this.runPipeline(t,this.pipelineTrain)}fillLanguage(e){const t=e;return t.languageGuessed=!1,t.locale||(t.locale=this.guessLanguage(t.utterance),t.languageGuessed=!0),t.locale&&(t.localeIso2=t.locale.substr(0,2).toLowerCase(),t.language=(this.languageNames[t.localeIso2]||this.guesser.languagesAlpha2[t.localeIso2]||{}).name),t}classificationsIsNone(e){return e.length===1?!1:e.length===0||e[0].score===0?!0:e[0].score===e[1].score}checkIfIsNone(e){const t=e;return this.classificationsIsNone(t.classifications)&&(t.intent="None",t.score=1),t}async innerClassify(e){const t=e,n=this.domainManagers[t.localeIso2];if(!n)return t.classifications=[],t.domain=void 0,t.intent=void 0,t.score=void 0,t;const i=await n.process(e);return t.classifications=i.classifications.sort((r,o)=>o.score-r.score),t.classifications.length===0&&t.classifications.push({intent:"None",score:1}),t.intent=t.classifications[0].intent,t.score=t.classifications[0].score,t.intent==="None"?i.domain="default":i.domain==="default"?t.domain=this.getIntentDomain(t.locale,t.intent):t.domain=i.domain,t}async defaultPipelineProcess(e){let t=await this.fillLanguage(e);return t=await this.innerClassify(t),t=await this.checkIfIsNone(t),delete t.settings,delete t.classification,t}process(e,t,n,i){const r=typeof e=="object"?e:{locale:t===void 0?void 0:e,utterance:t===void 0?e:t,domain:n,settings:i||this.settings};return this.pipelineProcess?this.runPipeline(r,this.pipelineProcess):this.defaultPipelineProcess(r)}toJSON(){const e={settings:this.settings,locales:this.locales,languageNames:this.languageNames,domainManagers:{},intentDomains:this.intentDomains,extraSentences:this.guesser.extraSentences.slice(0)};delete e.settings.container;const t=Object.keys(this.domainManagers);for(let n=0;n<t.length;n+=1){const i=t[n];e.domainManagers[i]=this.domainManagers[i].toJSON()}return e}fromJSON(e){this.applySettings(this.settings,e.settings);for(let n=0;n<e.locales.length;n+=1)this.addLanguage(e.locales[n]);this.languageNames=e.languageNames,this.intentDomains=e.intentDomains;const t=Object.keys(e.domainManagers);for(let n=0;n<t.length;n+=1){const i=t[n];this.domainManagers[i].fromJSON(e.domainManagers[i])}for(let n=0;n<e.extraSentences.length;n+=1){const i=e.extraSentences[n];this.guesser.addExtraSentence(i[0],i[1])}}};var rm=im;const om=yl,am=zp,lm=bl,cm=rm;var um={Nlu:om,NluNeural:am,DomainManager:lm,NluManager:cm};const Al={Between:"between",After:"after",AfterLast:"afterLast",AfterFirst:"afterFirst",Before:"before",BeforeFirst:"beforeFirst",BeforeLast:"beforeLast"},fm=Object.values(Al);var nr={TrimType:Al,TrimTypesList:fm};const{TrimTypesList:hm}=nr;function dm(s,e,t,n=[]){let i,r;if(s.accuracy>e.accuracy||s.accuracy===e.accuracy&&s.length>e.length?(i=s,r=e):(i=e,r=s),r.start<=i.end&&r.end>=i.start){if(r.accuracy<i.accuracy)r.discarded=!0;else if((t||r.entity===i.entity||r.entity==="number")&&r.len<=i.len)r.start===i.start&&r.end===i.end&&r.type===i.type&&r.entity===i.entity&&r.option===i.option?r.discarded=!0:r.start===i.start&&r.end===i.end&&r.entity===i.entity&&r.type!==i.type&&(i.type==="trim"&&r.type!=="trim"?i.discarded=!0:(i.type!=="trim"&&r.type,r.discarded=!0));else if((t||r.entity===i.entity||i.entity==="number")&&r.len>i.len)i.discarded=!0;else if(i.type==="enum"&&r.type==="enum"){const o=n.includes(i.entity),a=n.includes(r.entity);o&&!a?r.discarded=!0:!o&&a||i.len<=r.len&&r.utteranceText.includes(i.utteranceText)?i.discarded=!0:i.len>r.len&&i.utteranceText.includes(r.utteranceText)&&(r.discarded=!0)}}}function gm(s){for(let e=0,t=s.length;e<t;e+=1){const n=s[e];if(n.type==="trim"&&hm.includes(n.subtype))for(let i=0;i<s.length;i+=1){const r=s[i];if(e!==i&&r.start>=n.start&&r.end<=n.end&&r.type!=="trim"){const o=n.end-n.start,a=r.end-r.start;if(n.end===r.end){const l=n.sourceText.substring(0,o-a-1);n.sourceText=l,n.utteranceText=l,n.end=r.start-1,n.len=l.length}else if(n.start===r.start){const l=n.sourceText.substring(a+1);n.sourceText=l,n.utteranceText=l,n.start=r.end+1,n.len=l.length}}}}return s}function pm(s,e=!0,t=[]){s=gm(s);const n=s.length;for(let i=0;i<n;i+=1){const r=s[i];if(r.len===0&&(r.discarded=!0),!r.discarded)for(let o=i+1;o<n;o+=1){const a=s[o];if(a.discarded||dm(r,a,e,t),r.discarded)break}if(!r.discarded){const o=t.indexOf(r.entity);o!==-1&&t.splice(o,1)}}return s.filter(i=>!i.discarded)}var Ds=pm;const{defaultContainer:mm}=Fe,{Language:ym}=kl,{similarity:Un}=ml,bm=Ds;let wm=class{constructor(e=mm){this.container=e.container||e,this.name="extract-enum"}getScripts(e){const t=[],n=e.split("");for(let i=0;i<n.length;i+=1)t.push(ym.getTopScript(n[i]));return t}isAlphanumeric(e){return/[\u00C0-\u1FFF\u2C00-\uD7FF\w]/.test(e)&&e!=="_"}getWordPositions(e){const t=this.getScripts(e);let n=!0,i=0,r=0;const o=e.length,a=[];for(;r<o;)this.isAlphanumeric(e.charAt(r))?n&&(t[r][0]==="cmn"?(a.push({start:r,end:r,len:1}),i=r):(i=r,n=!1)):n||(a.push({start:i,end:r-1,len:r-i}),n=!0),r+=1;return n||a.push({start:i,end:r-1,len:r-i}),a}getBestSubstring(e,t,n){const i=e.length,r=t.length;if(i<=r){const c={start:0,end:i-1,len:i,levenshtein:Un(e,t,!0)};return c.accuracy=(r-c.levenshtein)/r,c}const o=n||this.getWordPositions(e),a=o.length,l={start:0,end:0,len:0,levenshtein:void 0,accuracy:0};for(let c=0;c<a;c+=1)for(let u=c;u<a;u+=1){const f=e.substring(o[c].start,o[u].end+1),h=Un(f,t,!0);(l.levenshtein===void 0||h<l.levenshtein)&&(l.levenshtein=h,l.start=o[c].start,l.end=o[u].end,l.len=l.end-l.start+1)}return l.accuracy=(r-l.levenshtein)/r,l}getBestSubstringList(e,t,n,i=1){const r=e.length,o=t.length,a=[];if(r<=o){const f=Un(e,t,!0),h=(o-f)/o;return h>=i&&a.push({start:0,end:r-1,len:r,levenshtein:f,accuracy:h}),a}const l=o*(1-i),c=n||this.getWordPositions(e),u=c.length;for(let f=0;f<u;f+=1)for(let h=f;h<u;h+=1){const p=e.substring(c[f].start,c[h].end+1),m=Un(p,t,!0),w=(o-m)/o;if(w>=i&&a.push({start:c[f].start,end:c[h].end,len:c[h].end-c[f].start+1,levenshtein:m,accuracy:w}),p.length-c[0].len>=t.length+l)break}return a}getRules(e){const t=e.nerRules;return t||[]}normalize(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}buildRuleDict(e){const t={},n={};for(let i=0;i<e.rules.length;i+=1){const r=e.rules[i];for(let o=0;o<r.texts.length;o+=1){const a=r.texts[o],l=this.normalize(r.texts[o]);t[l]||(t[l]=[]),t[l].push(r),n[l]=a}}e.dict=t,e.inverseDict=n}getBestExact(e,t,n){const i=this.normalize(e),r=t||this.getWordPositions(i),o=r.length,a=[];for(let l=0;l<o;l+=1)for(let c=l;c<o;c+=1){const u=i.substring(r[l].start,r[c].end+1);if(n.dict[u]){const f=n.dict[u];for(let h=0;h<f.length;h+=1)a.push({accuracy:1,start:r[l].start,end:r[c].end,len:r[c].end-r[l].start+1,levenshtein:0,entity:n.name,type:n.type,option:f[h].option,sourceText:n.inverseDict[u],utteranceText:e.substring(r[l].start,r[c].end+1)})}}return a}extractFromRule(e,t,n,i){if(t.type==="enum"){const r=[];if(i>=1){t.dict||this.buildRuleDict(t);const o=this.getBestExact(e,n,t);for(let a=0;a<o.length;a+=1)r.push(o[a])}else for(let o=0;o<t.rules.length;o+=1){const a=t.rules[o];if(a&&a.option&&Array.isArray(a.texts))for(let l=0;l<a.texts.length;l+=1){const c=this.getBestSubstringList(e,a.texts[l],n,a.threshold||i);for(let u=0;u<c.length;u+=1)r.push({...c[u],entity:t.name,type:t.type,option:t.rules[o].option,sourceText:a.texts[l],utteranceText:e.substring(c[u].start,c[u].end+1)})}}return r}return[]}async extract(e){const t=e,n=t.text||t.utterance;let i=n;const r=[],o=this.container.get("tokenize");if(o){const u=await o.run({locale:t.locale,text:i});if(i=u.tokens.join(" "),i!==n){let f=0,h=0;for(let p=0;p<u.tokens.length;p+=1){const m=n.indexOf(u.tokens[p],f);for(let w=0;w<u.tokens[p].length;w+=1)r[h+w]=m+w;f+=u.tokens[p].length,h+=u.tokens[p].length+1}}}const a=this.getWordPositions(i),l=this.getRules(t),c=t.edges||[];for(let u=0;u<l.length;u+=1){const f=this.extractFromRule(i,l[u],a,t.threshold||.8);for(let h=0;h<f.length;h+=1)c.push(f[h])}if(r.length>0)for(let u=0;u<c.length;u+=1){const f=c[u];f.start=r[f.start],f.end=r[f.end]}return c.sort((u,f)=>u.start-f.start),t.edges=bm(c,!1,t.intentEntities),t}run(e){const t=e,n=t.locale||"en";return(this.container.get(`extract-enum-${n}`)||this).extract(t)}};var Cl=wm;const{defaultContainer:xm}=Fe,km=Ds;let Am=class{constructor(e=xm){this.container=e.container||e,this.name="extract-regex"}getRules(e){const t=e.nerRules;return t||[]}getMatchs(e,t){const n=[];let i;do{const r=t instanceof RegExp?t.exec(e):null;if(r){if(r.length===1)n.push({start:r.index,end:t.lastIndex-1,accuracy:1,sourceText:r[0]});else{const o=e.indexOf(r[1]);n.push({start:o,end:o+r[1].length-1,accuracy:1,sourceText:r[1]})}i=!0}else i=!1}while(i);return n}extractFromRule(e,t){const n=[];for(let i=0;i<t.rules.length;i+=1){const r=this.getMatchs(e,t.rules[i]);for(let o=0;o<r.length;o+=1){const a=r[o];a.entity=t.name,a.type=t.type,a.utteranceText=e.substring(a.start,a.end+1),a.len=a.utteranceText.length,n.push(a)}}return n}extract(e){const t=e,n=this.getRules(t),i=t.edges||[];for(let r=0;r<n.length;r+=1){const o=this.extractFromRule(t.text||t.utterance,n[r]);for(let a=0;a<o.length;a+=1)i.push(o[a])}return i.sort((r,o)=>r.start-o.start),t.edges=km(i,!1),t}run(e){const t=e,n=t.locale||"en";return(this.container.get(`extract-regex-${n}`)||this).extract(t)}};var Sl=Am;const{defaultContainer:Cm}=Fe,Sm=Ds,{TrimType:_e}=nr;let Em=class{constructor(e=Cm){this.container=e.container||e,this.name="extract-trim"}mustSkip(e,t){if(t.options&&t.options.skip&&t.options.skip.length>0)for(let n=0;n<t.options.skip.length;n+=1){const i=t.options.skip[n];if(t.options.caseSensitive){if(i===e)return!0}else if(i.toLowerCase()===e.toLowerCase())return!0}return!1}matchBetween(e,t,n){const i=[];let r;do{const a=t.regex.exec(` ${e} `);if(a){let l,c,u;if(t&&t.options&&t.options.closest){if(l=1,!a[l]){r=!1;break}const f=a[0].indexOf(a[l]);c=a.index-1+f,u=c+a[l].length-1}else l=0,c=a.index-1,u=t.regex.lastIndex-2;i.push({type:"trim",subtype:_e.Between,start:c,end:u,len:a[l].length,accuracy:1,sourceText:a[l],utteranceText:a[l],entity:n}),r=!0}else r=!1}while(r);const o=[];for(let a=0;a<i.length;a+=1)this.mustSkip(i[a].utteranceText,t)||o.push(i[a]);return o}findWord(e,t,n=!1,i=!1){const r=[];let o;const a=new RegExp(i?t:` ${t} | ${t}|${t} `,n?"g":"ig");do{const l=a.exec(e);l?(r.push({start:l.index,end:a.lastIndex}),o=!0):o=!1}while(o);return r}getBeforeResults(e,t,n){const i=[];let r=0,o=0;for(let a=0;a<t.length;a+=1){o=t[a].start;const l=e.substring(r,o);i.push({type:"trim",subtype:_e.Before,start:r,end:o-1,len:l.length,accuracy:.99,sourceText:l,utteranceText:l,entity:n}),r=t[a].end}return i}getBeforeFirstResults(e,t,n){const i=[],o=t[0].start,a=e.substring(0,o);return i.push({type:"trim",subtype:_e.BeforeFirst,start:0,end:o-1,len:a.length,accuracy:.99,sourceText:a,utteranceText:a,entity:n}),i}getBeforeLastResults(e,t,n){const i=[],o=t[t.length-1].start,a=e.substring(0,o);return i.push({type:"trim",subtype:_e.BeforeLast,start:0,end:o-1,len:a.length,accuracy:.99,sourceText:a,utteranceText:a,entity:n}),i}getAfterResults(e,t,n){const i=[];let r=0,o=e.length;for(let a=t.length-1;a>=0;a-=1){r=t[a].end;const l=e.substring(r,o);i.unshift({type:"trim",subtype:_e.After,start:r,end:o-1,len:l.length,accuracy:.99,sourceText:l,utteranceText:l,entity:n}),o=t[a].start}return i}getAfterFirstResults(e,t,n){const i=[],r=t[0].end,o=e.length,a=e.substring(r,o);return i.push({type:"trim",subtype:_e.AfterFirst,start:r,end:o-1,len:a.length,accuracy:.99,sourceText:a,utteranceText:a,entity:n}),i}getAfterLastResults(e,t,n){const i=[],r=t[t.length-1].end,o=e.length,a=e.substring(r,o);return i.push({type:"trim",subtype:_e.AfterLast,start:r,end:o-1,len:a.length,accuracy:.99,sourceText:a,utteranceText:a,entity:n}),i}getResults(e,t,n,i){switch(n){case _e.Before:return this.getBeforeResults(e,t,i);case _e.BeforeFirst:return this.getBeforeFirstResults(e,t,i);case _e.BeforeLast:return this.getBeforeLastResults(e,t,i);case _e.After:return this.getAfterResults(e,t,i);case _e.AfterFirst:return this.getAfterFirstResults(e,t,i);case _e.AfterLast:return this.getAfterLastResults(e,t,i);default:return[]}}match(e,t,n,i){const r=[];if(t&&Array.isArray(t.words))for(let a=0;a<t.words.length;a+=1){const l=t.options.noSpaces?t.words[a]:` ${t.words[a]}`,c=this.findWord(e,l);if(!t.options.noSpaces){const u=this.findWord(e,t.words[a]);u.length>0&&u[0].start===0&&c.unshift(u[0])}c.length>0&&r.push(...this.getResults(e,c,n,i))}const o=[];for(let a=0;a<r.length;a+=1)r[a].sourceText=r[a].sourceText.replace(/^[\s,.!?;:([\]'"¡¿)/]+|[\s,.!?;:([\]'"¡¿)/]+$/,""),this.mustSkip(r[a].utteranceText,t)||o.push(r[a]);return o}getRules(e){const t=e.nerRules;return t||[]}extractFromRule(e,t){const n=[];for(let i=0;i<t.rules.length;i+=1){const r=t.rules[i];r.type===_e.Between?n.push(...this.matchBetween(e,r,t.name)):n.push(...this.match(e,r,r.type,t.name))}return n}extract(e){const t=e,n=this.getRules(t),i=t.edges||[];for(let r=0;r<n.length;r+=1){const o=this.extractFromRule(t.text||t.utterance,n[r]);for(let a=0;a<o.length;a+=1)i.push(o[a])}return i.sort((r,o)=>r.start-o.start),t.edges=Sm(i,!1),t}run(e){const t=e,n=t.locale||"en";return(this.container.get(`extract-trim-${n}`)||this).extract(t)}};var El=Em;const{defaultContainer:vm}=Fe,Dm=Ds;let _m=class{constructor(e=vm){this.container=e.container||e,this.name="extract-builtin"}extract(e){return e}async run(e){const t=e,n=t.locale||"en",r=await(this.container.get(`extract-builtin-${n}`)||this).extract({text:t.text||t.utterance,locale:t.locale});if(t.edges=t.edges||[],r.edges)for(let o=0;o<r.edges.length;o+=1)(!t.nerLimitToEntities||t.intentEntities.includes(r.edges[o].entity))&&t.edges.push(r.edges[o]);if(t.edges=Dm(t.edges,!1),t.sourceEntities=t.sourceEntities||[],r.sourceEntities)for(let o=0;o<r.sourceEntities.length;o+=1)t.sourceEntities.push(r.sourceEntities[o]);return t}};var vl=_m;const{Clonable:Tm}=Fe,Fm=Cl,Rm=Sl,Om=El,Pm=vl,{TrimType:Wt}=nr;function Bm(s){return s!=null&&s.constructor===Object}let $m=class dn extends Tm{constructor(e={},t=void 0){super({settings:{},container:e.container||t},t),this.applySettings(this.settings,e),this.applySettings(this.settings),this.settings.tag||(this.settings.tag="ner"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.rules={},this.applySettings(this,{pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)})}registerDefault(){}getRulesByName(e="*",t="",n=!1){if(!this.rules[e]){if(!n)return;this.rules[e]={}}if(!this.rules[e][t]){if(!n)return;this.rules[e][t]={name:t,type:"enum",rules:[]}}return this.rules[e][t]}addRule(e="*",t,n,i){if(Array.isArray(e))for(let r=0;r<e.length;r+=1)this.addRule(e[r],t,n,i);else this.rules[e]||(this.rules[e]={}),this.rules[e][t]||(this.rules[e][t]={name:t,type:n,rules:[]}),this.rules[e][t].rules.push(i)}asString(e){if(e){if(Bm(e))return JSON.stringify(e);if(e.toString)return e.toString()}return""}findRule(e,t){const n=this.asString(t);for(let i=0;i<e.length;i+=1)if(this.asString(e[i])===n)return i;return-1}removeRule(e="*",t,n){if(this.rules[e]&&this.rules[e][t])if(!n)delete this.rules[e][t];else{const i=this.findRule(this.rules[e][t].rules,n);i>-1&&this.rules[e][t].rules.splice(i,1)}}getRules(e="*"){const t=[];if(this.rules[e]){const n=Object.keys(this.rules[e]);for(let i=0;i<n.length;i+=1)t.push(this.rules[e][n[i]])}if(e!=="*"&&this.rules["*"]){const n=Object.keys(this.rules["*"]);for(let i=0;i<n.length;i+=1)t.push(this.rules["*"][n[i]])}return t}decideRules(e,t){const n=e;let i=this.getRules(n.locale||"en");if(t&&this.settings.considerOnlyIntentEntities)i=i.filter(r=>t.includes(r.name));else if(t){const r=[],o=[];i.forEach(a=>{t.includes(a.name)?r.push(a):o.push(a)}),i=r.concat(o)}return n.nerRules=i,n.nerLimitToEntities=this.settings.considerOnlyIntentEntities,n.intentEntities=t,n}getRuleOption(e,t){for(let n=0;n<e.length;n+=1)if(e[n].option===t)return e[n]}addRuleOptionTexts(e,t,n,i){if(Array.isArray(e))for(let r=0;r<e.length;r+=1)this.addRuleOptionTexts(e[r],t,n,i);else{let r=i||n;Array.isArray(r)||(r=[r]);const o=this.getRulesByName(e,t,!0);let a=this.getRuleOption(o.rules,n);if(!a)a={option:n,texts:r},o.rules.push(a);else{const l={};for(let c=0;c<a.texts.length;c+=1)l[a.texts[c]]=1;for(let c=0;c<r.length;c+=1)l[r[c]]=1;a.texts=Object.keys(l)}}}removeRuleOptionTexts(e,t,n,i){if(Array.isArray(e))for(let r=0;r<e.length;r+=1)this.removeRuleOptionTexts(e[r],t,n,i);else{let r=i||n;Array.isArray(r)||(r=[r]);const o=this.getRulesByName(e,t,!1);if(o){const a=this.getRuleOption(o.rules,n);if(a){const l={};for(let c=0;c<a.texts.length;c+=1)l[a.texts[c]]=1;for(let c=0;c<r.length;c+=1)delete l[r[c]];a.texts=Object.keys(l)}}}}static str2regex(e){const t=e.lastIndexOf("/");return new RegExp(e.slice(1,t),e.slice(t+1))}static regex2str(e){return e.toString()}addRegexRule(e,t,n){const i=typeof n=="string"?dn.str2regex(n):n,r="g",o=i.flags.includes(r)?i:new RegExp(i.source,`${i.flags}${r}`);this.addRule(e,t,"regex",o)}addBetweenLastCondition(e,t,n,i,r={}){const o={...r,closest:!0};this.addBetweenCondition(e,t,n,i,o)}addBetweenCondition(e,t,n,i,r){const o=r||{},a=Array.isArray(n)?n:[n],l=Array.isArray(i)?i:[i],c=[];for(let h=0;h<a.length;h+=1)for(let p=0;p<l.length;p+=1){const m=o.noSpaces===!0?a[h]:` ${a[h]} `,w=o.noSpaces===!0?l[p]:` ${l[p]} `;let k;o.closest===!0?k=`${m}(?!.*${m}.*)(.*)${w}`:k=`(?<=${m})(.*)(?=${w})`,c.push(k)}let u=`/${c.join("|")}/g`;o.caseSensitive!==!0&&(u+="i");const f={type:"between",leftWords:a,rightWords:l,regex:dn.str2regex(u),options:o};this.addRule(e,t,"trim",f)}addPositionCondition(e,t,n,i,r){const o=r||{},a=Array.isArray(i)?i:[i],l={type:n,words:a,options:o};this.addRule(e,t,"trim",l)}addAfterCondition(e,t,n,i){this.addPositionCondition(e,t,Wt.After,n,i)}addAfterFirstCondition(e,t,n,i){this.addPositionCondition(e,t,Wt.AfterFirst,n,i)}addAfterLastCondition(e,t,n,i){this.addPositionCondition(e,t,Wt.AfterLast,n,i)}addBeforeCondition(e,t,n,i){this.addPositionCondition(e,t,Wt.Before,n,i)}addBeforeFirstCondition(e,t,n,i){this.addPositionCondition(e,t,Wt.BeforeFirst,n,i)}addBeforeLastCondition(e,t,n,i){this.addPositionCondition(e,t,Wt.BeforeLast,n,i)}reduceEdges(e){return e.entities=e.edges,delete e.edges,delete e.nerRules,delete e.nerLimitToEntities,delete e.intentEntities,e}async defaultPipelineProcess(e,t){this.cache||(this.cache={extractEnum:this.container.get("extract-enum"),extractRegex:this.container.get("extract-regex"),extractTrim:this.container.get("extract-trim"),extractBuiltin:this.container.get("extract-builtin")},this.cache.extractEnum||(this.container.use(Fm),this.cache.extractEnum=this.container.get("extract-enum")),this.cache.extractRegex||(this.container.use(Rm),this.cache.extractRegex=this.container.get("extract-regex")),this.cache.extractTrim||(this.container.use(Om),this.cache.extractTrim=this.container.get("extract-trim")),this.cache.extractBuiltin||(this.container.use(Pm),this.cache.extractBuiltin=this.container.get("extract-builtin")));let n=await this.decideRules(e,t);return this.cache.extractEnum&&(n=await this.cache.extractEnum.run(n)),this.cache.extractRegex&&(n=await this.cache.extractRegex.run(n)),this.cache.extractTrim&&(n=await this.cache.extractTrim.run(n)),this.cache.extractBuiltin&&(n=await this.cache.extractBuiltin.run(n)),n=await this.reduceEdges(n),n}async process(e,t){const n={threshold:this.settings.threshold||.8,...e};let i;if(n.locale){const r=this.container.getPipeline(`${this.settings.tag}-${n.locale}-process`);r&&(i=await this.runPipeline(n,r))}else this.pipelineProcess&&(i=await this.runPipeline(n,this.pipelineProcess));return i?t&&(i.entities=i.entities.filter(r=>t.includes(r.entity))):i=await this.defaultPipelineProcess(n,t),delete i.threshold,i}nameToEntity(e){const t=this.settings.entityPreffix===void 0?"@":this.settings.entityPreffix,n=this.settings.entitySuffix===void 0?"":this.settings.entitySuffix;return`${t}${e}${n}`}entityToName(e){if(!e)return e;let t=e;const n=this.settings.entityPreffix===void 0?"@":this.settings.entityPreffix,i=this.settings.entitySuffix===void 0?"":this.settings.entitySuffix;if(n){if(!t.startsWith(n))return e;t=t.slice(n.length)}if(i){if(!t.endsWith(i))return e;t=t.slice(0,-i.length)}return t}isEntity(e){return this.entityToName(e)!==e}getEntitiesFromUtterance(e,t){t||(t=e,e="es");const n=t.split(/[\s,.!?;:([\]'"¡¿)/]+/).filter(r=>r),i=[];for(let r=0;r<n.length;r+=1){const o=n[r];this.isEntity(o)&&i.push(this.entityToName(o))}return i}async generateEntityUtterance(e,t){let n={locale:e,utterance:t};n=await this.process(n);const{entities:i}=n;if(!i||!i.length)return t;i.sort((l,c)=>l.start-c.start);let r=0,o="";for(let l=0;l<i.length;l+=1){const c=i[l],u=t.slice(r,c.start);r=c.end+1,o+=u,o+=this.nameToEntity(c.entity)}const a=t.slice(i[i.length-1].end+1);return o+=a,o}toJSON(){RegExp.prototype.toJSON=RegExp.prototype.toString;const e={settings:{...this.settings},rules:{...this.rules}};return delete e.settings.container,e}fromJSON(e){this.applySettings(this.settings,e.settings),Object.keys(e.rules).forEach(n=>{Object.keys(e.rules[n]).forEach(r=>{e.rules[n][r].rules=e.rules[n][r].type==="regex"?e.rules[n][r].rules.map(o=>dn.str2regex(o)):e.rules[n][r].rules.map(o=>typeof o.regex=="string"?{...o,regex:dn.str2regex(o.regex)}:o)})}),this.rules=e.rules}};var Nm=$m;const Lm=Nm,Mm=Cl,Im=Sl,jm=El,zm=vl;var Um={Ner:Lm,ExtractorEnum:Mm,ExtractorRegex:Im,ExtractorTrim:jm,ExtractorBuiltin:zm};const{Clonable:qm}=Fe;let Hm=class extends qm{constructor(e={},t){super({settings:{},container:e.container||t},t),this.applySettings(this.settings,e),this.settings.tag||(this.settings.tag="nlg-manager"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.responses={},this.applySettings(this,{pipelineFind:this.getPipeline(`${this.settings.tag}-find`)})}registerDefault(){this.container.registerConfiguration("nlg-manager",{},!1)}findAllAnswers(e){const t=e;return this.responses[t.locale]?t.answers=this.responses[t.locale][t.intent]||[]:t.answers=[],t}filterAnswers(e){const t=e,{answers:n}=t;if(n&&n.length){const i=this.container.get("Evaluator");if(i){const r=t.context||{},o=[];for(let a=0;a<n.length;a+=1){const l=n[a];if(l.opts){const c=typeof l.opts=="string"?l.opts:l.opts.condition;c?i.evaluate(c,r)===!0&&o.push(l):o.push(l)}else o.push(l)}t.answers=o}}return t}chooseRandom(e){const t=e,{answers:n}=t;return n&&n.length&&(t.answer=n[Math.floor(Math.random()*n.length)].answer),t}renderText(e,t){if(!e)return e;let n=e.answer||e,i;do{const o=/\((?:[^()]+)\|(?:[^()]+)\)/g.exec(n);if(o){for(let a=0;a<o.length;a+=1){const l=o[a],c=l.substring(1,l.length-1).split("|");n=n.replace(l,c[Math.floor(Math.random()*c.length)])}i=!0}else i=!1}while(i);e.answer?e.answer=n:e=n;const r=this.container.get("Template");return r&&t?r.compile(e,t):e}renderRandom(e){const t=e,{answers:n,context:i}=t;for(let r=0;r<n.length;r+=1)n[r]=this.renderText(n[r],i);return t}indexOfAnswer(e,t,n,i){if(!this.responses[e]||!this.responses[e][t])return-1;const r=this.responses[e][t];for(let o=0;o<r.length;o+=1){const a=r[o];if(a.answer===n&&JSON.stringify(a.opts)===JSON.stringify(i))return o}return-1}add(e,t,n,i){const r=this.indexOfAnswer(e,t,n,i);if(r!==-1)return this.responses[e][t][r];this.responses[e]||(this.responses[e]={}),this.responses[e][t]||(this.responses[e][t]=[]);const o={answer:n,opts:i};return this.responses[e][t].push(o),o}remove(e,t,n,i){const r=this.indexOfAnswer(e,t,n,i);r!==-1&&this.responses[e][t].splice(r,1)}defaultPipelineFind(e){let t=this.findAllAnswers(e);return t=this.filterAnswers(t),t=this.renderRandom(t),t=this.chooseRandom(t),t}find(e,t,n,i){const r={locale:e,intent:t,context:n,settings:i||this.settings};return this.pipelineFind?this.runPipeline(r,this.pipelineFind):this.defaultPipelineFind(r)}run(e,t){return this.find(e.locale,e.intent,e.context,t)}toJSON(){const e={settings:{...this.settings},responses:this.responses};return delete e.settings.container,e}fromJSON(e){this.applySettings(this.settings,e.settings),this.responses=e.responses}};var Wm=Hm;const{Clonable:Vm}=Fe;let Jm=class extends Vm{constructor(e={},t){super({settings:{},container:e.container||t},t),this.applySettings(this.settings,e),this.settings.tag||(this.settings.tag="action-manager"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.actions={},this.actionsMap={},this.applySettings(this,{pipelineFind:this.getPipeline(`${this.settings.tag}-find`)})}registerDefault(){}posAction(e,t,n){if(!this.actions[e])return-1;const i=this.actions[e];for(let r=0;r<i.length;r+=1)if(i[r].action===t&&JSON.stringify(i[r].parameters)===JSON.stringify(n))return r;return-1}findActions(e){return(this.actions[e]||[]).map(n=>({...n,fn:this.actionsMap[n.action]}))}async processActions(e,t){const n=this.findActions(e);t&&typeof t=="object"&&(t.actions=n.map(r=>({action:r.action,parameters:r.parameters})));let i=t;for(const{fn:r,parameters:o}of n)if(r){const a=await r(i,...o||[]);a&&(typeof i=="object"?typeof a=="object"?i=a:i.answer=a:i=a)}return i}addAction(e,t,n,i){this.posAction(e,t,n)===-1&&(this.actions[e]||(this.actions[e]=[]),this.actions[e].push({action:t,parameters:n}),i&&(this.actionsMap[t]=i))}removeAction(e,t,n){const i=this.posAction(e,t,n);i>-1&&this.actions[e].splice(i,1)}removeActions(e){delete this.actions[e]}registerActionInMap(e,t){this.actionsMap[e]=t}removeActionFromMap(e){delete this.actionsMap[e]}run(e,t){const n=e;return n.settings=n.settings||t||this.settings,this.processActions(e.intent,n)}toJSON(){const e={settings:{...this.settings},actions:this.actions};return delete e.settings.container,e}fromJSON(e){this.applySettings(this.settings,e.settings),this.actions=e.actions}};var Km=Jm;const Gm=Wm,Qm=Km;var Zm={NlgManager:Gm,ActionManager:Qm};const{Clonable:Xm}=Fe;let Ym=class extends Xm{constructor(e={},t){super({settings:{},container:e.container||t},t),this.applySettings(this.settings,e),this.settings.tag||(this.settings.tag="sentiment-analyzer"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.applySettings(this,{pipelinePrepare:this.getPipeline(`${this.settings.tag}-prepare`),pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)})}registerDefault(){this.container.registerConfiguration("sentiment-analyzer",{},!1)}prepare(e,t,n,i){const r=this.getPipeline(`${this.settings.tag}-prepare`);if(r){const l={text:t,locale:e,settings:n||this.settings};return this.runPipeline(l,r)}if(i){const l=this.container.get(`stemmer-${e}`)||this.container.get("stemmer-en");if(l)return l.tokenizeAndStem(t)}const o=this.container.get(`tokenizer-${e}`)||this.container.get("tokenizer-en");return o?o.tokenize(t,!0):t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().split(/[\s,.!?;:([\]'"¡¿)/]+/).filter(l=>l)}async getDictionary(e){const t=e,n=this.container.get(`sentiment-${t.locale}`);let i;return n&&(n.senticon?i="senticon":n.pattern?i="pattern":n.afinn&&(i="afinn")),i?(t.sentimentDictionary={type:i,dictionary:n[i],negations:n.negations.words,stemmed:n.stemmed===void 0?!1:n.stemmed},t):(t.sentimentDictionary={type:i,dictionary:void 0,negations:[],stemmed:!1},t)}async getTokens(e){const t=e;return!t.tokens&&t.sentimentDictionary.type&&(t.tokens=await this.prepare(t.locale,t.utterance||t.text,t.settings,t.sentimentDictionary.stemmed)),t}calculate(e){const t=e;if(t.sentimentDictionary.type){const n=Array.isArray(t.tokens)?t.tokens:Object.keys(t.tokens);if(!t.sentimentDictionary.dictionary)t.sentiment={score:0,numWords:n.length,numHits:0,average:0,type:t.sentimentDictionary.type,locale:t.locale};else{const{dictionary:i}=t.sentimentDictionary,{negations:r}=t.sentimentDictionary;let o=0,a=1,l=0;for(let c=0;c<n.length;c+=1){const u=n[c].toLowerCase();r.indexOf(u)!==-1?(a=-1,l+=1):i[u]!==void 0&&(o+=a*i[u],l+=1)}t.sentiment={score:o,numWords:n.length,numHits:l,average:o/n.length,type:t.sentimentDictionary.type,locale:t.locale}}}else t.sentiment={score:0,numWords:0,numHits:0,average:0,type:t.sentimentDictionary.type,locale:t.locale};return t.sentiment.score>0?t.sentiment.vote="positive":t.sentiment.score<0?t.sentiment.vote="negative":t.sentiment.vote="neutral",t}async defaultPipelineProcess(e){let t=await this.getDictionary(e);return t=await this.getTokens(t),t=await this.calculate(t),delete t.sentimentDictionary,t}process(e,t){const n=e;return n.settings=n.settings||t||this.settings,this.pipelineProcess?this.runPipeline(n,this.pipelineProcess):this.defaultPipelineProcess(n)}};var e0=Ym;const t0=e0;var n0={SentimentAnalyzer:t0};let s0=class{constructor(){this.intents={},this.isEmpty=!0}getSlot(e,t){if(this.intents[e])return this.intents[e][t]}existsSlot(e,t){return this.getSlot(e,t)!==void 0}addSlot(e,t,n=!1,i){return this.isEmpty=!1,this.intents[e]||(this.intents[e]={}),this.intents[e][t]={intent:e,entity:t,mandatory:n,locales:i||{}},this.intents[e][t]}updateSlot(e,t,n,i){if(!this.intents[e]||!this.intents[e][t])return this.addSlot(e,t,n,i);const r=this.intents[e][t];return n!==void 0&&(r.mandatory=n),r.locales=Object.assign(r.locales,i),this.intents[e][t]}removeSlot(e,t){this.intents[e]&&delete this.intents[e][t]}addBatch(e,t){const n=[];return t&&t.length>0&&t.forEach(i=>{let r=this.getSlot(e,i);r||(r=this.addSlot(e,i)),n.push(r)}),n}getIntentEntityNames(e){if(this.intents[e])return Object.keys(this.intents[e])}hasIntentEntities(e){return this.getIntentEntityNames(e).length>0}clear(){this.intents={}}load(e){this.intents=e||{},this.isEmpty=Object.keys(this.intents).length===0}save(){return this.intents}getMandatorySlots(e){const t={},n=this.intents[e];if(n){const i=Object.keys(n);for(let r=0,o=i.length;r<o;r+=1){const a=n[i[r]];a.mandatory&&(t[a.entity]=a)}}return t}cleanContextEntities(e,t){const n=t;if(n.slotFill)return;const i=this.getMandatorySlots(e),r=Object.keys(i);r.length!==0&&r.forEach(o=>{delete n[o]})}generateEntityAliases(e){const t=[],n={};for(let i=0;i<e.length;i+=1){const r=e[i];n[r.entity]||(n[r.entity]=[]),t[i]=`${r.entity}_${n[r.entity].length}`,n[r.entity].push(!0)}return t}process(e,t){const n=e,i=t;if(this.cleanContextEntities(n.intent,i),i.slotFill&&(n.intent=i.slotFill.intent,n.answer=i.slotFill.answer,n.srcAnswer=i.slotFill.srcAnswer),!n.intent||n.intent==="None")return!1;i.slotFill&&i.slotFill.intent===n.intent&&(n.entities=[...i.slotFill.entities,...n.entities]);const r=this.getMandatorySlots(n.intent);let o=Object.keys(r);if(o.length===0)return!1;const a=this.generateEntityAliases(n.entities);for(let c=0,u=n.entities.length;c<u;c+=1){const f=n.entities[c];delete r[f.entity],delete r[a[c]]}if(i.slotFill&&r[i.slotFill.currentSlot]&&(n.entities.push({entity:i.slotFill.currentSlot,utteranceText:n.utterance,sourceText:n.utterance,accuracy:.95,start:0,end:n.utterance.length-1,len:n.utterance.length,isSlotFillingFallback:!0}),delete r[i.slotFill.currentSlot]),o=Object.keys(r),i.slotFill&&i.slotFill.currentSlot&&(i.slotFill.latestSlot=i.slotFill.currentSlot),!o||o.length===0)return delete n.srcAnswer,!0;i.slotFill&&i.slotFill.intent===n.intent&&(n.localeIso2=i.slotFill.localeIso2),n.slotFill={localeIso2:n.localeIso2,intent:n.intent,entities:n.entities,answer:n.answer,srcAnswer:n.srcAnswer},i.slotFill&&i.slotFill.latestSlot&&(n.slotFill.latestSlot=i.slotFill.latestSlot);const l=r[o[0]];return n.slotFill.currentSlot=l.entity,n.srcAnswer=l.locales[n.localeIso2],i.slotFill=n.slotFill,!0}};var i0=s0;const r0=i0;var o0={SlotManager:r0};const{Clonable:a0}=Fe,l0="_data";let c0=class extends a0{constructor(e={},t){super({settings:{},container:e.container||t},t),this.applySettings(this.settings,e),this.settings.tag||(this.settings.tag="context-manager"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.contextDictionary={},this.defaultData={}}registerDefault(){this.container.registerConfiguration("context-manager",{tableName:"context"})}async getInputContextId(e){let t;return this.onGetInputContextId&&(t=await this.onGetInputContextId(e)),!t&&e&&e.activity&&(e.activity.address&&e.activity.address.conversation?t=e.activity.address.conversation.id:e.activity.conversation&&(t=e.activity.conversation.id)),t}async getContext(e){const t=await this.getInputContextId(e);let n;if(t){if(this.settings.tableName){const i=this.container?this.container.get("database"):void 0;i&&(n=await i.findOne(this.settings.tableName,{conversationId:t})||{conversationId:t})}n||(n=this.contextDictionary[t]||{conversationId:t})}else n={};return n[l0]=this.defaultData,n}async setContext(e,t){const n=this.container.get("logger"),i=await this.getInputContextId(e);if(i){if(!t.id){const a=await this.getContext(e);a&&(t.id=a.id)}const r=Object.keys(t),o={conversationId:i};for(let a=0;a<r.length;a+=1){const l=r[a];l.startsWith("_")||(o[l]=t[l])}if(this.settings.tableName){const a=this.container?this.container.get("database"):void 0;a?await a.save(this.settings.tableName,o):this.contextDictionary[i]=o}else this.contextDictionary[i]=o;this.onCtxUpdate&&(n.debug("emmitting event onCtxUpdate..."),await this.onCtxUpdate(o))}}async resetConversations(){for(const e of Object.keys(this.contextDictionary))await this.resetConversation(e)}async resetConversation(e){this.container.get("logger").debug(`resetting context in conversation: ${e}`);const n=this.contextDictionary[e];Object.keys(n).forEach(i=>{delete n[i]}),this.contextDictionary[e].dialogStack=[],this.contextDictionary[e].variableName=void 0}};var Dl=c0;const{Clonable:u0,containerBootstrap:f0}=Fe,{NluManager:h0,NluNeural:d0}=um,{Ner:g0,ExtractorEnum:p0,ExtractorRegex:m0,ExtractorTrim:y0,ExtractorBuiltin:b0}=Um,{ActionManager:w0,NlgManager:x0}=Zm,{SentimentAnalyzer:k0}=n0,{SlotManager:A0}=o0,C0=Dl;let S0=class extends u0{constructor(e={},t){super({settings:{},container:e.container||t||f0()},t),this.applySettings(this.settings,e),this.settings.tag||(this.settings.tag="nlp"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.nluManager=this.container.get("nlu-manager",this.settings.nlu),this.ner=this.container.get("ner",this.settings.ner),this.nlgManager=this.container.get("nlg-manager",this.settings.nlg),this.actionManager=this.container.get("action-manager",this.settings.action),this.sentiment=this.container.get("sentiment-analyzer",this.settings.sentiment),this.slotManager=this.container.get("SlotManager",this.settings.slot),this.contextManager=this.container.get("context-manager",this.settings.context),this.forceNER=this.settings.forceNER,this.forceNER===void 0&&(this.forceNER=!1),this.initialize()}registerDefault(){this.container.registerConfiguration("nlp",{threshold:.5,autoLoad:!0,autoSave:!0,modelFileName:"model.nlp",executeActionsBeforeAnswers:!1},!1),this.use(h0),this.use(g0),this.use(p0),this.use(m0),this.use(y0),this.use(b0),this.use(x0),this.use(w0),this.use(d0),this.use(k0),this.use(C0),this.container.register("SlotManager",A0,!1)}initialize(){if(this.settings.nlu){const e=Object.keys(this.settings.nlu);for(let t=0;t<e.length;t+=1){const n=e[t],i=Object.keys(this.settings.nlu[n]);for(let r=0;r<i.length;r+=1){const o=i[r],a=this.settings.nlu[n][o],{className:l}=a;delete a.className,this.useNlu(l,n,o,a)}}}this.settings.languages&&this.addLanguage(this.settings.languages),this.settings.locales&&this.addLanguage(this.settings.locales),this.settings.calculateSentiment===void 0&&(this.settings.calculateSentiment=!0),this.settings.executeActionsBeforeAnswers===void 0&&(this.settings.executeActionsBeforeAnswers=!1)}async start(){this.settings.corpora&&await this.addCorpora(this.settings.corpora)}async loadOrTrain(){let e=!1;this.settings.autoLoad&&(e=await this.load(this.settings.modelFileName)),e||await this.train()}useNlu(e,t,n,i){if(t||(t="??"),Array.isArray(t))for(let r=0;r<t.length;r+=1)this.useNlu(e,t[r],n,i);else{const r=typeof e=="string"?e:this.container.use(e);let o=this.container.getConfiguration(`domain-manager-${t}`);o||(o={},this.container.registerConfiguration(`domain-manager-${t}`,o)),o.nluByDomain||(o.nluByDomain={});const a=!n||n==="*"?"default":n;o.nluByDomain[a]||(o.nluByDomain[a]={}),o.nluByDomain[a].className=r,o.nluByDomain[a].settings=i}}guessLanguage(e){return this.nluManager.guessLanguage(e)}addLanguage(e){return this.nluManager.addLanguage(e)}removeLanguage(e){return this.nluManager.removeLanguage(e)}addAdditionalEnumEntityUtterances(){this.settings.languages&&this.settings.languages.forEach(e=>{const t={};this.ner.getRules(e).forEach(o=>{if(o.type==="enum"){const a=this.ner.nameToEntity(o.name);t[a]=t[a]||[],o.rules.forEach(l=>{t[a]=t[a].concat(l.texts)})}});const i=this.nluManager.consolidateManager(e);i.getSentences().forEach(o=>{const a=this.ner.getEntitiesFromUtterance(e,o.utterance).map(l=>this.ner.nameToEntity(l));this.replaceEnumEntitiesInSentence(i,e,o.domain,o.utterance,o.intent,a,t)})})}replaceEnumEntitiesInSentence(e,t,n,i,r,o,a){if(!o.length){this.nluManager.guesser.addExtraSentence(t,i),e.add(n,i,r);return}const l=o[0];a[l]&&a[l].length?a[l].forEach(c=>{const u=i.replace(l,c);this.replaceEnumEntitiesInSentence(e,t,n,u,r,o.slice(1),a)}):this.replaceEnumEntitiesInSentence(e,t,n,i,r,o.slice(1),a)}addDocument(e,t,n){const i=this.ner.getEntitiesFromUtterance(t);return this.slotManager.addBatch(n,i),this.nluManager.add(e,t,n)}removeDocument(e,t,n){return this.nluManager.remove(e,t,n)}getRulesByName(e,t){return this.ner.getRulesByName(e,t)}addNerRule(e,t,n,i){return this.ner.addRule(e,t,n,i)}removeNerRule(e,t,n){return this.ner.removeRule(e,t,n)}addNerRuleOptionTexts(e,t,n,i){return this.ner.addRuleOptionTexts(e,t,n,i)}removeNerRuleOptionTexts(e,t,n,i){return this.ner.removeRuleOptionTexts(e,t,n,i)}addNerRegexRule(e,t,n){return this.ner.addRegexRule(e,t,n)}addNerBetweenCondition(e,t,n,i,r){return this.ner.addBetweenCondition(e,t,n,i,r)}addNerBetweenLastCondition(e,t,n,i,r){return this.ner.addBetweenLastCondition(e,t,n,i,r)}addNerPositionCondition(e,t,n,i,r){return this.ner.addPositionCondition(e,t,n,i,r)}addNerAfterCondition(e,t,n,i){return this.ner.addAfterCondition(e,t,n,i)}addNerAfterFirstCondition(e,t,n,i){return this.ner.addAfterFirstCondition(e,t,n,i)}addNerAfterLastCondition(e,t,n,i){return this.ner.addAfterLastCondition(e,t,n,i)}addNerBeforeCondition(e,t,n,i){return this.ner.addBeforeCondition(e,t,n,i)}addNerBeforeFirstCondition(e,t,n,i){return this.ner.addBeforeFirstCondition(e,t,n,i)}addNerBeforeLastCondition(e,t,n,i){return this.ner.addBeforeLastCondition(e,t,n,i)}assignDomain(e,t,n){return this.nluManager.assignDomain(e,t,n)}getIntentDomain(e,t){return this.nluManager.getIntentDomain(e,t)}getDomains(){return this.nluManager.getDomains()}addAction(e,t,n,i){return this.actionManager.addAction(e,t,n,i)}registerActionFunction(e,t){return this.actionManager.registerActionInMap(e,t)}getActions(e){return this.actionManager.findActions(e)}removeAction(e,t,n){return this.actionManager.removeAction(e,t,n)}removeActions(e){return this.actionManager.removeActions(e)}removeActionFunction(e){return this.actionManager.removeActionFromMap(e)}addAnswer(e,t,n,i){return this.nlgManager.add(e,t,n,i)}removeAnswer(e,t,n,i){return this.nlgManager.remove(e,t,n,i)}findAllAnswers(e,t){return this.nlgManager.findAllAnswers({locale:e,intent:t}).answers}async addCorpora(e){if(e)if(Array.isArray(e))for(let t=0;t<e.length;t+=1)await this.addCorpus(e[t]);else await this.addCorpus(e)}async addImported(e){let t;if(e.content)t=e.content;else if(e.filename){if(t=await this.container.get("fs").readFile(e.filename),!t)throw new Error(`Corpus not found "${e.filename}"`)}else throw new Error("Corpus information without content or file name");let n=this.container.get(e.importer);if(n||(n=this.container.get(`${e.importer}-importer`)),!n)throw new Error(`Corpus importer not found: ${e.importer}`);const i=n.transform(t,e);for(let r=0;r<i.length;r+=1)this.addCorpus(i[r])}addEntities(e,t){const n=Object.keys(e);for(let i=0;i<n.length;i+=1){const r=n[i];let o=e[r];typeof o=="string"&&(o={regex:[o]});let a=o.locale;if(a||(a=t||"en"),typeof a=="string"&&(a=a.slice(0,2)),o.options){const l=Object.keys(o.options);for(let c=0;c<l.length;c+=1)this.addNerRuleOptionTexts(a,r,l[c],o.options[l[c]])}if(o.regex)if(Array.isArray(o.regex))for(let l=0;l<o.regex.length;l+=1)this.addNerRegexRule(a,r,o.regex[l]);else typeof o.regex=="string"&&o.regex.trim()&&this.addNerRegexRule(a,r,o.regex);if(o.trim)for(let l=0;l<o.trim.length;l+=1)switch(o.trim[l].position){case"after":case"afterLast":case"afterFirst":case"before":case"beforeFirst":case"beforeLast":this.addNerPositionCondition(a,r,o.trim[l].position,o.trim[l].words,o.trim[l].opts);break;case"between":this.addNerBetweenCondition(a,r,o.trim[l].leftWords,o.trim[l].rightWords,o.trim[l].opts);break;case"betweenLast":this.addNerBetweenLastCondition(a,r,o.trim[l].leftWords,o.trim[l].rightWords,o.trim[l].opts);break}}}addData(e,t,n){for(let i=0;i<e.length;i+=1){const r=e[i],{intent:o,utterances:a,answers:l,slotFilling:c,actions:u}=r;for(let f=0;f<a.length;f+=1)n&&this.assignDomain(t,o,n.name),this.addDocument(t,a[f],o);if(l)for(let f=0;f<l.length;f+=1){const h=l[f];typeof h=="string"?this.addAnswer(t,o,h):this.addAnswer(t,o,h.answer,h.opts)}if(c){const f=Object.keys(c);for(let h=0;h<f.length;h+=1){const p=c[f[h]];let m;const w={};typeof p=="string"?(w[t]=p,m=!0):(w[t]=p.question,m=p.mandatory||!1),this.slotManager.updateSlot(o,f[h],m,w)}}u&&u.forEach(f=>{if(f)if(typeof f=="object"){if(!f.name)return;this.addAction(o,f.name,f.parameters||[])}else this.addAction(o,f,[])})}}async addCorpus(e){if(e.importer)await this.addImported(e);else{let t=e;const n=this.container.get("fs");if(typeof e=="string"){const i=await n.readFile(e);if(!i)throw new Error(`Corpus not found "${e}"`);t=typeof i=="string"?JSON.parse(i):i}if(t.contextData){let{contextData:i}=t;typeof t.contextData=="string"&&(i=JSON.parse(await n.readFile(t.contextData)));const r=this.container.get("context-manager"),o=Object.keys(i);for(let a=0;a<o.length;a+=1)r.defaultData[o[a]]=i[o[a]]}if(t.domains){t.entities&&this.addEntities(t.entities);for(let i=0;i<t.domains.length;i+=1){const r=t.domains[i],{data:o,entities:a}=r,l=r.locale.slice(0,2);this.addLanguage(l),a&&this.addEntities(a,l),this.addData(o,l,r)}}else{const i=t.locale.slice(0,2);this.addLanguage(i);const{data:r,entities:o}=t;o&&this.addEntities(o,i),this.addData(r,i)}}}getSentiment(e,t){return typeof e=="object"?this.sentiment.process(e):(t||(t=e,e=this.guessLanguage(t)),this.sentiment.process({utterance:t,locale:e}))}describeLanguage(e,t){this.nluManager.describeLanguage(e,t)}async train(){this.nluManager.addLanguage(this.settings.languages);const e=await this.nluManager.train();return this.settings.autoSave&&await this.save(this.settings.modelFileName,!0),e}async classify(e,t,n){return this.nluManager.process(e,t,n||this.settings.nlu)}async extractEntities(e,t,n,i){return typeof e=="object"?this.ner.process(e):(t||(t=e,e=void 0),e||(e=this.guessLanguage(t)),await this.ner.process({locale:e,utterance:t,context:n,settings:this.applySettings(i,this.settings.ner)}))}organizeEntities(e){const t={};for(let i=0;i<e.length;i+=1){const r=e[i];t[r.entity]||(t[r.entity]=[]),t[r.entity].push(r)}const n=[];return Object.keys(t).forEach(i=>{const r=t[i];if(r.length===1)n.push(r[0]);else{for(let o=0;o<r.length;o+=1)r[o].alias=`${i}_${o}`;n.push({entity:i,isList:!0,items:r})}}),n}structureEntities(e){const t=this.organizeEntities(e.entities);e.context.entities||(e.context.entities={});for(let n=0;n<t.length;n+=1){const i=t[n];if(e.context.entities[i.entity]=i,i.alias&&(e.context[i.alias]=i.sourceText),i.isList)for(let r=0;r<i.items.length;r+=1)e.context[i.items[r].alias]=i.items[r].sourceText;else e.context[`${i.entity}_0`]=i.sourceText;e.context[i.entity]=i.isList?i.items[0].sourceText:i.sourceText}return e}async process(e,t,n,i){let r,o=n;typeof e=="object"&&(typeof t=="object"&&t.value?(e=void 0,t=t.value):r=e),r?(e=r.locale,t=r.utterance||r.message||r.text):(t||(t=e,e=void 0),e||(e=this.guessLanguage(t)),r={locale:e,utterance:t,settings:i},i&&(i.activity&&!r.activity&&(r.activity=i.activity),i.conversationId&&!r.activity&&(r.activity={conversation:{id:i.conversationId}}))),o||(o=await this.contextManager.getContext(r)),o.channel=r.channel,o.app=r.app,o.from=r.from||null;const a={locale:e,utterance:t,context:o,settings:this.applySettings(i,this.settings.nlu)},l=a.settings&&"forceNER"in a.settings?a.settings.forceNER:this.forceNER;let c=await this.nluManager.process(a);if(l||!this.slotManager.isEmpty){const h=await this.ner.generateEntityUtterance(c.locale||e,t);if(h&&h!==t){const p={locale:c.locale||e,utterance:h,context:o,settings:this.applySettings(i,this.settings.nlu)},m=await this.nluManager.process(p);m&&(m.score>c.score||c.intent==="None")&&(c=m,c.utterance=t,c.optionalUtterance=h)}}if(c.score<this.settings.threshold&&(c.score=1,c.intent="None"),c.context=o,l||!this.slotManager.isEmpty){const h=this.slotManager.getIntentEntityNames(c.intent);c=await this.ner.process({...c},h)}else c.entities=[],c.sourceEntities=[];const u=this.container.get(`stemmer-${c.locale}`);if(u&&u.lastFill&&u.lastFill(c),c=this.structureEntities(c),(l||!this.slotManager.isEmpty)&&(this.slotManager.process(c,o)&&(c=this.structureEntities(c)),o.slotFill=c.slotFill),this.settings.executeActionsBeforeAnswers&&(c=await this.actionManager.run({...c})),this.settings.executeActionsBeforeAnswers&&c.answer)c.answer=this.nlgManager.renderText(c.answer,o);else{const h=await this.nlgManager.run({...c});c.answers=h.answers,c.answer=h.answer}if(c.srcAnswer&&(c.answer=this.nlgManager.renderText(c.srcAnswer,o)),this.settings.executeActionsBeforeAnswers||(c=await this.actionManager.run({...c})),this.settings.calculateSentiment){const h=await this.getSentiment(e,t);c.sentiment=h?h.sentiment:void 0}await this.contextManager.setContext(r,o),delete c.context,delete c.settings;const f=r?this.applySettings(r,c):c;if(f.intent==="None"&&!f.answer){const h=this.container.get("open-question");if(h){const p=await h.getAnswer(f.locale,f.utterance);p&&p.answer&&p.answer.length>0&&(f.answer=p.answer,f.isOpenQuestionAnswer=!0,f.openQuestionFirstCharacter=p.position,f.openQuestionScore=p.score)}}if(this.onIntent)await this.onIntent(this,f);else{const h=`onIntent(${f.intent})`,p=this.container.getPipeline(h);p&&await this.container.runPipeline(p,f,this)}return f}toJSON(){const e={settings:{...this.settings},nluManager:this.nluManager.toJSON(),ner:this.ner.toJSON(),nlgManager:this.nlgManager.toJSON(),actionManager:this.actionManager.toJSON(),slotManager:this.slotManager.save()};return delete e.settings.container,e}fromJSON(e){this.applySettings(this.settings,e.settings),this.nluManager.fromJSON(e.nluManager),this.ner.fromJSON(e.ner),this.nlgManager.fromJSON(e.nlgManager),this.actionManager.fromJSON(e.actionManager),this.slotManager.load(e.slotManager)}export(e=!1){const t=this.toJSON();return e?JSON.stringify(t):JSON.stringify(t,null,2)}import(e){const t=typeof e=="string"?JSON.parse(e):e;this.fromJSON(t)}async save(e,t=!1){const n=this.container.get("fs"),i=e||"model.nlp";await n.writeFile(i,this.export(t))}async load(e){const t=this.container.get("fs"),n=e||"model.nlp",i=await t.readFile(n);return i?(this.import(i),!0):!1}};var E0=S0;const v0=E0,D0=Dl;var _0={Nlp:v0,ContextManager:D0};async function T0(){const s=await Fe.containerBootstrap();s.use(_0.Nlp);const{LangZh:e}=await wa(async()=>{const{LangZh:r}=await import("@nlpjs/lang-zh");return{LangZh:r}},[]);s.use(e);const t=s.get("nlp");t.addLanguage("zh"),["不","不用","不需要","否","不想","没有了","停","停止","算了"].forEach(r=>{t.addDocument("zh",r,"intent.no")}),["是","当然","好的","有的","没问题","继续","好","是的","是的","可以","肯定","有"].forEach(r=>{t.addDocument("zh",r,"intent.yes")}),t.settings.autoSave=!1;try{await t.train()}catch(r){console.warn("NLP training encountered an issue:",r)}return t}class uo{constructor(e){N(this,"nlpInstance");this.nlpInstance=e}async train(){this.nlpInstance instanceof Xn?await this.nlpInstance.initialize():await this.nlpInstance.train()}async process(e,t){if(this.nlpInstance instanceof Xn){const n=this.nlpInstance.getIntent(t);return{intent:n.intent,score:n.score}}else{const n=await this.nlpInstance.process(t,e);return{intent:n.intent,score:n.score}}}addDocument(e,t,n){this.nlpInstance instanceof Xn?console.warn("Document addition not supported in simplified NLP"):this.nlpInstance.addDocument(e,t,n)}getInstance(){return this.nlpInstance}}async function F0(s=!1){if(s){const e=new Xn;return await e.initialize(),new uo(e)}return new uo(await T0())}async function R0(s){return console.log("isMobile: ",s),F0(s)}const O0=`${kn.api.baseUrl}/vector_store/stream_query`,fo=de(!0),Js=de(!1),qn="请问还有什么可以效劳的？",P0="# 角色:你的交流风格简练而专业。### 技能: 知识整合与应用 - **信息调用**：所有问题，首先灵活运用已记忆的材料(${documents})，精准匹配问题需求，提供全面且针对性的解答。如果可以找到答案，就直接根据答案进行回复.请严格按照知识库内的材料进行回答，如果没有找到，不要使用网络信息进行回复。## 限制与注意事项 - **服务对象明确**：明确服务于终端客户。措辞尽可能简练，清晰，体现专业性。每次回答的内容不要超过200字。如果遇到无法回答的问题，或者没有把握的问题，统一回复为，对不起，这个问题我无法回答，建议您询问工作人员.- **数据准确性**：确保如果询问历史人物，事件等内容时，严格按照知识库内的材料进行回答。不要引用网络信息。",An=mi.getInstance();async function B0(s,e,t=()=>{},n=()=>{}){const i={id:kn.bailian.indexId,messages:[{role:"user",content:s}],system:P0,top_k:20,rerank_top_k:5},r=`Basic ${btoa(`${kn.auth.username}:${kn.auth.password}`)}`;let o=!1;return new Promise(async(a,l)=>{const c=new bd,u=new wd;An.setGlobalOnCompleteCallback(n);const f=new URL(O0,window.location.origin);await Gh(f.toString(),{method:"POST",headers:{Authorization:r,"Content-Type":"application/json",Accept:"text/event-stream","Access-Control-Allow-Origin":"*"},body:JSON.stringify(i),async onopen(h){h.ok?console.log("SSE connection opened"):console.error("Error opening SSE connection:",h)},async onmessage(h){if(h.event==="FatalError")throw new Error(h.data);o||(t(),o=!0);const p=JSON.parse(h.data);if(console.log("Received chunk:",p.data.content),p.code===200){const m=c.addChunk(p.data.content);for(const w of m)u.enqueue(w,e),await An.processAudioChunk(w)}},onclose(){const h=c.getRemainingBuffer();h.trim()&&(u.enqueue(h+"。",e),An.processAudioChunk(h)),console.log("Connection closed")},onerror(h){if(h instanceof Error)throw h}})})}let Yn=null;async function ho(){return Yn||(Yn=await R0(pd())),Yn}function $0(){const s=de(!1),e=de(!1),t=de(!0),n=de([{role:"assistant",content:(()=>{const u=new Date().getHours();return u>=5&&u<12?"早上好！有什么我可以帮您的吗？":u>=12&&u<18?"下午好！有什么需要帮助的吗？":u>=18||u<5?"晚上好！我随时准备为您服务。":"您好，有什么可以帮您？"})()}]),i=de(null),r=async()=>{console.log("Answer interrupted at:",new Date().toISOString()),fo.value=!1,await An.stopAudioPlayback(),console.log("Audio stopped at:",new Date().toISOString()),await new Promise(u=>setTimeout(u,500)),console.log("timeout at:",new Date().toISOString())};async function o(u){i.value=null;const f=n.value.push({role:"assistant",content:"思考中..."})-1;console.log("start request at:",new Date().toISOString()),e.value=!0;try{await B0(u,h=>{n.value[f].content+=h},()=>{Js.value=!0,n.value[f].content="",e.value=!1},()=>{n.value.push({role:"assistant",content:qn}),Js.value=!1,An.processAudioChunk(qn)})}catch(h){const p=h instanceof Error?h.message:String(h);i.value=p,n.value[f].content=`Error: ${p}`}finally{console.log("request completed at:",new Date().toISOString())}}async function a(u){try{n.value.push({role:"user",content:u});const f=n.value.slice().reverse().find(m=>m.role==="assistant"),p=await(await ho()).process("zh",u);return console.log("IntentionHook: result",p),p.intent!==void 0&&p.intent==="intent.no"&&p.score!==void 0&&p.score>.5&&(console.log("IntentionHook: intent detected",p),console.log("IntentionHook: "+(f==null?void 0:f.content)),f&&f.content===qn)?(console.log("IntentionHook, intent.no replied to "+qn),s.value=!0,!1):!0}catch(f){return console.error("Intent classification error:",f),!0}}async function l(){console.log("Start initializing NLP Manager at:",new Date().toISOString());try{Yn=await ho(),console.log("NLP Manager initialized successfully at: ",new Date().toISOString())}catch(u){console.error("Failed to initialize NLP Manager:",u)}}function c(){t.value=!t.value}return{messages:n,isLoading:e,error:i,isStreamingMode:t,getResponse:o,toggleStreamingMode:c,stopStreaming:r,shouldDisplayText:fo,isAssistantSpeaking:Js,IntentionHook:a,shouldResumeAudio:s,initializeNlpManager:l}}const N0={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},L0={class:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden responsive-container"},M0={class:"flex flex-col md:flex-row h-auto md:h-[600px]"},I0={class:"w-full md:w-1/2 bg-gradient-to-br from-blue-900 to-blue-700 flex items-center justify-center responsive-waveform"},j0={key:0,class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30"},z0={class:"w-full md:w-1/2 flex flex-col responsive-chat"},U0={key:0,class:"flex justify-center items-center py-2 md:py-4"},q0={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-2 py-2 md:px-4 md:py-3 rounded relative text-xs md:text-base",role:"alert"},H0={class:"block sm:inline"},W0={class:"border-t p-2 md:p-4 bg-gray-50"},V0={class:"flex space-x-2 md:space-x-4 items-center"},J0={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K0={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},G0=["disabled"],Q0={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Z0={class:"bg-white rounded-lg p-6 w-80 text-center relative"},X0={class:"text-gray-600 mb-4"},Y0="./res/liaojin.mp3",ey=Li({__name:"ChatInterface",setup(s){const e=de(null),t=de(null),n=de(!1),i=de(!1),r=de(null),{messages:o,isLoading:a,error:l,getResponse:c,stopStreaming:u,shouldDisplayText:f,isAssistantSpeaking:h,IntentionHook:p,shouldResumeAudio:m,initializeNlpManager:w}=$0(),k=de(""),F=de(null),$=()=>{if(qe(),!t.value){console.log("No audio element, setting up playback");return}try{if(t.value.paused){console.log("Audio is paused, attempting to play");try{t.value.play(),i.value=!0,console.log("Audio started playing")}catch(K){console.error("Error playing audio:",K),alert("Please interact with the page to enable audio playback."),i.value=!1}}else{console.log("Audio is playing, attempting to pause");try{t.value.pause(),i.value=!1,console.log("Audio paused successfully")}catch(K){console.error("Error pausing audio:",K);try{t.value.currentTime=0,t.value.load()}catch(P){console.error("Error resetting audio element:",P)}}}}catch(K){console.error("Unexpected error in audio playback toggle:",K)}console.log("New audio playing state:",i.value)},M=()=>{console.log("Audio loading started at: "+new Date().toISOString())},R=()=>{console.log("Audio metadata loaded at: "+new Date().toISOString()),n.value=!0},j=()=>{console.log("Audio can play at: "+new Date().toISOString()),n.value=!0},re=K=>{var he;const P=K.target;switch(console.error("Audio loading error:",P.error),(he=P.error)==null?void 0:he.code){case MediaError.MEDIA_ERR_ABORTED:console.error("Fetching process aborted");break;case MediaError.MEDIA_ERR_NETWORK:console.error("Network error - check audio file URL");break;case MediaError.MEDIA_ERR_DECODE:console.error("Decoding error - check audio file format");break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:console.error("Audio format not supported");break;default:console.error("Unknown audio error")}alert("Audio loading failed. Please check network and file compatibility.")},se=async()=>{var K;if(k.value.trim()){i.value&&((K=t.value)==null||K.pause(),i.value=!1);try{const P=k.value;k.value="",await c(P),await jt()}catch(P){console.error("Error sending message:",P)}}},ie=zi(()=>a.value?"Thinking...":"Send"),qe=async()=>{try{if(ce.state==="closed"){console.warn("AudioContext is closed. Recreating...");const{audioContext:K}=await wa(async()=>{const{audioContext:P}=await Promise.resolve().then(()=>Yh);return{audioContext:P}},void 0);Object.assign(ce,K)}ce.state==="suspended"&&(console.log("AudioContext is suspended. Attempting to resume..."),await ce.resume(),console.log("AudioContext resumed successfully"))}catch(K){console.error("Error handling AudioContext:",K);try{const P=new(window.AudioContext||window.webkitAudioContext);Object.assign(ce,P),await ce.resume(),console.log("Forcefully created new AudioContext")}catch(P){console.error("Failed to create new AudioContext:",P)}}},Ge=async()=>{if(qe(),!k.value.trim())return;h.value&&await u(),await p(k.value.trim())&&await se(),k.value=""},St=()=>{l.value&&(l.value=null)},jt=async()=>{await ei(),r.value&&(r.value.scrollTop=r.value.scrollHeight,console.log("Scrolled to bottom:",r.value.scrollHeight))},ke=de(!1),Et=de(""),zt=de(null);let ae=null,J=null,W=null;const ct=()=>{const K=window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition;if(!K)return console.error("Speech recognition is not supported in this browser."),alert("Your browser does not support speech recognition. Please try Chrome or Edge."),null;try{const P=new K;return P.continuous=!0,P.interimResults=!0,P.maxAlternatives=1,P.lang=navigator.language||"zh-CN",console.log("Speech Recognition Language:",P.lang),P.onstart=()=>{console.log("Speech recognition started"),ke.value=!0},P.onresult=he=>{console.log("Speech Recognition Full Event:",he),W&&clearTimeout(W);const je=he.results,le=Array.from(je).map(pe=>{var qt;return((qt=pe[0])==null?void 0:qt.transcript)||""}).filter(Boolean).join(" ");console.log("Extracted Transcript:",le),le&&(Et.value=le,k.value=le),W=setTimeout(()=>{console.log("Speech timeout triggered"),ve()},2e3)},P.onerror=he=>{switch(console.error("Speech recognition error:",he.error),he.error){case"no-speech":alert("No speech was detected. Please try again.");break;case"audio-capture":alert("No microphone was found. Ensure your microphone is connected.");break;case"not-allowed":alert("Permission to use microphone was denied. Please check your browser settings.");break;case"network":alert("Network error occurred. Check your internet connection.");break;default:}ke.value=!1},P.onend=()=>{console.log("Speech recognition ended"),W&&clearTimeout(W),ke.value=!1,Bn()},P}catch(P){return console.error("Failed to initialize speech recognition:",P),alert("Failed to initialize speech recognition. Please try a different browser."),null}},Ut=()=>{qe(),ae||(ae=ct()),ke.value?ve():ut()},ut=()=>{console.log("startSpeechRecognition"),ae&&(ke.value=!0,Et.value="",k.value="",ae.start(),Pn())},ve=()=>{console.log("stopSpeechRecognition"),ae&&(ae.stop(),ke.value=!1,Bn())},Pn=()=>{ei(()=>{if(!zt.value){console.warn("Voice wave canvas not yet available");return}navigator.mediaDevices.getUserMedia({audio:!0}).then(K=>{const P=ce.createMediaStreamSource(K);J=ce.createAnalyser(),P.connect(J),J.fftSize=256;const he=J.frequencyBinCount,je=new Uint8Array(he),le=zt.value,pe=le&&le.getContext("2d");if(!pe){console.error("Could not get canvas context");return}le.width=le.clientWidth,le.height=le.clientHeight;function qt(){if(!ke.value||!pe||!J){if(!pe)return;pe.clearRect(0,0,le.width,le.height);return}requestAnimationFrame(qt),J.getByteFrequencyData(je),pe.clearRect(0,0,le.width,le.height);const d=le.width/je.length*2.5;let g,b=0;for(let A=0;A<je.length;A++){g=je[A]/2;const x=pe.createLinearGradient(0,le.height,0,le.height-g);x.addColorStop(0,"rgba(50, 150, 255, 0.7)"),x.addColorStop(1,"rgba(50, 50, 255, 0.3)"),pe.fillStyle=x,pe.fillRect(b,le.height-g,d,g),b+=d+1}}console.log("Visualizing voice"),qt()}).catch(K=>{console.error("Error accessing microphone",K),alert("Could not access microphone. Please check permissions.")})})},Bn=()=>{J=null};return Jo(()=>{w()}),Mi(()=>{F.value=null}),en(f,K=>{console.log(`shouldDisplayText changed at ${new Date().toISOString()}: ${K}`)}),en(m,K=>{K&&t.value&&(console.log("Resuming audio playback"),t.value.play().then(()=>{i.value=!0,console.log("Audio started playing")}).catch(P=>{console.error("Error playing audio:",P),alert("Please interact with the page to enable audio playback."),i.value=!1}),m.value=!1)}),en(n,K=>{console.log(`Audio element loaded status changed at ${new Date().toISOString()}: ${K}`)}),(K,P)=>(Be(),We(Ve,null,[V("audio",{ref_key:"audioElement",ref:t,src:Y0,loop:"",preload:"metadata",onLoadstart:M,onLoadedmetadata:R,onCanplay:j,onError:re},null,544),n.value?cn("",!0):(Be(),We("div",N0,P[1]||(P[1]=[V("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500"},null,-1)]))),V("div",L0,[V("div",M0,[V("div",I0,[V("div",{class:"w-full h-[300px] md:h-full flex items-center justify-center cursor-pointer relative overflow-hidden",onClick:$},[V("canvas",{ref_key:"waveformCanvas",ref:e,class:"absolute inset-0 w-full h-full"},null,512),i.value?cn("",!0):(Be(),We("div",j0,P[2]||(P[2]=[V("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 md:h-24 w-16 md:w-24 text-white opacity-70 drop-shadow-lg",viewBox:"0 0 24 24",fill:"currentColor"},[V("path",{d:"M8 5v14l11-7z"})],-1)])))])]),V("div",z0,[V("div",{class:"flex-1 overflow-y-auto p-2 md:p-4 space-y-2 md:space-y-4",ref_key:"messagesContainer",ref:r},[(Be(!0),We(Ve,null,Nc(Vt(o),(he,je)=>(Be(),da(df,{key:je,message:he,class:"text-sm md:text-base"},null,8,["message"]))),128)),Vt(a)?(Be(),We("div",U0,P[3]||(P[3]=[V("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-8 w-8 md:h-12 md:w-12"},null,-1)]))):cn("",!0)],512),Vt(l)?(Be(),We("div",q0,[V("span",H0,Wn(Vt(l)),1),V("span",{onClick:St,class:"absolute top-0 bottom-0 right-0 px-2 py-2 md:px-4 md:py-3 cursor-pointer text-sm md:text-base"}," × ")])):cn("",!0),V("div",W0,[V("div",V0,[V("button",{onClick:Ut,class:tn(["bg-blue-100 text-blue-600 p-2 rounded-full hover:bg-blue-200 transition-colors",{"bg-red-100 text-red-600":ke.value}])},[ke.value?(Be(),We("svg",K0,P[5]||(P[5]=[V("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"},null,-1),V("line",{x1:"23",y1:"1",x2:"1",y2:"23",stroke:"currentColor","stroke-width":"2"},null,-1)]))):(Be(),We("svg",J0,P[4]||(P[4]=[V("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"},null,-1)])))],2),kc(V("input",{"onUpdate:modelValue":P[0]||(P[0]=he=>k.value=he),type:"text",placeholder:"Ask a question...",class:"flex-1 rounded-lg border border-gray-300 px-2 py-1 md:px-4 md:py-2 text-sm md:text-base focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:Ku(Ge,["enter"])},null,544),[[Vu,k.value]]),V("button",{onClick:Ge,class:"bg-blue-500 text-white px-3 py-1 md:px-6 md:py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base",disabled:Vt(a)||!k.value.trim()},Wn(ie.value),9,G0)])])])]),ke.value?(Be(),We("div",Q0,[V("div",Z0,[V("button",{onClick:ve,class:"absolute top-2 right-2 text-gray-500 hover:text-gray-700"}," ✕ "),P[6]||(P[6]=V("h3",{class:"text-xl font-semibold mb-4"},"Listening...",-1)),V("canvas",{ref_key:"voiceWaveCanvas",ref:zt,class:"w-full h-32 mb-4"},null,512),V("p",X0,Wn(Et.value),1)])])):cn("",!0)])],64))}}),ty=(s,e)=>{const t=s.__vccOpts||s;for(const[n,i]of e)t[n]=i;return t},ny=ty(ey,[["__scopeId","data-v-07e657fa"]]),sy={class:"min-h-screen bg-gray-100"},iy={class:"container mx-auto px-4 py-8"},ry=Li({__name:"App",setup(s){return(e,t)=>(Be(),We("div",sy,[V("div",iy,[at(ny)])]))}});console.log("Starting app initialization...");const oy=Zu(ry);oy.mount("#app");console.log("App mounted successfully");
//# sourceMappingURL=index.DclyovFJ.js.map
